!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.vega=n.vega||{})}(this,function(n){"use strict";function t(n){var t,e,r,i,u,a,o,f,c=n.maxbins||20,s=n.base||10,l=Math.log(s),h=n.divide||[5,2],d=n.extent[0],v=n.extent[1],p=v-d;if(n.step)t=n.step;else if(n.steps){for(u=p/c,a=0,o=n.steps.length;o>a&&n.steps[a]<u;++a);t=n.steps[Math.max(0,a-1)]}else{for(e=Math.ceil(Math.log(c)/l),r=n.minstep||0,t=Math.max(r,Math.pow(s,Math.round(Math.log(p)/l)-e));Math.ceil(p/t)>c;)t*=s;for(a=0,o=h.length;o>a;++a)u=t/h[a],u>=r&&c>=p/u&&(t=u)}return u=Math.log(t),i=u>=0?0:~~(-u/l)+1,f=Math.pow(s,-i-1),(n.nice||void 0===n.nice)&&(d=Math.min(d,Math.floor(d/t+f)*t),v=Math.ceil(v/t)*t),{start:d,stop:v,step:t}}function e(n,t){var e,i=[],u=n.length,a=-1;if(null==t)for(;++a<u;)isNaN(e=r(n[a]))||i.push(e);else for(;++a<u;)isNaN(e=r(t(n[a],a,n)))||i.push(e);return i}function r(n){return null===n?NaN:+n}function i(n,t){return t>n?-1:n>t?1:n>=t?0:NaN}function u(n){return 1===n.length&&(n=a(n)),{left:function(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);i>r;){var u=r+i>>>1;n(t[u],e)<0?r=u+1:i=u}return r},right:function(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);i>r;){var u=r+i>>>1;n(t[u],e)>0?i=u:r=u+1}return r}}}function a(n){return function(t,e){return i(n(t),e)}}function o(n){return null===n?NaN:+n}function f(n,t,e){n=+n,t=+t,e=(i=arguments.length)<2?(t=n,n=0,1):3>i?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((t-n)/e)),u=new Array(i);++r<i;)u[r]=n+r*e;return u}function c(n,t,e){var r=s(n,t,e);return f(Math.ceil(n/r)*r,Math.floor(t/r)*r+r/2,r)}function s(n,t,e){var r=Math.abs(t-n)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),u=r/i;return u>=ms?i*=10:u>=ys?i*=5:u>=bs&&(i*=2),n>t?-i:i}function l(n,t,e){if(null==e&&(e=o),r=n.length){if((t=+t)<=0||2>r)return+e(n[0],0,n);if(t>=1)return+e(n[r-1],r-1,n);var r,i=(r-1)*t,u=Math.floor(i),a=+e(n[u],u,n),f=+e(n[u+1],u+1,n);return a+(f-a)*(i-u)}}function h(n,t){var e,r,i=-1,u=n.length;if(null==t){for(;++i<u;)if(null!=(r=n[i])&&r>=r){e=r;break}for(;++i<u;)null!=(r=n[i])&&r>e&&(e=r)}else{for(;++i<u;)if(null!=(r=t(n[i],i,n))&&r>=r){e=r;break}for(;++i<u;)null!=(r=t(n[i],i,n))&&r>e&&(e=r)}return e}function d(n,t){var e,r=0,i=n.length,u=-1,a=i;if(null==t)for(;++u<i;)isNaN(e=o(n[u]))?--a:r+=e;else for(;++u<i;)isNaN(e=o(t(n[u],u,n)))?--a:r+=e;return a?r/a:void 0}function v(n,t){var e,r=[],u=n.length,a=-1;if(null==t)for(;++a<u;)isNaN(e=o(n[a]))||r.push(e);else for(;++a<u;)isNaN(e=o(t(n[a],a,n)))||r.push(e);return l(r.sort(i),.5)}function p(n){for(var t,e,r,i=n.length,u=-1,a=0;++u<i;)a+=n[u].length;for(e=new Array(a);--i>=0;)for(r=n[i],t=r.length;--t>=0;)e[--a]=r[t];return e}function g(n,t){var e,r,i=-1,u=n.length;if(null==t){for(;++i<u;)if(null!=(r=n[i])&&r>=r){e=r;break}for(;++i<u;)null!=(r=n[i])&&e>r&&(e=r)}else{for(;++i<u;)if(null!=(r=t(n[i],i,n))&&r>=r){e=r;break}for(;++i<u;)null!=(r=t(n[i],i,n))&&e>r&&(e=r)}return e}function m(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r}function y(n,t){var e,r=0,i=n.length,u=-1;if(null==t)for(;++u<i;)(e=+n[u])&&(r+=e);else for(;++u<i;)(e=+t(n[u],u,n))&&(r+=e);return r}function b(n,t,r,u){var a,o,f,c,s=e(n,u),h=s.length,d=t;for(f=0,c=Array(d);d>f;++f){for(a=0,o=0;h>o;++o)a+=s[~~(Math.random()*h)];c[o]=a/h}return[l(c.sort(i),r/2),l(c,1-r/2)]}function x(n,t){var e=null==t?0:n,r=null==t?n:t,i=r-e,u={};return u.sample=function(){return e+Math.floor(i*Math.random())},u.pdf=function(n){return n===Math.floor(n)&&n>=e&&r>n?1/i:0},u.cdf=function(n){var t=Math.floor(n);return e>t?0:t>=r?1:(t-e+1)/i},u.icdf=function(n){return n>=0&&1>=n?e-1+Math.floor(n*i):NaN},u}function M(n,t){var e=n||0,r=t||1,i=NaN,u={};return u.sample=function(){var n,t,u=0,a=0;if(i===i)return u=i,i=NaN,u;do u=2*Math.random()-1,a=2*Math.random()-1,n=u*u+a*a;while(0===n||n>1);return t=Math.sqrt(-2*Math.log(n)/n),i=e+a*t*r,e+u*t*r},u.pdf=function(n){var t=Math.exp(Math.pow(n-e,2)/(-2*Math.pow(r,2)));return 1/(r*Math.sqrt(2*Math.PI))*t},u.cdf=function(n){var t,i=(n-e)/r,u=Math.abs(i);if(u>37)t=0;else{var a,o=Math.exp(-u*u/2);7.07106781186547>u?(a=.0352624965998911*u+.700383064443688,a=a*u+6.37396220353165,a=a*u+33.912866078383,a=a*u+112.079291497871,a=a*u+221.213596169931,a=a*u+220.206867912376,t=o*a,a=.0883883476483184*u+1.75566716318264,a=a*u+16.064177579207,a=a*u+86.7807322029461,a=a*u+296.564248779674,a=a*u+637.333633378831,a=a*u+793.826512519948,a=a*u+440.413735824752,t/=a):(a=u+.65,a=u+4/a,a=u+3/a,a=u+2/a,a=u+1/a,t=o/a/2.506628274631)}return i>0?1-t:t},u.icdf=function(n){if(0>=n||n>=1)return NaN;var t=2*n-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),u=2/(Math.PI*i)+Math.log(1-Math.pow(t,2))/2,a=Math.log(1-t*t)/i,o=(t>0?1:-1)*Math.sqrt(Math.sqrt(u*u-a)-u);return e+r*Math.SQRT2*o},u}function _(n,t){var e=null==t?0:n,r=null==t?null==n?1:n:t,i=r-e,u={};return u.sample=function(){return e+i*Math.random()},u.pdf=function(n){return n>=e&&r>=n?1/i:0},u.cdf=function(n){return e>n?0:n>r?1:(n-e)/i},u.icdf=function(n){return n>=0&&1>=n?e+n*i:NaN},u}function w(n,t){var r=e(n,t);return[l(r.sort(i),.25),l(r,.5),l(r,.75)]}function k(n,t,e){return n.fields=t||[],n.fname=e,n}function N(n){return null==n?null:n.fname}function A(n){return null==n?null:n.fields}function E(n){return String(n).match(/\[(.*?)\]|[^.\[]+/g).map(D)}function D(n){return"["!==n[0]?n:"'"!==n[1]&&'"'!==n[1]?n.slice(1,-1):n.slice(2,-2).replace(/\\(["'])/g,"$1")}function C(n){return n===Object(n)}function S(n){return"string"==typeof n}function U(n){return xs(n)?"["+n.map(U)+"]":C(n)||S(n)?JSON.stringify(n).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):n}function T(n,t){var e=E(n).map(U),r=Function("_","return _["+e.join("][")+"];");return k(r,[n],t||n)}function R(n,t){var e=[n].concat([].slice.call(t));console.log.apply(console,e)}function F(n){var t=n||Ds;return{level:function(n){return arguments.length&&(t=+n),t},warn:function(){t>=Cs&&R("WARN",arguments)},info:function(){t>=Ss&&R("INFO",arguments)},debug:function(){t>=Us&&R("DEBUG",arguments)}}}function q(n){return null!=n?xs(n)?n:[n]:[]}function L(n,t){if(null==n)return null;n=q(n);var e,r,i,u,a,o,f,c=n.map(function(n){return E(n).map(U).join("][")}),s=q(t),l=c.length-1,h="var u,v;return ";for(e=0;l>=e;++e)r=c[e],i="(u=a["+r+"])",u="(v=b["+r+"])",a="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))",o="descending"!==s[e]?(f=1,-1):(f=-1,1),h+="("+i+"<"+u+"||u==null)&&v!=null?"+o+":(u>v||v==null)&&u!=null?"+f+":"+a+"!==u&&v===v?"+o+":v!==v&&u===u?"+f+(l>e?":":":0");return k(Function("a","b",h+";"),n)}function z(n){return"function"==typeof n}function O(n){return z(n)?n:function(){return n}}function P(n){throw Error(n)}function j(n){for(var t,e,r=1,i=arguments.length;i>r;++r){t=arguments[r];for(e in t)n[e]=t[e]}return n}function I(n,t){var e,r,i,u,a,o=-1,f=n.length;if(null==t){for(;++o<f;)if(null!=(r=n[o])&&r>=r){e=i=r;break}for(u=a=o;++o<f;)null!=(r=n[o])&&(e>r&&(e=r,u=o),r>i&&(i=r,a=o))}else{for(;++o<f;)if(null!=(r=t(n[o],o,n))&&r>=r){e=i=r;break}for(u=a=o;++o<f;)null!=(r=t(n[o],o,n))&&(e>r&&(e=r,u=o),r>i&&(i=r,a=o))}return[u,a]}function Y(n,t){var e=n.prototype=Object.create(t.prototype);return e.constructor=n,e}function H(n){return"number"==typeof n}function B(n,t,e,r){var i=t.length,u=e.length;if(!u)return t;if(!i)return e;for(var a=r||new t.constructor(i+u),o=0,f=0,c=0;i>o&&u>f;++c)a[c]=n(t[o],e[f])>0?e[f++]:t[o++];for(;i>o;++o,++c)a[c]=t[o];for(;u>f;++f,++c)a[c]=e[f];return a}function $(n){for(var t={},e=0,r=n.length;r>e;++e)t[n[e]]=1;return t}function W(n,t,e){var r,i=0,u=n.length;if(t)for(;u>i;++i)(r=t(n[i]))&&e(r,i,n);else n.forEach(e)}function Z(n){var t=n||ws,e=[],r={};return e.add=function(n){var i=t(n);return r[i]||(r[i]=1,e.push(n)),e},e.remove=function(n){var i,u=t(n);return r[u]&&(r[u]=0,(i=e.indexOf(n))>=0&&e.splice(i,1)),e},e}function X(){Ts=1}function J(n){return n._id}function G(n,t){for(var e in n)"_id"!==e&&(t[e]=n[e]);return t}function V(n){var t=n===Object(n)?n:{data:n};return t._id||(t._id=++Ts),t}function K(n){return V(G(n,{}))}function Q(n,t){return G(n,t)}function nn(n,t){return t._id=n._id,t}function tn(n){return n&&n.constructor===en}function en(){var n=[],t=[],e=[],r=[],i=[];return{constructor:en,insert:function(t){for(var e=q(t),r=0,i=e.length;i>r;++r)n.push(e[r]);return this},remove:function(n){for(var e=z(n)?r:t,i=q(n),u=0,a=i.length;a>u;++u)e.push(i[u]);return this},modify:function(n,t,r){var u={field:t,value:O(r)};return z(n)?(u.filter=n,i.push(u)):(u.tuple=n,e.push(u)),this},encode:function(n,t){return e.push({tuple:n,field:t}),this},pulse:function(u,a){function o(n,t,e){e?n[t]=e(n):u.encode=t,f[n._id]=n}var f,c,s,l,h,d,v;for(c=0,s=n.length;s>c;++c)u.add.push(V(n[c]));for(f={},c=0,s=t.length;s>c;++c)d=t[c],f[d._id]=d;for(c=0,s=r.length;s>c;++c)h=r[c],a.forEach(function(n){h(n)&&(f[n._id]=n)});for(v in f)u.rem.push(f[v]);for(f={},c=0,s=e.length;s>c;++c)l=e[c],o(l.tuple,l.field,l.value),u.modifies(l.field);for(c=0,s=i.length;s>c;++c)l=i[c],h=l.filter,a.forEach(function(n){h(n)&&o(n,l.field,l.value)}),u.modifies(l.field);for(v in f)u.mod.push(f[v]);return u}}}function rn(n,t){this.dataflow=n,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=null}function un(n,t){return n?function(e,r){return n(e,r)&&t(e,r)}:t}function an(n,t){var e={};return n.visit(t,function(n){e[n._id]=1}),function(n){return e[n._id]?null:n}}function on(n,t,e){var r,i,u,a,o,f=this,c=0;for(this.dataflow=n,this.stamp=t,this.fields=null,this.encode=null,this.pulses=e,u=0,a=e.length;a>u;++u)if(r=e[u],r.stamp===t){if(r.fields){i=f.fields||(f.fields={});for(o in r.fields)i[o]=1}r.changed(f.ADD)&&(c|=f.ADD),r.changed(f.REM)&&(c|=f.REM),r.changed(f.MOD)&&(c|=f.MOD)}this.changes=c}function fn(){Object.defineProperty(this,Ws,{writable:!0,value:{}})}function cn(n,t){return(null!=t&&t>=0?t+":":"")+n}function sn(n,t,e,r){this.id=++Xs,this.value=n,this.stamp=-1,this.rank=-1,this.flags=0,t&&(this._update=t),e&&this.parameters(e,r)}function ln(n){return function(t){var e=this.flags;return 0===arguments.length?!!(e&n):(this.flags=t?e|n:e&~n,this)}}function hn(n,t,e){this.id=++nl,this.value=null,e&&(this.receive=e),n&&(this._filter=n),t&&(this._apply=t)}function dn(n,t,e){return new hn(n,t,e)}function vn(n){this.cmp=n,this.nodes=[]}function pn(n,t,e,r){var i,u,a;for(i=n[e];e>t&&(a=e-1>>1,u=n[a],r(i,u)<0);)n[e]=u,e=a;return n[e]=i}function gn(n,t,e){for(var r,i=t,u=n.length,a=n[t],o=2*t+1;u>o;)r=o+1,u>r&&e(n[o],n[r])>=0&&(o=r),n[t]=n[o],t=o,o=2*t+1;return n[t]=a,pn(n,i,t,e)}function mn(){this._clock=0,this._pulses={},this._touched=Z(_s),this._postrun=[],this._running=!1,this._log=F()}function yn(n,t,e,r,i,u){var a,o,f=j({},u,ul);z(e)||(e=O(e)),void 0===r?a=function(t){n.touch(e(t))}:z(r)?(o=new sn(null,r,i,!1),a=function(t){var r=e(t),i=(o.evaluate(t),o.value);tn(i)?n.pulse(r,i,u):n.update(r,i,f)}):a=function(t){n.update(e(t),r,f)},t.apply(a)}function bn(n,t,e,r,i,u){var a,o;void 0===r?o=e:(a=z(r)?r:O(r),o=new sn(null,function(n,t){return e.skip()?void 0:e.skip(!0).value=a(n,t)},i,!1),o.modified(u&&u.force),o.skip(!0),o.value=e.value,o.rank=0,o.targets().add(e)),t.targets().add(o)}function xn(n,t,e,r){var i,u,a=e.source;return a&&xs(a)?new on(n,t,a.map(function(n){return n.pulse})):(u=r[e.id],i=a&&(a=a.pulse)&&a.stamp===t&&u.target!==e?a:u,a&&(i.source=a.source),i)}function Mn(n){return function(){return this._log[n].apply(this._log,arguments)}}function _n(n,t){sn.call(this,n,null,t)}function wn(n){_n.call(this,null,n)}function kn(n){sn.call(this,null,Nn,n)}function Nn(n){if(this.value&&!n.modified())return this.value;var e=n.field,r=t(n),i=r.start,u=r.step,a=function(n){var t=e(n);return null==t?null:i+u*Math.floor((+t-i)/u)};return k(a,A(e.fields),n.name||"bin_"+N(e))}function An(n){_n.call(this,[],n)}function En(n){sn.call(this,null,Dn,n)}function Dn(n){return this.value&&!n.modified()?this.value:L(n.fields,n.orders)}function Cn(){}function Sn(n,t){var e=new Cn;if(n instanceof Cn)n.each(function(n,t){e.set(t,n)});else if(Array.isArray(n)){var r,i=-1,u=n.length;if(null==t)for(;++i<u;)e.set(i,n[i]);else for(;++i<u;)e.set(t(r=n[i],i,n),r)}else if(n)for(var a in n)e.set(a,n[a]);return e}function Un(){function n(t,i,a,o){if(i>=u.length)return null!=r?r(t):null!=e?t.sort(e):t;for(var f,c,s,l=-1,h=t.length,d=u[i++],v=Sn(),p=a();++l<h;)(s=v.get(f=d(c=t[l])+""))?s.push(c):v.set(f,[c]);return v.each(function(t,e){o(p,e,n(t,i,a,o))}),p}function t(n,e){if(++e>u.length)return n;var i,o=a[e-1];return null!=r&&e>=u.length?i=n.entries():(i=[],n.each(function(n,r){i.push({key:r,values:t(n,e)})})),null!=o?i.sort(function(n,t){return o(n.key,t.key)}):i}var e,r,i,u=[],a=[];return i={object:function(t){return n(t,0,Tn,Rn)},map:function(t){return n(t,0,Fn,qn)},entries:function(e){return t(n(e,0,Fn,qn),0)},key:function(n){return u.push(n),i},sortKeys:function(n){return a[u.length-1]=n,i},sortValues:function(n){return e=n,i},rollup:function(n){return r=n,i}}}function Tn(){return{}}function Rn(n,t,e){n[t]=e}function Fn(){return Sn()}function qn(n,t,e){n.set(t,e)}function Ln(n){var t=[];for(var e in n)t.push(n[e]);return t}function zn(n){_n.call(this,Sn(),n)}function On(n){_n.call(this,null,n)}function Pn(n,t,e){switch(t){case"upper":n=n.toUpperCase();break;case"lower":n=n.toLowerCase()}return n.match(e)}function jn(n){_n.call(this,[+(1/0),-(1/0)],n)}function In(n,t){sn.call(this,n),this.parent=t}function Yn(n){_n.call(this,Sn(),n),this._keys={};var t=this._targets=[];t.active=0,t.forEach=function(n){for(var e=0,r=t.active;r>e;++e)n(t[e],e,t)}}function Hn(n){sn.call(this,null,Bn,n)}function Bn(n){return this.value&&!n.modified()?this.value:xs(n.name)?q(n.name).map(function(n){return T(n)}):T(n.name,n.as)}function $n(n){_n.call(this,{},n)}function Wn(n){_n.call(this,{},n)}function Zn(n){return n.fields.join("|")}function Xn(n){_n.call(this,[],n)}function Jn(n){_n.call(this,[],n)}function Gn(n){var t,e=n.method||bl.value;return null!=bl[e]?e===bl.value?(t=void 0!==n.value?n.value:0,function(){return t}):bl[e]:void P("Unrecognized imputation method: "+e)}function Vn(n){var t=n.field;return function(n){return n?t(n):NaN}}function Kn(n,t,e){var r,i,u,a,o,f,c,s,l,h=function(n){return n(l)},d=[],v=[],p={},g={};for(f=0,s=n.length;s>f;++f)l=n[f],i=(r=e.map(h))+"",c=p[i]||(p[i]=v.push(r)),a=(u=t?t.map(h):xl)+"",(o=g[a])||(o=g[a]=[],d.push(o),o.values=u),o[c-1]=l;return d.domain=v,d}function Qn(n){_n.call(this,{},n)}function nt(n){sn.call(this,null,tt,n)}function tt(n){if(this.value&&!n.modified())return this.value;var t,e,r,i=+(1/0),u=-(1/0),a=n.extents;for(t=0,e=a.length;e>t;++t)r=a[t],r[0]<i&&(i=r[0]),r[1]>u&&(u=r[1]);return[i,u]}function et(n){_n.call(this,{},n)}function rt(n){_n.call(this,null,n)}function it(n){_n.call(this,[],n)}function ut(n){_n.call(this,null,n)}function at(n){_n.call(this,null,n)}function ot(n){_n.call(this,{},n)}function ft(n){_n.call(this,[],n),this.count=0}function ct(n){_n.call(this,null,n),this.modified(!0)}function st(n){_n.call(this,Sn(),n)}function lt(n){_n.call(this,null,n)}function ht(n){this._key=n||"_id",this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null}function dt(n,t){return Tl[n](t)}function vt(n){return function(t){var e=j({init:"",add:"",rem:"",idx:0},n);return e.out=t||n.name,e}}function pt(n,t){return n.idx-t.idx}function gt(n,t){function e(n,r){function i(t){n[t]||e(n,n[t]=Tl[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),n}var r=n.reduce(e,n.reduce(function(n,t){return n[t.name]=t,n},{}));return Ln(r).sort(pt)}function mt(n,t){var e=t||ws,r=gt(n,!0),i="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",u="if(v==null){this.missing++; return;} if(v!==v) return; ++this.valid;",a="if(v==null){this.missing--; return;} if(v!==v) return; --this.valid;",o="var t = this.tuple; var cell = this.cell;";return r.forEach(function(n){n.idx<0?(i=n.init+i,u=n.add+u,a=n.rem+a):(i+=n.init,u+=n.add,a+=n.rem)}),n.slice().sort(pt).forEach(function(n){o+="t['"+n.out+"']="+n.set+";"}),o+="return t;",i=Function("cell","t",i),i.prototype.add=Function("v",u),i.prototype.rem=Function("v",a),i.prototype.set=Function(o),i.prototype.get=e,i.fields=n.map(function(n){return n.out}),i}function yt(n){_n.call(this,null,n),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._dims=[],this._dnames=[],this._measures=[],this._count=!1,this._prev=null,this._inputs=null,this._outputs=null}function bt(n,t,e){return e||n+(t?"_"+t:"")}function xt(n){var t,e=this._dims,r=e.length,i=String(e[0](n));for(t=1;r>t;++t)i+="|"+e[t](n);return i}function Mt(n){return new Uint8Array(n)}function _t(n){return new Uint16Array(n)}function wt(n){return new Uint32Array(n)}function kt(){function n(n,t,e){if(!t.length)return[];var r,o,f,c=a,s=t.length,l=Array(s),h=wt(s);for(f=0;s>f;++f)l[f]=n(t[f]),h[f]=f;if(l=Nt(l,h),c)r=u,o=i,u=Array(c+s),i=wt(c+s),At(e,r,o,c,l,h,s,u,i);else{if(e>0)for(f=0;s>f;++f)h[f]+=e;u=l,i=h}return a=c+s,{index:h,value:l}}function t(n,t){var e,r,o,f=a;for(r=0;!t[i[r]]&&f>r;++r);for(o=r;f>r;++r)t[e=i[r]]||(i[o]=e,u[o]=u[r],++o);a=f-n}function e(n){for(var t=0,e=a;e>t;++t)i[t]=n[i[t]]}function r(n,t){var e=t?t.length:(t=u,a);return[gs(t,n[0],0,e),ps(t,n[1],0,e)]}var i=wt(0),u=[],a=0;return{insert:n,remove:t,bisect:r,reindex:e,index:function(){return i},size:function(){return a}}}function Nt(n,t){return n.sort.call(t,function(t,e){var r=n[t],i=n[e];return i>r?-1:r>i?1:0}),m(n,t)}function At(n,t,e,r,i,u,a,o,f){var c,s=0,l=0;for(c=0;r>s&&a>l;++c)t[s]<i[l]?(o[c]=t[s],f[c]=e[s++]):(o[c]=i[l],f[c]=u[l++]+n);for(;r>s;++s,++c)o[c]=t[s],f[c]=e[s];for(;a>l;++l,++c)o[c]=i[l],f[c]=u[l]+n}function Et(){var n=8,t=[],e=wt(0),r=Ct(0,n),i=Ct(0,n);return{data:function(){return t},seen:function(){return e=Dt(e,t.length)},add:function(n){for(var e,r=0,i=t.length,u=n.length;u>r;++r)e=n[r],e._index=i++,t.push(e)},remove:function(n,e){var u,a,o,f=t.length,c=Array(f-n),s=t;for(a=0;!e[a]&&f>a;++a)c[a]=t[a],s[a]=a;for(o=a;f>a;++a)u=t[a],e[a]?s[a]=-1:(s[a]=o,r[o]=r[a],i[o]=i[a],c[o]=u,u._index=o++),r[a]=0;return t=c,s},size:function(){return t.length},curr:function(){return r},prev:function(){return i},reset:function(n){i[n]=r[n]},all:function(){return 257>n?255:65537>n?65535:4294967295},set:function(n,t){r[n]|=t},clear:function(n,t){r[n]&=~t},resize:function(t,e){var u=r.length;(t>u||e>n)&&(n=Math.max(e,n),r=Ct(t,n,r),i=Ct(t,n))}}}function Dt(n,t,e){return n.length>=t?n:(e=e||new n.constructor(t),e.set(n),e)}function Ct(n,t,e){var r=(257>t?Mt:65537>t?_t:wt)(n);return e&&r.set(e),r}function St(n){_n.call(this,Et(),n),this.data=[],this.index=null}function Ut(n,t,e){var r=kt();return r.one=1<<n,r.zero=~r.one,r.field=t,r.range=e.slice(),r.add=function(n,t,e){var r,i=this,u=i.one,a=i.insert(i.field,n,e),o=i.bisect(i.range,a.value),f=a.index,c=o[0],s=o[1],l=f.length;for(r=0;c>r;++r)t[f[r]]|=u;for(r=s;l>r;++r)t[f[r]]|=u},r}function Tt(n){_n.call(this,null,n)}function Rt(n,t){if((e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var e,r=n.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+n.slice(e+1)]}function Ft(n){return n=Rt(Math.abs(n)),n?n[1]:NaN}function qt(n,t){return function(e,r){for(var i=e.length,u=[],a=0,o=n[0],f=0;i>0&&o>0&&(f+o+1>r&&(o=Math.max(1,r-f)),u.push(e.substring(i-=o,i+o)),!((f+=o+1)>r));)o=n[a=(a+1)%n.length];return u.reverse().join(t)}}function Lt(n,t){n=n.toPrecision(t);n:for(var e,r=n.length,i=1,u=-1;r>i;++i)switch(n[i]){case".":u=e=i;break;case"0":0===u&&(u=i),e=i;break;case"e":break n;default:u>0&&(u=0)}return u>0?n.slice(0,u)+n.slice(e+1):n}function zt(n,t){var e=Rt(n,t);if(!e)return n+"";var r=e[0],i=e[1],u=i-(Ll=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return u===a?r:u>a?r+new Array(u-a+1).join("0"):u>0?r.slice(0,u)+"."+r.slice(u):"0."+new Array(1-u).join("0")+Rt(n,Math.max(0,t+u-1))[0]}function Ot(n,t){var e=Rt(n,t);if(!e)return n+"";var r=e[0],i=e[1];return 0>i?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}function Pt(n){return new jt(n)}function jt(n){if(!(t=Ol.exec(n)))throw new Error("invalid format: "+n);var t,e=t[1]||" ",r=t[2]||">",i=t[3]||"-",u=t[4]||"",a=!!t[5],o=t[6]&&+t[6],f=!!t[7],c=t[8]&&+t[8].slice(1),s=t[9]||"";"n"===s?(f=!0,s="g"):zl[s]||(s=""),(a||"0"===e&&"="===r)&&(a=!0,e="0",r="="),this.fill=e,this.align=r,this.sign=i,this.symbol=u,this.zero=a,this.width=o,this.comma=f,this.precision=c,this.type=s}function It(n){return n}function Yt(n){function t(n){function t(n){var t,i,f,y=v,b=p;if("c"===d)b=g(n)+b,n="";else{n=+n;var x=(0>n||0>1/n)&&(n*=-1,!0);if(n=g(n,h),x)for(t=-1,i=n.length,x=!1;++t<i;)if(f=n.charCodeAt(t),f>48&&58>f||"x"===d&&f>96&&103>f||"X"===d&&f>64&&71>f){x=!0;break}if(y=(x?"("===o?o:"-":"-"===o||"("===o?"":o)+y,b=b+("s"===d?Yl[8+Ll/3]:"")+(x&&"("===o?")":""),m)for(t=-1,i=n.length;++t<i;)if(f=n.charCodeAt(t),48>f||f>57){b=(46===f?u+n.slice(t+1):n.slice(t))+b,n=n.slice(0,t);break}}l&&!c&&(n=r(n,1/0));var M=y.length+n.length+b.length,_=s>M?new Array(s-M+1).join(e):"";switch(l&&c&&(n=r(_+n,_.length?s-b.length:1/0),_=""),a){case"<":return y+n+b+_;case"=":return y+_+n+b;case"^":return _.slice(0,M=_.length>>1)+y+n+b+_.slice(M)}return _+y+n+b}n=Pt(n);var e=n.fill,a=n.align,o=n.sign,f=n.symbol,c=n.zero,s=n.width,l=n.comma,h=n.precision,d=n.type,v="$"===f?i[0]:"#"===f&&/[boxX]/.test(d)?"0"+d.toLowerCase():"",p="$"===f?i[1]:/[%p]/.test(d)?"%":"",g=zl[d],m=!d||/[defgprs%]/.test(d);return h=null==h?d?6:12:/[gprs]/.test(d)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),t.toString=function(){return n+""},t}function e(n,e){var r=t((n=Pt(n),n.type="f",n)),i=3*Math.max(-8,Math.min(8,Math.floor(Ft(e)/3))),u=Math.pow(10,-i),a=Yl[8+i/3];return function(n){return r(u*n)+a}}var r=n.grouping&&n.thousands?qt(n.grouping,n.thousands):It,i=n.currency,u=n.decimal;return{format:t,formatPrefix:e}}function Ht(n){return Pl=Yt(n),jl=Pl.format,Il=Pl.formatPrefix,Pl}function Bt(n){return Math.max(0,-Ft(Math.abs(n)))}function $t(n,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ft(t)/3)))-Ft(Math.abs(n)))}function Wt(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,Ft(t)-Ft(n))+1}function Zt(n,t){return n.ticks?n.ticks(t):n.domain()}function Xt(n,t,e){var r=n.tickFormat?n.tickFormat(t,e):String;return"log"===n.type?Jt(r,Gt(e)):r}function Jt(n,t){return function(e){return n(e)?t(e):""}}function Gt(n){var t=Pt(n||",");if(null==t.precision){switch(t.precision=12,t.type){case"%":t.precision-=2;break;case"e":t.precision-=1}return Vt(jl(t),jl(".1f")(1)[1])}return jl(t)}function Vt(n,t){return function(e){var r,i,u=n(e),a=u.indexOf(t);if(0>a)return u;for(r=Kt(u,a),i=r<u.length?u.slice(r):"";--r>a;)if("0"!==u[r]){++r;break}return u.slice(0,r)+i}}function Kt(n,t){var e,r=n.lastIndexOf("e");if(r>0)return r;for(r=n.length;--r>t;)if(e=n.charCodeAt(r),e>=48&&57>=e)return r+1}function Qt(n){_n.call(this,[],n)}function ne(n){_n.call(this,Sn(),n)}function te(){return V({})}function ee(n){_n.call(this,null,n)}function re(n){function t(t){var u=t+"",a=e.get(u);if(!a){if(i!==Jl)return i;e.set(u,a=r.push(t))}return n[(a-1)%n.length]}var e=Sn(),r=[],i=Jl;return n=null==n?[]:Xl.call(n),t.domain=function(n){if(!arguments.length)return r.slice();r=[],e=Sn();for(var i,u,a=-1,o=n.length;++a<o;)e.has(u=(i=n[a])+"")||e.set(u,r.push(i));return t},t.range=function(e){return arguments.length?(n=Xl.call(e),t):n.slice()},t.unknown=function(n){return arguments.length?(i=n,t):i},t.copy=function(){return re().domain(r).range(n).unknown(i)},t}function ie(){function n(){var n=i().length,r=a[1]<a[0],h=a[r-0],d=a[1-r];t=(d-h)/Math.max(1,n-c+2*s),o&&(t=Math.floor(t)),h+=(d-h-t*(n-c))*l,e=t*(1-c),o&&(h=Math.round(h),e=Math.round(e));var v=f(n).map(function(n){return h+t*n});return u(r?v.reverse():v)}var t,e,r=re().unknown(void 0),i=r.domain,u=r.range,a=[0,1],o=!1,c=0,s=0,l=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(i(t),n()):i()},r.range=function(t){return arguments.length?(a=[+t[0],+t[1]],n()):a.slice()},r.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,n()},r.bandwidth=function(){return e},r.step=function(){return t},r.round=function(t){return arguments.length?(o=!!t,n()):o},r.padding=function(t){return arguments.length?(c=s=Math.max(0,Math.min(1,t)),n()):c},r.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),n()):c},r.paddingOuter=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),n()):s},r.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),n()):l},r.invertExtent=function(n,t){var r,o,f,c=+n,s=arguments.length>1?+t:c,l=a[1]<a[0],h=l?u().reverse():u(),d=h.length-1;return c>s&&(f=c,c=s,s=f),s<h[0]||c>a[1-l]?void 0:(r=Math.max(0,ps(h,c)-1),o=c===s?r:ps(h,s)-1,c-h[r]>e+1e-10&&++r,l&&(f=r,r=d-o,o=d-f),r>o?void 0:i().slice(r,o+1))},r.copy=function(){return ie().domain(i()).range(a).round(o).paddingInner(c).paddingOuter(s).align(l)},n()}function ue(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return ue(t())},n}function ae(){return ue(ie().paddingInner(1))}function oe(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function fe(n,t){var e=Object.create(n.prototype);for(var r in t)e[r]=t[r];return e}function ce(){}function se(n){var t;return n=(n+"").trim().toLowerCase(),(t=Kl.exec(n))?(t=parseInt(t[1],16),new pe(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1)):(t=Ql.exec(n))?le(parseInt(t[1],16)):(t=nh.exec(n))?new pe(t[1],t[2],t[3],1):(t=th.exec(n))?new pe(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=eh.exec(n))?he(t[1],t[2],t[3],t[4]):(t=rh.exec(n))?he(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ih.exec(n))?ge(t[1],t[2]/100,t[3]/100,1):(t=uh.exec(n))?ge(t[1],t[2]/100,t[3]/100,t[4]):ah.hasOwnProperty(n)?le(ah[n]):"transparent"===n?new pe(NaN,NaN,NaN,0):null}function le(n){return new pe(n>>16&255,n>>8&255,255&n,1)}function he(n,t,e,r){return 0>=r&&(n=t=e=NaN),new pe(n,t,e,r)}function de(n){return n instanceof ce||(n=se(n)),n?(n=n.rgb(),new pe(n.r,n.g,n.b,n.opacity)):new pe}function ve(n,t,e,r){return 1===arguments.length?de(n):new pe(n,t,e,null==r?1:r)}function pe(n,t,e,r){this.r=+n,this.g=+t,this.b=+e,this.opacity=+r}function ge(n,t,e,r){return 0>=r?n=t=e=NaN:0>=e||e>=1?n=t=NaN:0>=t&&(n=NaN),new be(n,t,e,r)}function me(n){if(n instanceof be)return new be(n.h,n.s,n.l,n.opacity);if(n instanceof ce||(n=se(n)),!n)return new be;if(n instanceof be)return n;n=n.rgb();var t=n.r/255,e=n.g/255,r=n.b/255,i=Math.min(t,e,r),u=Math.max(t,e,r),a=NaN,o=u-i,f=(u+i)/2;return o?(a=t===u?(e-r)/o+6*(r>e):e===u?(r-t)/o+2:(t-e)/o+4,o/=.5>f?u+i:2-u-i,a*=60):o=f>0&&1>f?0:a,new be(a,o,f,n.opacity)}function ye(n,t,e,r){return 1===arguments.length?me(n):new be(n,t,e,null==r?1:r)}function be(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}function xe(n,t,e){return 255*(60>n?t+(e-t)*n/60:180>n?e:240>n?t+(e-t)*(240-n)/60:t)}function Me(n){if(n instanceof we)return new we(n.l,n.a,n.b,n.opacity);if(n instanceof Se){var t=n.h*oh;return new we(n.l,Math.cos(t)*n.c,Math.sin(t)*n.c,n.opacity)}n instanceof pe||(n=de(n));var e=Ee(n.r),r=Ee(n.g),i=Ee(n.b),u=ke((.4124564*e+.3575761*r+.1804375*i)/sh),a=ke((.2126729*e+.7151522*r+.072175*i)/lh),o=ke((.0193339*e+.119192*r+.9503041*i)/hh);return new we(116*a-16,500*(u-a),200*(a-o),n.opacity)}function _e(n,t,e,r){return 1===arguments.length?Me(n):new we(n,t,e,null==r?1:r)}function we(n,t,e,r){this.l=+n,this.a=+t,this.b=+e,this.opacity=+r}function ke(n){return n>gh?Math.pow(n,1/3):n/ph+dh}function Ne(n){return n>vh?n*n*n:ph*(n-dh)}function Ae(n){return 255*(.0031308>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Ee(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function De(n){if(n instanceof Se)return new Se(n.h,n.c,n.l,n.opacity);n instanceof we||(n=Me(n));var t=Math.atan2(n.b,n.a)*fh;return new Se(0>t?t+360:t,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function Ce(n,t,e,r){return 1===arguments.length?De(n):new Se(n,t,e,null==r?1:r)}function Se(n,t,e,r){this.h=+n,this.c=+t,this.l=+e,this.opacity=+r}function Ue(n){if(n instanceof Re)return new Re(n.h,n.s,n.l,n.opacity);n instanceof pe||(n=de(n));var t=n.r/255,e=n.g/255,r=n.b/255,i=(kh*r+_h*t-wh*e)/(kh+_h-wh),u=r-i,a=(Mh*(e-i)-bh*u)/xh,o=Math.sqrt(a*a+u*u)/(Mh*i*(1-i)),f=o?Math.atan2(a,u)*fh-120:NaN;return new Re(0>f?f+360:f,o,i,n.opacity)}function Te(n,t,e,r){return 1===arguments.length?Ue(n):new Re(n,t,e,null==r?1:r)}function Re(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}function Fe(n,t,e,r,i){var u=n*n,a=u*n;return((1-3*n+3*u-a)*t+(4-6*u+3*a)*e+(1+3*n+3*u-3*a)*r+a*i)/6}function qe(n){var t=n.length-1;return function(e){var r=0>=e?e=0:e>=1?(e=1,t-1):Math.floor(e*t),i=n[r],u=n[r+1],a=r>0?n[r-1]:2*i-u,o=t-1>r?n[r+2]:2*u-i;return Fe((e-r/t)*t,a,i,u,o)}}function Le(n){return function(){return n}}function ze(n,t){return function(e){return n+e*t}}function Oe(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(r){return Math.pow(n+r*t,e)}}function Pe(n,t){var e=t-n;return e?ze(n,e>180||-180>e?e-360*Math.round(e/360):e):Le(isNaN(n)?t:n)}function je(n){return 1===(n=+n)?Ie:function(t,e){return e-t?Oe(t,e,n):Le(isNaN(t)?e:t)}}function Ie(n,t){var e=t-n;return e?ze(n,e):Le(isNaN(n)?t:n)}function Ye(n){return function(t){var e,r,i=t.length,u=new Array(i),a=new Array(i),o=new Array(i);for(e=0;i>e;++e)r=ve(t[e]),u[e]=r.r||0,a[e]=r.g||0,o[e]=r.b||0;return u=n(u),a=n(a),o=n(o),r.opacity=1,function(n){return r.r=u(n),r.g=a(n),r.b=o(n),r+""}}}function He(n,t){var e,r=t?t.length:0,i=n?Math.min(r,n.length):0,u=new Array(r),a=new Array(r);for(e=0;i>e;++e)u[e]=Ge(n[e],t[e]);for(;r>e;++e)a[e]=t[e];return function(n){for(e=0;i>e;++e)a[e]=u[e](n);return a}}function Be(n,t){var e=new Date;return n=+n,t-=n,function(r){return e.setTime(n+t*r),e}}function $e(n,t){return n=+n,t-=n,function(e){return n+t*e}}function We(n,t){var e,r={},i={};null!==n&&"object"==typeof n||(n={}),null!==t&&"object"==typeof t||(t={});for(e in t)e in n?r[e]=Ge(n[e],t[e]):i[e]=t[e];return function(n){for(e in r)i[e]=r[e](n);return i}}function Ze(n){return function(){return n}}function Xe(n){return function(t){return n(t)+""}}function Je(n,t){var e,r,i,u=Eh.lastIndex=Dh.lastIndex=0,a=-1,o=[],f=[];for(n+="",t+="";(e=Eh.exec(n))&&(r=Dh.exec(t));)(i=r.index)>u&&(i=t.slice(u,i),o[a]?o[a]+=i:o[++a]=i),(e=e[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,f.push({i:a,x:$e(e,r)})),u=Dh.lastIndex;return u<t.length&&(i=t.slice(u),o[a]?o[a]+=i:o[++a]=i),o.length<2?f[0]?Xe(f[0].x):Ze(t):(t=f.length,function(n){for(var e,r=0;t>r;++r)o[(e=f[r]).i]=e.x(n);return o.join("")})}function Ge(n,t){var e,r=typeof t;return null==t||"boolean"===r?Le(t):("number"===r?$e:"string"===r?(e=se(t))?(t=e,Nh):Je:t instanceof se?Nh:t instanceof Date?Be:Array.isArray(t)?He:isNaN(t)?We:$e)(n,t)}function Ve(n,t){return n=+n,t-=n,function(e){return Math.round(n+t*e)}}function Ke(n){return function t(e){function r(t,r){var i=n((t=Te(t)).h,(r=Te(r)).h),u=Ie(t.s,r.s),a=Ie(t.l,r.l),o=Ie(t.opacity,r.opacity);return function(n){return t.h=i(n),t.s=u(n),t.l=a(Math.pow(n,e)),t.opacity=o(n),t+""}}return e=+e,r.gamma=t,r}(1)}function Qe(n){return function(){return n}}function nr(n){return+n}function tr(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:Qe(t)}function er(n){return function(t,e){var r=n(t=+t,e=+e);return function(n){return t>=n?0:n>=e?1:r(n)}}}function rr(n){return function(t,e){var r=n(t=+t,e=+e);return function(n){return 0>=n?t:n>=1?e:r(n)}}}function ir(n,t,e,r){var i=n[0],u=n[1],a=t[0],o=t[1];return i>u?(i=e(u,i),a=r(o,a)):(i=e(i,u),a=r(a,o)),function(n){return a(i(n))}}function ur(n,t,e,r){var i=Math.min(n.length,t.length)-1,u=new Array(i),a=new Array(i),o=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<i;)u[o]=e(n[o],n[o+1]),a[o]=r(t[o],t[o+1]);return function(t){var e=ps(n,t,1,i)-1;return a[e](u[e](t))}}function ar(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp())}function or(n,t){function e(){return i=Math.min(o.length,f.length)>2?ur:ir,u=a=null,r}function r(t){
return(u||(u=i(o,f,s?er(n):n,c)))(+t)}var i,u,a,o=Sh,f=Sh,c=Ge,s=!1;return r.invert=function(n){return(a||(a=i(f,o,tr,s?rr(t):t)))(+n)},r.domain=function(n){return arguments.length?(o=Zl.call(n,nr),e()):o.slice()},r.range=function(n){return arguments.length?(f=Xl.call(n),e()):f.slice()},r.rangeRound=function(n){return f=Xl.call(n),c=Ve,e()},r.clamp=function(n){return arguments.length?(s=!!n,e()):s},r.interpolate=function(n){return arguments.length?(c=n,e()):c},e()}function fr(n,t,e){var r,i=n[0],u=n[n.length-1],a=s(i,u,null==t?10:t);switch(e=Pt(null==e?",f":e),e.type){case"s":var o=Math.max(Math.abs(i),Math.abs(u));return null!=e.precision||isNaN(r=$t(a,o))||(e.precision=r),Il(e,o);case"":case"e":case"g":case"p":case"r":null!=e.precision||isNaN(r=Wt(a,Math.max(Math.abs(i),Math.abs(u))))||(e.precision=r-("e"===e.type));break;case"f":case"%":null!=e.precision||isNaN(r=Bt(a))||(e.precision=r-2*("%"===e.type))}return jl(e)}function cr(n){var t=n.domain;return n.ticks=function(n){var e=t();return c(e[0],e[e.length-1],null==n?10:n)},n.tickFormat=function(n,e){return fr(t(),n,e)},n.nice=function(e){var r=t(),i=r.length-1,u=null==e?10:e,a=r[0],o=r[i],f=s(a,o,u);return f&&(f=s(Math.floor(a/f)*f,Math.ceil(o/f)*f,u),r[0]=Math.floor(a/f)*f,r[i]=Math.ceil(o/f)*f,t(r)),n},n}function sr(){var n=or(tr,$e);return n.copy=function(){return ar(n,sr())},cr(n)}function lr(){function n(n){return+n}var t=[0,1];return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Zl.call(e,nr),n):t.slice()},n.copy=function(){return lr().domain(t)},cr(n)}function hr(n,t){n=n.slice();var e,r=0,i=n.length-1,u=n[r],a=n[i];return u>a&&(e=r,r=i,i=e,e=u,u=a,a=e),n[r]=t.floor(u),n[i]=t.ceil(a),n}function dr(n,t){return(t=Math.log(t/n))?function(e){return Math.log(e/n)/t}:Qe(t)}function vr(n,t){return 0>n?function(e){return-Math.pow(-t,e)*Math.pow(-n,1-e)}:function(e){return Math.pow(t,e)*Math.pow(n,1-e)}}function pr(n){return isFinite(n)?+("1e"+n):0>n?0:n}function gr(n){return 10===n?pr:n===Math.E?Math.exp:function(t){return Math.pow(n,t)}}function mr(n){return n===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n})}function yr(n){return function(t){return-n(-t)}}function br(){function n(){return i=mr(r),u=gr(r),e()[0]<0&&(i=yr(i),u=yr(u)),t}var t=or(dr,vr).domain([1,10]),e=t.domain,r=10,i=mr(10),u=gr(10);return t.base=function(t){return arguments.length?(r=+t,n()):r},t.domain=function(t){return arguments.length?(e(t),n()):e()},t.ticks=function(n){var t,a=e(),o=a[0],f=a[a.length-1];(t=o>f)&&(d=o,o=f,f=d);var s,l,h,d=i(o),v=i(f),p=null==n?10:+n,g=[];if(!(r%1)&&p>v-d){if(d=Math.round(d)-1,v=Math.round(v)+1,o>0){for(;v>d;++d)for(l=1,s=u(d);r>l;++l)if(h=s*l,!(o>h)){if(h>f)break;g.push(h)}}else for(;v>d;++d)for(l=r-1,s=u(d);l>=1;--l)if(h=s*l,!(o>h)){if(h>f)break;g.push(h)}t&&g.reverse()}else g=c(d,v,Math.min(v-d,p)).map(u);return g},t.tickFormat=function(n,e){if(null==e&&(e=10===r?".0e":","),"function"!=typeof e&&(e=jl(e)),n===1/0)return e;null==n&&(n=10);var a=Math.max(1,r*n/t.ticks().length);return function(n){var t=n/u(Math.round(i(n)));return r-.5>t*r&&(t*=r),a>=t?e(n):""}},t.nice=function(){return e(hr(e(),{floor:function(n){return u(Math.floor(i(n)))},ceil:function(n){return u(Math.ceil(i(n)))}}))},t.copy=function(){return ar(t,br().base(r))},t}function xr(n,t){return 0>n?-Math.pow(-n,t):Math.pow(n,t)}function Mr(){function n(n,t){return(t=xr(t,e)-(n=xr(n,e)))?function(r){return(xr(r,e)-n)/t}:Qe(t)}function t(n,t){return t=xr(t,e)-(n=xr(n,e)),function(r){return xr(n+t*r,1/e)}}var e=1,r=or(n,t),i=r.domain;return r.exponent=function(n){return arguments.length?(e=+n,i(i())):e},r.copy=function(){return ar(r,Mr().exponent(e))},cr(r)}function _r(){return Mr().exponent(.5)}function wr(){function n(){var n=0,i=Math.max(1,r.length);for(u=new Array(i-1);++n<i;)u[n-1]=l(e,n/i);return t}function t(n){return isNaN(n=+n)?void 0:r[ps(u,n)]}var e=[],r=[],u=[];return t.invertExtent=function(n){var t=r.indexOf(n);return 0>t?[NaN,NaN]:[t>0?u[t-1]:e[0],t<u.length?u[t]:e[e.length-1]]},t.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var r,u=0,a=t.length;a>u;++u)r=t[u],null==r||isNaN(r=+r)||e.push(r);return e.sort(i),n()},t.range=function(t){return arguments.length?(r=Xl.call(t),n()):r.slice()},t.quantiles=function(){return u.slice()},t.copy=function(){return wr().domain(e).range(r)},t}function kr(){function n(n){return n>=n?a[ps(u,n,0,i)]:void 0}function t(){var t=-1;for(u=new Array(i);++t<i;)u[t]=((t+1)*r-(t-i)*e)/(i+1);return n}var e=0,r=1,i=1,u=[.5],a=[0,1];return n.domain=function(n){return arguments.length?(e=+n[0],r=+n[1],t()):[e,r]},n.range=function(n){return arguments.length?(i=(a=Xl.call(n)).length-1,t()):a.slice()},n.invertExtent=function(n){var t=a.indexOf(n);return 0>t?[NaN,NaN]:1>t?[e,u[0]]:t>=i?[u[i-1],r]:[u[t-1],u[t]]},n.copy=function(){return kr().domain([e,r]).range(a)},cr(n)}function Nr(){function n(n){return n>=n?e[ps(t,n,0,r)]:void 0}var t=[.5],e=[0,1],r=1;return n.domain=function(i){return arguments.length?(t=Xl.call(i),r=Math.min(t.length,e.length-1),n):t.slice()},n.range=function(i){return arguments.length?(e=Xl.call(i),r=Math.min(t.length,e.length-1),n):e.slice()},n.invertExtent=function(n){var r=e.indexOf(n);return[t[r-1],t[r]]},n.copy=function(){return Nr().domain(t).range(e)},n}function Ar(n,t,e,r){function i(t){return n(t=new Date(+t)),t}return i.floor=i,i.ceil=function(e){return n(e=new Date(e-1)),t(e,1),n(e),e},i.round=function(n){var t=i(n),e=i.ceil(n);return e-n>n-t?t:e},i.offset=function(n,e){return t(n=new Date(+n),null==e?1:Math.floor(e)),n},i.range=function(e,r,u){var a=[];if(e=i.ceil(e),u=null==u?1:Math.floor(u),!(r>e&&u>0))return a;do a.push(new Date(+e));while(t(e,u),n(e),r>e);return a},i.filter=function(e){return Ar(function(t){for(;n(t),!e(t);)t.setTime(t-1)},function(n,r){for(;--r>=0;)for(;t(n,1),!e(n););})},e&&(i.count=function(t,r){return Uh.setTime(+t),Th.setTime(+r),n(Uh),n(Th),Math.floor(e(Uh,Th))},i.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?i.filter(r?function(t){return r(t)%n===0}:function(t){return i.count(0,t)%n===0}):i:null}),i}function Er(n){return Ar(function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},function(n,t){n.setDate(n.getDate()+7*t)},function(n,t){return(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*qh)/Oh})}function Dr(n){return Ar(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},function(n,t){n.setUTCDate(n.getUTCDate()+7*t)},function(n,t){return(t-n)/Oh})}function Cr(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function Sr(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function Ur(n){return{y:n,m:0,d:1,H:0,M:0,S:0,L:0}}function Tr(n){function t(n,t){return function(e){var r,i,u,a=[],o=-1,f=0,c=n.length;for(e instanceof Date||(e=new Date(+e));++o<c;)37===n.charCodeAt(o)&&(a.push(n.slice(f,o)),null!=(i=ud[r=n.charAt(++o)])?r=n.charAt(++o):i="e"===r?" ":"0",(u=t[r])&&(r=u(e,i)),a.push(r),f=o+1);return a.push(n.slice(f,o)),a.join("")}}function e(n,t){return function(e){var i=Ur(1900),u=r(i,n,e+="",0);if(u!=e.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"W"in i||"U"in i){"w"in i||(i.w="W"in i?1:0);var a="Z"in i?Sr(Ur(i.y)).getUTCDay():t(Ur(i.y)).getDay();i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7}return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,Sr(i)):t(i)}}function r(n,t,e,r){for(var i,u,a=0,o=t.length,f=e.length;o>a;){if(r>=f)return-1;if(i=t.charCodeAt(a++),37===i){if(i=t.charAt(a++),u=Y[i in ud?t.charAt(a++):i],!u||(r=u(n,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function i(n,t,e){var r=S.exec(t.slice(e));return r?(n.p=U[r[0].toLowerCase()],e+r[0].length):-1}function u(n,t,e){var r=F.exec(t.slice(e));return r?(n.w=q[r[0].toLowerCase()],e+r[0].length):-1}function a(n,t,e){var r=T.exec(t.slice(e));return r?(n.w=R[r[0].toLowerCase()],e+r[0].length):-1}function o(n,t,e){var r=O.exec(t.slice(e));return r?(n.m=P[r[0].toLowerCase()],e+r[0].length):-1}function f(n,t,e){var r=L.exec(t.slice(e));return r?(n.m=z[r[0].toLowerCase()],e+r[0].length):-1}function c(n,t,e){return r(n,_,t,e)}function s(n,t,e){return r(n,w,t,e)}function l(n,t,e){return r(n,k,t,e)}function h(n){return E[n.getDay()]}function d(n){return A[n.getDay()]}function v(n){return C[n.getMonth()]}function p(n){return D[n.getMonth()]}function g(n){return N[+(n.getHours()>=12)]}function m(n){return E[n.getUTCDay()]}function y(n){return A[n.getUTCDay()]}function b(n){return C[n.getUTCMonth()]}function x(n){return D[n.getUTCMonth()]}function M(n){return N[+(n.getUTCHours()>=12)]}var _=n.dateTime,w=n.date,k=n.time,N=n.periods,A=n.days,E=n.shortDays,D=n.months,C=n.shortMonths,S=qr(N),U=Lr(N),T=qr(A),R=Lr(A),F=qr(E),q=Lr(E),L=qr(D),z=Lr(D),O=qr(C),P=Lr(C),j={a:h,A:d,b:v,B:p,c:null,d:Vr,e:Vr,H:Kr,I:Qr,j:ni,L:ti,m:ei,M:ri,p:g,S:ii,U:ui,w:ai,W:oi,x:null,X:null,y:fi,Y:ci,Z:si,"%":Ni},I={a:m,A:y,b:b,B:x,c:null,d:li,e:li,H:hi,I:di,j:vi,L:pi,m:gi,M:mi,p:M,S:yi,U:bi,w:xi,W:Mi,x:null,X:null,y:_i,Y:wi,Z:ki,"%":Ni},Y={a:u,A:a,b:o,B:f,c:c,d:Br,e:Br,H:Wr,I:Wr,j:$r,L:Jr,m:Hr,M:Zr,p:i,S:Xr,U:Or,w:zr,W:Pr,x:s,X:l,y:Ir,Y:jr,Z:Yr,"%":Gr};return j.x=t(w,j),j.X=t(k,j),j.c=t(_,j),I.x=t(w,I),I.X=t(k,I),I.c=t(_,I),{format:function(n){var e=t(n+="",j);return e.toString=function(){return n},e},parse:function(n){var t=e(n+="",Cr);return t.toString=function(){return n},t},utcFormat:function(n){var e=t(n+="",I);return e.toString=function(){return n},e},utcParse:function(n){var t=e(n,Sr);return t.toString=function(){return n},t}}}function Rr(n,t,e){var r=0>n?"-":"",i=(r?-n:n)+"",u=i.length;return r+(e>u?new Array(e-u+1).join(t)+i:i)}function Fr(n){return n.replace(fd,"\\$&")}function qr(n){return new RegExp("^(?:"+n.map(Fr).join("|")+")","i")}function Lr(n){for(var t={},e=-1,r=n.length;++e<r;)t[n[e].toLowerCase()]=e;return t}function zr(n,t,e){var r=ad.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Or(n,t,e){var r=ad.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function Pr(n,t,e){var r=ad.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function jr(n,t,e){var r=ad.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Ir(n,t,e){var r=ad.exec(t.slice(e,e+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function Yr(n,t,e){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(e,e+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function Hr(n,t,e){var r=ad.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Br(n,t,e){var r=ad.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function $r(n,t,e){var r=ad.exec(t.slice(e,e+3));return r?(n.m=0,n.d=+r[0],e+r[0].length):-1}function Wr(n,t,e){var r=ad.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function Zr(n,t,e){var r=ad.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function Xr(n,t,e){var r=ad.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function Jr(n,t,e){var r=ad.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function Gr(n,t,e){var r=od.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function Vr(n,t){return Rr(n.getDate(),t,2)}function Kr(n,t){return Rr(n.getHours(),t,2)}function Qr(n,t){return Rr(n.getHours()%12||12,t,2)}function ni(n,t){return Rr(1+Yh.count(Wh(n),n),t,3)}function ti(n,t){return Rr(n.getMilliseconds(),t,3)}function ei(n,t){return Rr(n.getMonth()+1,t,2)}function ri(n,t){return Rr(n.getMinutes(),t,2)}function ii(n,t){return Rr(n.getSeconds(),t,2)}function ui(n,t){return Rr(Hh.count(Wh(n),n),t,2)}function ai(n){return n.getDay()}function oi(n,t){return Rr(Bh.count(Wh(n),n),t,2)}function fi(n,t){return Rr(n.getFullYear()%100,t,2)}function ci(n,t){return Rr(n.getFullYear()%1e4,t,4)}function si(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Rr(t/60|0,"0",2)+Rr(t%60,"0",2)}function li(n,t){return Rr(n.getUTCDate(),t,2)}function hi(n,t){return Rr(n.getUTCHours(),t,2)}function di(n,t){return Rr(n.getUTCHours()%12||12,t,2)}function vi(n,t){return Rr(1+Jh.count(Qh(n),n),t,3)}function pi(n,t){return Rr(n.getUTCMilliseconds(),t,3)}function gi(n,t){return Rr(n.getUTCMonth()+1,t,2)}function mi(n,t){return Rr(n.getUTCMinutes(),t,2)}function yi(n,t){return Rr(n.getUTCSeconds(),t,2)}function bi(n,t){return Rr(Gh.count(Qh(n),n),t,2)}function xi(n){return n.getUTCDay()}function Mi(n,t){return Rr(Vh.count(Qh(n),n),t,2)}function _i(n,t){return Rr(n.getUTCFullYear()%100,t,2)}function wi(n,t){return Rr(n.getUTCFullYear()%1e4,t,4)}function ki(){return"+0000"}function Ni(){return"%"}function Ai(n){return nd=Tr(n),td=nd.format,ed=nd.parse,rd=nd.utcFormat,id=nd.utcParse,nd}function Ei(n){return n.toISOString()}function Di(n){var t=new Date(n);return isNaN(t)?null:t}function Ci(n){return new Date(n)}function Si(n){return n instanceof Date?+n:+new Date(+n)}function Ui(n,t,e,r,i,a,o,f,c){function l(u){return(o(u)<u?g:a(u)<u?m:i(u)<u?y:r(u)<u?b:t(u)<u?e(u)<u?x:M:n(u)<u?_:w)(u)}function h(t,e,r,i){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(r-e)/t,o=u(function(n){return n[2]}).right(k,a);o===k.length?(i=s(e/gd,r/gd,t),t=n):o?(o=k[a/k[o-1][2]<k[o][2]/a?o-1:o],i=o[1],t=o[0]):(i=s(e,r,t),t=f)}return null==i?t:t.every(i)}var d=or(tr,$e),v=d.invert,p=d.domain,g=c(".%L"),m=c(":%S"),y=c("%I:%M"),b=c("%I %p"),x=c("%a %d"),M=c("%b %d"),_=c("%B"),w=c("%Y"),k=[[o,1,sd],[o,5,5*sd],[o,15,15*sd],[o,30,30*sd],[a,1,ld],[a,5,5*ld],[a,15,15*ld],[a,30,30*ld],[i,1,hd],[i,3,3*hd],[i,6,6*hd],[i,12,12*hd],[r,1,dd],[r,2,2*dd],[e,1,vd],[t,1,pd],[t,3,3*pd],[n,1,gd]];return d.invert=function(n){return new Date(v(n))},d.domain=function(n){return arguments.length?p(Zl.call(n,Si)):p().map(Ci)},d.ticks=function(n,t){var e,r=p(),i=r[0],u=r[r.length-1],a=i>u;return a&&(e=i,i=u,u=e),e=h(n,i,u,t),e=e?e.range(i,u+1):[],a?e.reverse():e},d.tickFormat=function(n,t){return null==t?l:c(t)},d.nice=function(n,t){var e=p();return(n=h(n,e[0],e[e.length-1],t))?p(hr(e,n)):d},d.copy=function(){return ar(d,Ui(n,t,e,r,i,a,o,f,c))},d}function Ti(){return Ui(Wh,$h,Hh,Yh,Ih,jh,Ph,Rh,td).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function Ri(){return Ui(Qh,Kh,Gh,Jh,Xh,Zh,Ph,Rh,rd).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function Fi(n){return n.match(/.{6}/g).map(function(n){return"#"+n})}function qi(n){(0>n||n>1)&&(n-=Math.floor(n));var t=Math.abs(n-.5);return kd.h=360*n-100,kd.s=1.5-1.5*t,kd.l=.8-.9*t,kd+""}function Li(n){var t=n.length;return function(e){return n[Math.max(0,Math.min(t-1,Math.floor(e*t)))]}}function zi(n){function t(t){var u=(t-e)/(r-e);return n(i?Math.max(0,Math.min(1,u)):u)}var e=0,r=1,i=!1;return t.domain=function(n){return arguments.length?(e=+n[0],r=+n[1],t):[e,r]},t.clamp=function(n){return arguments.length?(i=!!n,t):i},t.interpolator=function(e){return arguments.length?(n=e,t):n},t.copy=function(){return zi(n).domain([e,r]).clamp(i)},cr(t)}function Oi(n){return n.match(/.{6}/g).map(function(n){return"#"+n})}function Pi(n){return Ah(Oi(n))}function ji(n){_n.call(this,null,n),this.modified(!0)}function Ii(n,t){var e=(n||"linear").toLowerCase(),r=sv[e];return e&&sv.hasOwnProperty(e)||P("Unrecognized scale type: "+n),t&&(lv.hasOwnProperty(t)||P("Unrecognized scale scheme: "+t),t=lv[t]),r=r(t),r.type=e,r}function Yi(n,t){var e=t.domain;if(e){if(t.zero||null!=t.domainMin||null!=t.domainMax){var r=(e=e.slice()).length-1;t.zero&&(e[0]>0&&(e[0]=0),e[r]<0&&(e[r]=0)),null!=t.domainMin&&(e[0]=t.domainMin),null!=t.domainMax&&(e[r]=t.domainMax)}n.domain(e),t.nice&&n.nice&&n.nice(t.nice!==!0&&+t.nice||null)}}function Hi(n,t){function e(){var e,i,u=r.length,a=0,o=0;for(e=0;u>e;++e)i=r[e],a+=i.x,o+=i.y;for(a=a/u-n,o=o/u-t,e=0;u>e;++e)i=r[e],i.x-=a,i.y-=o}var r;return null==n&&(n=0),null==t&&(t=0),e.initialize=function(n){r=n},e.x=function(t){return arguments.length?(n=+t,e):n},e.y=function(n){return arguments.length?(t=+n,e):t},e}function Bi(n){return function(){return n}}function $i(){return 1e-6*(Math.random()-.5)}function Wi(n){var t=+this._x.call(null,n),e=+this._y.call(null,n);return Zi(this.cover(t,e),t,e,n)}function Zi(n,t,e,r){if(isNaN(t)||isNaN(e))return n;var i,u,a,o,f,c,s,l,h,d=n._root,v={data:r},p=n._x0,g=n._y0,m=n._x1,y=n._y1;if(!d)return n._root=v,n;for(;d.length;)if((c=t>=(u=(p+m)/2))?p=u:m=u,(s=e>=(a=(g+y)/2))?g=a:y=a,i=d,!(d=d[l=s<<1|c]))return i[l]=v,n;if(o=+n._x.call(null,d.data),f=+n._y.call(null,d.data),t===o&&e===f)return v.next=d,i?i[l]=v:n._root=v,n;do i=i?i[l]=new Array(4):n._root=new Array(4),(c=t>=(u=(p+m)/2))?p=u:m=u,(s=e>=(a=(g+y)/2))?g=a:y=a;while((l=s<<1|c)===(h=(f>=a)<<1|o>=u));return i[h]=d,i[l]=v,n}function Xi(n){var t,e,r,i,u=n.length,a=new Array(u),o=new Array(u),f=1/0,c=1/0,s=-(1/0),l=-(1/0);for(e=0;u>e;++e)isNaN(r=+this._x.call(null,t=n[e]))||isNaN(i=+this._y.call(null,t))||(a[e]=r,o[e]=i,f>r&&(f=r),r>s&&(s=r),c>i&&(c=i),i>l&&(l=i));for(f>s&&(f=this._x0,s=this._x1),c>l&&(c=this._y0,l=this._y1),this.cover(f,c).cover(s,l),e=0;u>e;++e)Zi(this,a[e],o[e],n[e]);return this}function Ji(n,t){if(isNaN(n=+n)||isNaN(t=+t))return this;var e=this._x0,r=this._y0,i=this._x1,u=this._y1;if(isNaN(e))i=(e=Math.floor(n))+1,u=(r=Math.floor(t))+1;else{if(!(e>n||n>i||r>t||t>u))return this;var a,o,f=i-e,c=this._root;switch(o=((r+u)/2>t)<<1|(e+i)/2>n){case 0:do a=new Array(4),a[o]=c,c=a;while(f*=2,i=e+f,u=r+f,n>i||t>u);break;case 1:do a=new Array(4),a[o]=c,c=a;while(f*=2,e=i-f,u=r+f,e>n||t>u);break;case 2:do a=new Array(4),a[o]=c,c=a;while(f*=2,i=e+f,r=u-f,n>i||r>t);break;case 3:do a=new Array(4),a[o]=c,c=a;while(f*=2,e=i-f,r=u-f,e>n||r>t)}this._root&&this._root.length&&(this._root=c)}return this._x0=e,this._y0=r,this._x1=i,this._y1=u,this}function Gi(){var n=[];return this.visit(function(t){if(!t.length)do n.push(t.data);while(t=t.next)}),n}function Vi(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ki(n,t,e,r,i){this.node=n,this.x0=t,this.y0=e,this.x1=r,this.y1=i}function Qi(n,t,e){var r,i,u,a,o,f,c,s=this._x0,l=this._y0,h=this._x1,d=this._y1,v=[],p=this._root;for(p&&v.push(new Ki(p,s,l,h,d)),null==e?e=1/0:(s=n-e,l=t-e,h=n+e,d=t+e,e*=e);f=v.pop();)if(!(!(p=f.node)||(i=f.x0)>h||(u=f.y0)>d||(a=f.x1)<s||(o=f.y1)<l))if(p.length){var g=(i+a)/2,m=(u+o)/2;v.push(new Ki(p[3],g,m,a,o),new Ki(p[2],i,m,g,o),new Ki(p[1],g,u,a,m),new Ki(p[0],i,u,g,m)),(c=(t>=m)<<1|n>=g)&&(f=v[v.length-1],v[v.length-1]=v[v.length-1-c],v[v.length-1-c]=f)}else{var y=n-+this._x.call(null,p.data),b=t-+this._y.call(null,p.data),x=y*y+b*b;if(e>x){var M=Math.sqrt(e=x);s=n-M,l=t-M,h=n+M,d=t+M,r=p.data}}return r}function nu(n){if(isNaN(u=+this._x.call(null,n))||isNaN(a=+this._y.call(null,n)))return this;var t,e,r,i,u,a,o,f,c,s,l,h,d=this._root,v=this._x0,p=this._y0,g=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((c=u>=(o=(v+g)/2))?v=o:g=o,(s=a>=(f=(p+m)/2))?p=f:m=f,t=d,!(d=d[l=s<<1|c]))return this;if(!d.length)break;(t[l+1&3]||t[l+2&3]||t[l+3&3])&&(e=t,h=l)}for(;d.data!==n;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):t?(i?t[l]=i:delete t[l],(d=t[0]||t[1]||t[2]||t[3])&&d===(t[3]||t[2]||t[1]||t[0])&&!d.length&&(e?e[h]=d:this._root=d),this):(this._root=i,this)}function tu(n){for(var t=0,e=n.length;e>t;++t)this.remove(n[t]);return this}function eu(){return this._root}function ru(){var n=0;return this.visit(function(t){if(!t.length)do++n;while(t=t.next)}),n}function iu(n){var t,e,r,i,u,a,o=[],f=this._root;for(f&&o.push(new Ki(f,this._x0,this._y0,this._x1,this._y1));t=o.pop();)if(!n(f=t.node,r=t.x0,i=t.y0,u=t.x1,a=t.y1)&&f.length){var c=(r+u)/2,s=(i+a)/2;(e=f[3])&&o.push(new Ki(e,c,s,u,a)),(e=f[2])&&o.push(new Ki(e,r,s,c,a)),(e=f[1])&&o.push(new Ki(e,c,i,u,s)),(e=f[0])&&o.push(new Ki(e,r,i,c,s))}return this}function uu(n){var t,e=[],r=[];for(this._root&&e.push(new Ki(this._root,this._x0,this._y0,this._x1,this._y1));t=e.pop();){var i=t.node;if(i.length){var u,a=t.x0,o=t.y0,f=t.x1,c=t.y1,s=(a+f)/2,l=(o+c)/2;(u=i[0])&&e.push(new Ki(u,a,o,s,l)),(u=i[1])&&e.push(new Ki(u,s,o,f,l)),(u=i[2])&&e.push(new Ki(u,a,l,s,c)),(u=i[3])&&e.push(new Ki(u,s,l,f,c))}r.push(t)}for(;t=r.pop();)n(t.node,t.x0,t.y0,t.x1,t.y1);return this}function au(n){return n[0]}function ou(n){return arguments.length?(this._x=n,this):this._x}function fu(n){return n[1]}function cu(n){return arguments.length?(this._y=n,this):this._y}function su(n,t,e){var r=new lu(null==t?au:t,null==e?fu:e,NaN,NaN,NaN,NaN);return null==n?r:r.addAll(n)}function lu(n,t,e,r,i,u){this._x=n,this._y=t,this._x0=e,this._y0=r,this._x1=i,this._y1=u,this._root=void 0}function hu(n){for(var t={data:n.data},e=t;n=n.next;)e=e.next={data:n.data};return t}function du(n){return n.x+n.vx}function vu(n){return n.y+n.vy}function pu(n){function t(){function n(n,e,r,i,a){var o=n.data,d=n.r,v=l+d;{if(!o)return e>c+v||c-v>i||r>s+v||s-v>a;if(o.index>t){var p=c-o.x-o.vx,g=s-o.y-o.vy,m=p*p+g*g;v*v>m&&(0===p&&(p=$i(),m+=p*p),0===g&&(g=$i(),m+=g*g),m=(v-(m=Math.sqrt(m)))/m*u,f.vx+=(p*=m)*(v=(d*=d)/(h+d)),f.vy+=(g*=m)*v,o.vx-=p*(v=1-v),o.vy-=g*v)}}}for(var t,o,f,c,s,l,h,d=r.length,v=0;a>v;++v)for(o=su(r,du,vu).visitAfter(e),t=0;d>t;++t)f=r[t],l=i[t],h=l*l,c=f.x+f.vx,s=f.y+f.vy,o.visit(n)}function e(n){if(n.data)return n.r=i[n.data.index];for(var t=n.r=0;4>t;++t)n[t]&&n[t].r>n.r&&(n.r=n[t].r)}var r,i,u=1,a=1;return"function"!=typeof n&&(n=Bi(null==n?1:+n)),t.initialize=function(t){var e,u=(r=t).length;for(i=new Array(u),e=0;u>e;++e)i[e]=+n(r[e],e,r)},t.iterations=function(n){return arguments.length?(a=+n,t):a},t.strength=function(n){return arguments.length?(u=+n,t):u},t.radius=function(e){return arguments.length?(n="function"==typeof e?e:Bi(+e),t):n},t}function gu(n,t){return t}function mu(n){function t(n){return 1/Math.min(c[n.source.index],c[n.target.index])}function e(t){for(var e=0,r=n.length;v>e;++e)for(var i,u,f,c,l,h,d,p=0;r>p;++p)i=n[p],u=i.source,f=i.target,c=f.x+f.vx-u.x-u.vx||$i(),l=f.y+f.vy-u.y-u.vy||$i(),h=Math.sqrt(c*c+l*l),h=(h-o[p])/h*t*a[p],c*=h,l*=h,f.vx-=c*(d=s[p]),f.vy-=l*d,u.vx+=c*(d=1-d),u.vy+=l*d}function r(){if(f){var t,e,r=f.length,h=n.length,d=Sn(f,l);for(t=0,c=new Array(r);r>t;++t)c[t]=0;for(t=0;h>t;++t)e=n[t],e.index=t,"object"!=typeof e.source&&(e.source=d.get(e.source)),"object"!=typeof e.target&&(e.target=d.get(e.target)),++c[e.source.index],++c[e.target.index];for(t=0,s=new Array(h);h>t;++t)e=n[t],s[t]=c[e.source.index]/(c[e.source.index]+c[e.target.index]);a=new Array(h),i(),o=new Array(h),u()}}function i(){if(f)for(var t=0,e=n.length;e>t;++t)a[t]=+h(n[t],t,n)}function u(){if(f)for(var t=0,e=n.length;e>t;++t)o[t]=+d(n[t],t,n)}var a,o,f,c,s,l=gu,h=t,d=Bi(30),v=1;return null==n&&(n=[]),e.initialize=function(n){f=n,r()},e.links=function(t){return arguments.length?(n=t,r(),e):n},e.id=function(n){return arguments.length?(l=n,e):l},e.iterations=function(n){return arguments.length?(v=+n,e):v},e.strength=function(n){return arguments.length?(h="function"==typeof n?n:Bi(+n),i(),e):h},e.distance=function(n){return arguments.length?(d="function"==typeof n?n:Bi(+n),u(),e):d},e}function yu(){for(var n,t=0,e=arguments.length,r={};e>t;++t){if(!(n=arguments[t]+"")||n in r)throw new Error("illegal type: "+n);r[n]=[]}return new bu(r)}function bu(n){this._=n}function xu(n,t){return n.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");if(r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:e}})}function Mu(n,t){for(var e,r=0,i=n.length;i>r;++r)if((e=n[r]).name===t)return e.value}function _u(n,t,e){for(var r=0,i=n.length;i>r;++r)if(n[r].name===t){n[r]=pv,n=n.slice(0,r).concat(n.slice(r+1));break}return null!=e&&n.push({name:t,value:e}),n}function wu(){return wv||(Av(ku),wv=Nv.now()+kv)}function ku(){wv=0}function Nu(){this._call=this._time=this._next=null}function Au(n,t,e){var r=new Nu;return r.restart(n,t,e),r}function Eu(){wu(),++yv;for(var n,t=gv;t;)(n=wv-t._time)>=0&&t._call.call(null,n),t=t._next;--yv}function Du(n){wv=(_v=n||Nv.now())+kv,yv=bv=0;try{Eu()}finally{yv=0,Su(),wv=0}}function Cu(){var n=Nv.now(),t=n-_v;t>Mv&&(kv-=t,_v=n)}function Su(){for(var n,t,e=gv,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:gv=t);mv=n,Uu(r)}function Uu(n){if(!yv){bv&&(bv=clearTimeout(bv));var t=n-wv;t>24?(1/0>n&&(bv=setTimeout(Du,t)),xv&&(xv=clearInterval(xv))):(xv||(xv=setInterval(Cu,Mv)),yv=1,Av(Du))}}function Tu(n){return n.x}function Ru(n){return n.y}function Fu(n){function t(){e(),d.call("tick",u),o>a&&(h.stop(),d.call("end",u))}function e(){var t,e,r=n.length;for(a+=(c-a)*f,l.each(function(n){n(a)}),t=0;r>t;++t)e=n[t],null==e.fx?e.x+=e.vx*=s:(e.x=e.fx,e.vx=0),null==e.fy?e.y+=e.vy*=s:(e.y=e.fy,e.vy=0)}function r(){for(var t,e=0,r=n.length;r>e;++e){if(t=n[e],t.index=e,isNaN(t.x)||isNaN(t.y)){var i=Ev*Math.sqrt(e),u=e*Dv;t.x=i*Math.cos(u),t.y=i*Math.sin(u)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function i(t){return t.initialize&&t.initialize(n),t}var u,a=1,o=.001,f=1-Math.pow(o,1/300),c=0,s=.6,l=Sn(),h=Au(t),d=yu("tick","end");return null==n&&(n=[]),r(),u={tick:e,restart:function(){return h.restart(t),u},stop:function(){return h.stop(),u},nodes:function(t){return arguments.length?(n=t,r(),l.each(i),u):n},alpha:function(n){return arguments.length?(a=+n,u):a},alphaMin:function(n){return arguments.length?(o=+n,u):o},alphaDecay:function(n){return arguments.length?(f=+n,u):+f},alphaTarget:function(n){return arguments.length?(c=+n,u):c},velocityDecay:function(n){return arguments.length?(s=1-n,u):1-s},force:function(n,t){return arguments.length>1?(null==t?l.remove(n):l.set(n,i(t)),u):l.get(n)},find:function(t,e,r){var i,u,a,o,f,c=0,s=n.length;for(null==r?r=1/0:r*=r,c=0;s>c;++c)o=n[c],i=t-o.x,u=e-o.y,a=i*i+u*u,r>a&&(f=o,r=a);return f},on:function(n,t){return arguments.length>1?(d.on(n,t),u):d.on(n)}}}function qu(){function n(n){var t,o=i.length,f=su(i,Tu,Ru).visitAfter(e);for(a=n,t=0;o>t;++t)u=i[t],f.visit(r)}function t(){if(i){var n,t=i.length;for(o=new Array(t),n=0;t>n;++n)o[n]=+f(i[n],n,i)}}function e(n){var t,e,r,i,u,a=0;if(n.length){for(r=i=u=0;4>u;++u)(t=n[u])&&(e=t.value)&&(a+=e,r+=e*t.x,i+=e*t.y);n.x=r/a,n.y=i/a}else{t=n,t.x=t.data.x,t.y=t.data.y;do a+=o[t.data.index];while(t=t.next)}n.value=a}function r(n,t,e,r){if(!n.value)return!0;var i=n.x-u.x,f=n.y-u.y,h=r-t,d=i*i+f*f;if(d>h*h/l)return s>d&&(0===i&&(i=$i(),d+=i*i),0===f&&(f=$i(),d+=f*f),c>d&&(d=Math.sqrt(c*d)),u.vx+=i*n.value*a/d,u.vy+=f*n.value*a/d),!0;if(!(n.length||d>=s)){(n.data!==u||n.next)&&(0===i&&(i=$i(),d+=i*i),0===f&&(f=$i(),d+=f*f),c>d&&(d=Math.sqrt(c*d)));do n.data!==u&&(h=o[n.data.index]*a/d,u.vx+=i*h,u.vy+=f*h);while(n=n.next)}}var i,u,a,o,f=Bi(-30),c=1,s=1/0,l=.81;return n.initialize=function(n){i=n,t()},n.strength=function(e){return arguments.length?(f="function"==typeof e?e:Bi(+e),t(),n):f},n.distanceMin=function(t){return arguments.length?(c=t*t,n):Math.sqrt(c)},n.distanceMax=function(t){return arguments.length?(s=t*t,n):Math.sqrt(s)},n.theta=function(t){return arguments.length?(l=t*t,n):Math.sqrt(l)},n}function Lu(n){function t(n){for(var t,e=0,a=r.length;a>e;++e)t=r[e],t.vx+=(u[e]-t.x)*i[e]*n}function e(){if(r){var t,e=r.length;for(i=new Array(e),u=new Array(e),t=0;e>t;++t)i[t]=isNaN(u[t]=+n(r[t],t,r))?0:+a(r[t],t,r)}}var r,i,u,a=Bi(.1);return"function"!=typeof n&&(n=Bi(null==n?0:+n)),t.initialize=function(n){r=n,e()},t.strength=function(n){return arguments.length?(a="function"==typeof n?n:Bi(+n),e(),t):a},t.x=function(r){return arguments.length?(n="function"==typeof r?r:Bi(+r),e(),t):n},t}function zu(n){function t(n){for(var t,e=0,a=r.length;a>e;++e)t=r[e],t.vy+=(u[e]-t.y)*i[e]*n}function e(){if(r){var t,e=r.length;for(i=new Array(e),u=new Array(e),t=0;e>t;++t)i[t]=isNaN(u[t]=+n(r[t],t,r))?0:+a(r[t],t,r)}}var r,i,u,a=Bi(.1);return"function"!=typeof n&&(n=Bi(null==n?0:+n)),t.initialize=function(n){r=n,e()},t.strength=function(n){return arguments.length?(a="function"==typeof n?n:Bi(+n),e(),t):a},t.y=function(r){return arguments.length?(n="function"==typeof r?r:Bi(+r),e(),t):n},t}function Ou(n){_n.call(this,null,n)}function Pu(n,t){return function(){n.touch(t).run()}}function ju(n,t){var e=Fu(n),r=!1,i=e.stop,u=e.restart;return e.stopped=function(){return r},e.restart=function(){return r=!1,u()},e.stop=function(){return r=!0,i()},Iu(e,t,!0).on("end",function(){r=!0})}function Iu(n,t,e){var r,i,u,a=q(t.forces);for(r=0,i=Uv.length;i>r;++r)u=Uv[r],u!==Sv&&t.modified(u)&&n[u](t[u]);for(r=0,i=a.length;i>r;++r)(e||t.modified(Sv,r))&&n.force(Sv+r,Yu(a[r]));for(i=n.numForces||0;i>r;++r)n.force(Sv+r,null);return n.numForces=a.length,n}function Yu(n){var t,e;Cv.has(n.force)||P("Unrecognized force: "+n.force),t=Cv.get(n.force)();for(e in n)z(t[e])&&t[e](n[e]);return t}function Hu(n){return n.source.x}function Bu(n){return n.source.y}function $u(n){return n.target.x}function Wu(n){return n.target.y}function Zu(n){_n.call(this,{},n)}function Xu(n,t,e,r){return"M"+n+","+t+"L"+e+","+r}function Ju(n,t,e,r){return Xu(t*Math.cos(n),t*Math.sin(n),r*Math.cos(e),r*Math.sin(e))}function Gu(n,t,e,r){var i=e-n,u=r-t,a=.2*(i+u),o=.2*(u-i);return"M"+n+","+t+"C"+(n+a)+","+(t+o)+" "+(e+o)+","+(r-a)+" "+e+","+r}function Vu(n,t,e,r){return Gu(t*Math.cos(n),t*Math.sin(n),r*Math.cos(e),r*Math.sin(e))}function Ku(n,t,e,r){return"M"+n+","+t+"V"+r+"H"+e}function Qu(n,t,e,r){return"M"+n+","+t+"H"+e+"V"+r}function na(n,t,e,r){var i=Math.cos(n),u=Math.sin(n),a=Math.cos(e),o=Math.sin(e),f=Math.abs(e-n)>Math.PI?n>=e:e>n;return"M"+t*i+","+t*u+"A"+t+","+t+" 0 0,"+(f?1:0)+" "+t*a+","+t*o+"L"+r*a+","+r*o}function ta(n,t,e,r){var i=(n+e)/2;return"M"+n+","+t+"C"+i+","+t+" "+i+","+r+" "+e+","+r}function ea(n,t,e,r){var i=(t+r)/2;return"M"+n+","+t+"C"+n+","+i+" "+e+","+i+" "+e+","+r}function ra(n,t,e,r){var i=Math.cos(n),u=Math.sin(n),a=Math.cos(e),o=Math.sin(e),f=(t+r)/2;return"M"+t*i+","+t*u+"C"+f*i+","+f*u+" "+f*a+","+f*o+" "+r*a+","+r*o}function ia(n){_n.call(this,null,n)}function ua(n){_n.call(this,null,n)}function aa(n,t,e,r){var i,u,a,o,f,c,s,l,h,d=[],v=function(n){return n(f)};if(null==t)d.push(n.slice());else for(i={},u=0,a=n.length;a>u;++u)f=n[u],c=t.map(v),s=i[c]||(d.push(i[c]=[]),i[c]),s.push(f);for(c=0,h=0,o=d.length;o>c;++c){for(s=d[c],u=0,l=0,a=s.length;a>u;++u)l+=r(s[u]);s.sum=l,l>h&&(h=l),e&&s.sort(e)}return d.max=h,d}function oa(n){return function(){return n}}function fa(n){return n[0]}function ca(n){return n[1]}function sa(){this._=null}function la(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function ha(n,t){var e=t,r=t.R,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function da(n,t){var e=t,r=t.L,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function va(n){for(;n.L;)n=n.L;return n}function pa(n,t,e,r){var i=[null,null],u=$v.push(i)-1;return i.left=n,i.right=t,e&&ma(i,n,t,e),r&&ma(i,t,n,r),Hv[n.index].halfedges.push(u),Hv[t.index].halfedges.push(u),i}function ga(n,t,e){var r=[t,e];return r.left=n,r}function ma(n,t,e,r){n[0]||n[1]?n.left===e?n[1]=r:n[0]=r:(n[0]=r,n.left=t,n.right=e)}function ya(n,t,e,r,i){var u,a=n[0],o=n[1],f=a[0],c=a[1],s=o[0],l=o[1],h=0,d=1,v=s-f,p=l-c;if(u=t-f,v||!(u>0)){if(u/=v,0>v){if(h>u)return;d>u&&(d=u)}else if(v>0){if(u>d)return;u>h&&(h=u)}if(u=r-f,v||!(0>u)){if(u/=v,0>v){if(u>d)return;u>h&&(h=u)}else if(v>0){if(h>u)return;d>u&&(d=u)}if(u=e-c,p||!(u>0)){if(u/=p,0>p){if(h>u)return;d>u&&(d=u)}else if(p>0){if(u>d)return;u>h&&(h=u)}if(u=i-c,p||!(0>u)){if(u/=p,0>p){if(u>d)return;u>h&&(h=u)}else if(p>0){if(h>u)return;d>u&&(d=u)}return h>0||1>d?(h>0&&(n[0]=[f+h*v,c+h*p]),1>d&&(n[1]=[f+d*v,c+d*p]),!0):!0}}}}}function ba(n,t,e,r,i){var u=n[1];if(u)return!0;var a,o,f=n[0],c=n.left,s=n.right,l=c[0],h=c[1],d=s[0],v=s[1],p=(l+d)/2,g=(h+v)/2;if(v===h){if(t>p||p>=r)return;if(l>d){if(f){if(f[1]>=i)return}else f=[p,e];u=[p,i]}else{if(f){if(f[1]<e)return}else f=[p,i];u=[p,e]}}else if(a=(l-d)/(v-h),o=g-a*p,
-1>a||a>1)if(l>d){if(f){if(f[1]>=i)return}else f=[(e-o)/a,e];u=[(i-o)/a,i]}else{if(f){if(f[1]<e)return}else f=[(i-o)/a,i];u=[(e-o)/a,e]}else if(v>h){if(f){if(f[0]>=r)return}else f=[t,a*t+o];u=[r,a*r+o]}else{if(f){if(f[0]<t)return}else f=[r,a*r+o];u=[t,a*t+o]}return n[0]=f,n[1]=u,!0}function xa(n,t,e,r){for(var i,u=$v.length;u--;)ba(i=$v[u],n,t,e,r)&&ya(i,n,t,e,r)&&(Math.abs(i[0][0]-i[1][0])>Xv||Math.abs(i[0][1]-i[1][1])>Xv)||delete $v[u]}function Ma(n){return Hv[n.index]={site:n,halfedges:[]}}function _a(n,t){var e=n.site,r=t.left,i=t.right;return e===i&&(i=r,r=e),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(e===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function wa(n,t){return t[+(t.left!==n.site)]}function ka(n,t){return t[+(t.left===n.site)]}function Na(){for(var n,t,e,r,i=0,u=Hv.length;u>i;++i)if((n=Hv[i])&&(r=(t=n.halfedges).length)){var a=new Array(r),o=new Array(r);for(e=0;r>e;++e)a[e]=e,o[e]=_a(n,$v[t[e]]);for(a.sort(function(n,t){return o[t]-o[n]}),e=0;r>e;++e)o[e]=t[a[e]];for(e=0;r>e;++e)t[e]=o[e]}}function Aa(n,t,e,r){var i,u,a,o,f,c,s,l,h,d,v,p,g=Hv.length,m=!0;for(i=0;g>i;++i)if(u=Hv[i]){for(a=u.site,f=u.halfedges,o=f.length;o--;)$v[f[o]]||f.splice(o,1);for(o=0,c=f.length;c>o;)d=ka(u,$v[f[o]]),v=d[0],p=d[1],s=wa(u,$v[f[++o%c]]),l=s[0],h=s[1],(Math.abs(v-l)>Xv||Math.abs(p-h)>Xv)&&(f.splice(o,0,$v.push(ga(a,d,Math.abs(v-n)<Xv&&r-p>Xv?[n,Math.abs(l-n)<Xv?h:r]:Math.abs(p-r)<Xv&&e-v>Xv?[Math.abs(h-r)<Xv?l:e,r]:Math.abs(v-e)<Xv&&p-t>Xv?[e,Math.abs(l-e)<Xv?h:t]:Math.abs(p-t)<Xv&&v-n>Xv?[Math.abs(h-t)<Xv?l:n,t]:null))-1),++c);c&&(m=!1)}if(m){var y,b,x,M=1/0;for(i=0,m=null;g>i;++i)(u=Hv[i])&&(a=u.site,y=a[0]-n,b=a[1]-t,x=y*y+b*b,M>x&&(M=x,m=u));if(m){var _=[n,t],w=[n,r],k=[e,r],N=[e,t];m.halfedges.push($v.push(ga(a=m.site,_,w))-1,$v.push(ga(a,w,k))-1,$v.push(ga(a,k,N))-1,$v.push(ga(a,N,_))-1)}}for(i=0;g>i;++i)(u=Hv[i])&&(u.halfedges.length||delete Hv[i])}function Ea(){la(this),this.x=this.y=this.arc=this.site=this.cy=null}function Da(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,i=n.site,u=e.site;if(r!==u){var a=i[0],o=i[1],f=r[0]-a,c=r[1]-o,s=u[0]-a,l=u[1]-o,h=2*(f*l-c*s);if(!(h>=-Jv)){var d=f*f+c*c,v=s*s+l*l,p=(l*d-c*v)/h,g=(f*v-s*d)/h,m=Wv.pop()||new Ea;m.arc=n,m.site=i,m.x=p+a,m.y=(m.cy=g+o)+Math.sqrt(p*p+g*g),n.circle=m;for(var y=null,b=Bv._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}Bv.insert(y,m),y||(Iv=m)}}}}function Ca(n){var t=n.circle;t&&(t.P||(Iv=t.N),Bv.remove(t),Wv.push(t),la(t),n.circle=null)}function Sa(){la(this),this.edge=this.site=this.circle=null}function Ua(n){var t=Zv.pop()||new Sa;return t.site=n,t}function Ta(n){Ca(n),Yv.remove(n),Zv.push(n),la(n)}function Ra(n){var t=n.circle,e=t.x,r=t.cy,i=[e,r],u=n.P,a=n.N,o=[n];Ta(n);for(var f=u;f.circle&&Math.abs(e-f.circle.x)<Xv&&Math.abs(r-f.circle.cy)<Xv;)u=f.P,o.unshift(f),Ta(f),f=u;o.unshift(f),Ca(f);for(var c=a;c.circle&&Math.abs(e-c.circle.x)<Xv&&Math.abs(r-c.circle.cy)<Xv;)a=c.N,o.push(c),Ta(c),c=a;o.push(c),Ca(c);var s,l=o.length;for(s=1;l>s;++s)c=o[s],f=o[s-1],ma(c.edge,f.site,c.site,i);f=o[0],c=o[l-1],c.edge=pa(f.site,c.site,null,i),Da(f),Da(c)}function Fa(n){for(var t,e,r,i,u=n[0],a=n[1],o=Yv._;o;)if(r=qa(o,a)-u,r>Xv)o=o.L;else{if(i=u-La(o,a),!(i>Xv)){r>-Xv?(t=o.P,e=o):i>-Xv?(t=o,e=o.N):t=e=o;break}if(!o.R){t=o;break}o=o.R}Ma(n);var f=Ua(n);if(Yv.insert(t,f),t||e){if(t===e)return Ca(t),e=Ua(t.site),Yv.insert(f,e),f.edge=e.edge=pa(t.site,f.site),Da(t),void Da(e);if(!e)return void(f.edge=pa(t.site,f.site));Ca(t),Ca(e);var c=t.site,s=c[0],l=c[1],h=n[0]-s,d=n[1]-l,v=e.site,p=v[0]-s,g=v[1]-l,m=2*(h*g-d*p),y=h*h+d*d,b=p*p+g*g,x=[(g*y-d*b)/m+s,(h*b-p*y)/m+l];ma(e.edge,c,v,x),f.edge=pa(c,n,null,x),e.edge=pa(n,v,null,x),Da(t),Da(e)}}function qa(n,t){var e=n.site,r=e[0],i=e[1],u=i-t;if(!u)return r;var a=n.P;if(!a)return-(1/0);e=a.site;var o=e[0],f=e[1],c=f-t;if(!c)return o;var s=o-r,l=1/u-1/c,h=s/c;return l?(-h+Math.sqrt(h*h-2*l*(s*s/(-2*c)-f+c/2+i-u/2)))/l+r:(r+o)/2}function La(n,t){var e=n.N;if(e)return qa(e,t);var r=n.site;return r[1]===t?r[0]:1/0}function za(n,t,e){return(n[0]-e[0])*(t[1]-n[1])-(n[0]-t[0])*(e[1]-n[1])}function Oa(n,t){return t[1]-n[1]||t[0]-n[0]}function Pa(n,t){var e,r,i,u=n.sort(Oa).pop();for($v=[],Hv=new Array(n.length),Yv=new sa,Bv=new sa;;)if(i=Iv,u&&(!i||u[1]<i.y||u[1]===i.y&&u[0]<i.x))u[0]===e&&u[1]===r||(Fa(u),e=u[0],r=u[1]),u=n.pop();else{if(!i)break;Ra(i.arc)}if(Na(),t){var a=+t[0][0],o=+t[0][1],f=+t[1][0],c=+t[1][1];xa(a,o,f,c),Aa(a,o,f,c)}this.edges=$v,this.cells=Hv,Yv=Bv=$v=Hv=null}function ja(){function n(n){return new Pa(n.map(function(r,i){var u=[Math.round(t(r,i,n)/Xv)*Xv,Math.round(e(r,i,n)/Xv)*Xv];return u.index=i,u.data=r,u}),r)}var t=fa,e=ca,r=null;return n.polygons=function(t){return n(t).polygons()},n.links=function(t){return n(t).links()},n.triangles=function(t){return n(t).triangles()},n.x=function(e){return arguments.length?(t="function"==typeof e?e:oa(+e),n):t},n.y=function(t){return arguments.length?(e="function"==typeof t?t:oa(+t),n):e},n.extent=function(t){return arguments.length?(r=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],n):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},n.size=function(t){return arguments.length?(r=null==t?null:[[0,0],[+t[0],+t[1]]],n):r&&[r[1][0],r[1][1]]},n}function Ia(n){_n.call(this,null,n)}function Ya(){return new Ha}function Ha(){this.reset()}function Ba(n,t,e){var r=n.s=t+e,i=r-t,u=r-i;n.t=t-u+(e-i)}function $a(n){return n>1?0:-1>n?fp:Math.acos(n)}function Wa(n){return n>1?cp:-1>n?-cp:Math.asin(n)}function Za(){}function Xa(n,t){n&&Ep.hasOwnProperty(n.type)&&Ep[n.type](n,t)}function Ja(n,t,e){var r,i=-1,u=n.length-e;for(t.lineStart();++i<u;)r=n[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Ga(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)Ja(n[e],t,1);t.polygonEnd()}function Va(n,t){n&&Ap.hasOwnProperty(n.type)?Ap[n.type](n,t):Xa(n,t)}function Ka(n){return[gp(n[1],n[0]),Wa(n[2])]}function Qa(n){var t=n[0],e=n[1],r=mp(e);return[r*mp(t),r*_p(t),_p(e)]}function no(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function to(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function eo(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function ro(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function io(n){var t=kp(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function uo(n,t){ip.push(up=[Kv=n,np=n]),Qv>t&&(Qv=t),t>tp&&(tp=t)}function ao(n,t){return(t-=n)<0?t+360:t}function oo(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function fo(n,t){return[n>fp?n-lp:-fp>n?n+lp:n,t]}function co(n,t,e){return(n%=lp)?t||e?oo(lo(n),ho(t,e)):lo(n):t||e?ho(t,e):fo}function so(n){return function(t,e){return t+=n,[t>fp?t-lp:-fp>t?t+lp:t,e]}}function lo(n){var t=so(n);return t.invert=so(-n),t}function ho(n,t){function e(n,t){var e=mp(t),o=mp(n)*e,f=_p(n)*e,c=_p(t),s=c*r+o*i;return[gp(f*u-s*a,o*r-c*i),Wa(s*u+f*a)]}var r=mp(n),i=_p(n),u=mp(t),a=_p(t);return e.invert=function(n,t){var e=mp(t),o=mp(n)*e,f=_p(n)*e,c=_p(t),s=c*u-f*a;return[gp(f*u+c*a,o*r+s*i),Wa(s*r-o*i)]},e}function vo(n,t,e,r,i,u){if(e){var a=mp(t),o=_p(t),f=r*e;null==i?(i=t+r*lp,u=t-f/2):(i=po(a,i),u=po(a,u),(r>0?u>i:i>u)&&(i+=r*lp));for(var c,s=i;r>0?s>u:u>s;s-=f)c=Ka([a,-o*mp(s),-o*_p(s)]),n.point(c[0],c[1])}}function po(n,t){t=Qa(t),t[0]-=n,io(t);var e=$a(-t[1]);return((-t[2]<0?-e:e)+lp-op)%lp}function go(){var n,t=[];return{point:function(t,e){n.push([t,e])},lineStart:function(){t.push(n=[])},lineEnd:Za,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var e=t;return t=[],n=null,e}}}function mo(n,t,e,r,i,u){var a,o=n[0],f=n[1],c=t[0],s=t[1],l=0,h=1,d=c-o,v=s-f;if(a=e-o,d||!(a>0)){if(a/=d,0>d){if(l>a)return;h>a&&(h=a)}else if(d>0){if(a>h)return;a>l&&(l=a)}if(a=i-o,d||!(0>a)){if(a/=d,0>d){if(a>h)return;a>l&&(l=a)}else if(d>0){if(l>a)return;h>a&&(h=a)}if(a=r-f,v||!(a>0)){if(a/=v,0>v){if(l>a)return;h>a&&(h=a)}else if(v>0){if(a>h)return;a>l&&(l=a)}if(a=u-f,v||!(0>a)){if(a/=v,0>v){if(a>h)return;a>l&&(l=a)}else if(v>0){if(l>a)return;h>a&&(h=a)}return l>0&&(n[0]=o+l*d,n[1]=f+l*v),1>h&&(t[0]=o+h*d,t[1]=f+h*v),!0}}}}}function yo(n,t){return vp(n[0]-t[0])<op&&vp(n[1]-t[1])<op}function bo(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function xo(n,t,e,r,i){var u,a,o=[],f=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e,r=n[0],a=n[t];if(yo(r,a)){for(i.lineStart(),u=0;t>u;++u)i.point((r=n[u])[0],r[1]);return void i.lineEnd()}o.push(e=new bo(r,n,null,!0)),f.push(e.o=new bo(r,null,e,!1)),o.push(e=new bo(a,n,null,!1)),f.push(e.o=new bo(a,null,e,!0))}}),o.length){for(f.sort(t),Mo(o),Mo(f),u=0,a=f.length;a>u;++u)f[u].e=e=!e;for(var c,s,l=o[0];;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(u=0,a=c.length;a>u;++u)i.point((s=c[u])[0],s[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,u=c.length-1;u>=0;--u)i.point((s=c[u])[0],s[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,d=!d}while(!h.v);i.lineEnd()}}}function Mo(n){if(t=n.length){for(var t,e,r=0,i=n[0];++r<t;)i.n=e=n[r],e.p=i,i=e;i.n=e=n[0],e.p=i}}function _o(n,t,e,r){function i(i,u){return i>=n&&e>=i&&u>=t&&r>=u}function u(i,u,o,c){var s=0,l=0;if(null==i||(s=a(i,o))!==(l=a(u,o))||f(i,u)<0^o>0){do c.point(0===s||3===s?n:e,s>1?r:t);while((s=(s+o+4)%4)!==l)}else c.point(u[0],u[1])}function a(r,i){return vp(r[0]-n)<op?i>0?0:3:vp(r[0]-e)<op?i>0?2:1:vp(r[1]-t)<op?i>0?1:0:i>0?3:2}function o(n,t){return f(n.x,t.x)}function f(n,t){var e=a(n,1),r=a(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function f(n,t){i(n,t)&&E.point(n,t)}function c(){for(var t=0,e=0,i=m.length;i>e;++e)for(var u,a,o=m[e],f=1,c=o.length,s=o[0],l=s[0],h=s[1];c>f;++f)u=l,a=h,s=o[f],l=s[0],h=s[1],r>=a?h>r&&(l-u)*(r-a)>(h-a)*(n-u)&&++t:r>=h&&(h-a)*(n-u)>(l-u)*(r-a)&&--t;return t}function s(){E=D,g=[],m=[],A=!0}function l(){var n=c(),t=A&&n,e=(g=p(g)).length;(t||e)&&(a.polygonStart(),t&&(a.lineStart(),u(null,null,1,a),a.lineEnd()),e&&xo(g,o,n,u,a),a.polygonEnd()),E=a,g=m=y=null}function h(){C.point=v,m&&m.push(y=[]),N=!0,k=!1,_=w=NaN}function d(){g&&(v(b,x),M&&k&&D.rejoin(),g.push(D.result())),C.point=f,k&&E.lineEnd()}function v(u,a){var o=i(u,a);if(m&&y.push([u,a]),N)b=u,x=a,M=o,N=!1,o&&(E.lineStart(),E.point(u,a));else if(o&&k)E.point(u,a);else{var f=[_=Math.max(zp,Math.min(Lp,_)),w=Math.max(zp,Math.min(Lp,w))],c=[u=Math.max(zp,Math.min(Lp,u)),a=Math.max(zp,Math.min(Lp,a))];mo(f,c,n,t,e,r)?(k||(E.lineStart(),E.point(f[0],f[1])),E.point(c[0],c[1]),o||E.lineEnd(),A=!1):o&&(E.lineStart(),E.point(u,a),A=!1)}_=u,w=a,k=o}var g,m,y,b,x,M,_,w,k,N,A,E=a,D=go(),C={point:f,lineStart:h,lineEnd:d,polygonStart:s,polygonEnd:l};return C}}function wo(n,t,e){var r=f(n,t-op,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function ko(n,t,e){var r=f(n,t-op,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function No(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return f(yp(u/m)*m,i,m).map(d).concat(f(yp(s/y)*y,c,y).map(v)).concat(f(yp(r/p)*p,e,p).filter(function(n){return vp(n%m)>op}).map(l)).concat(f(yp(o/g)*g,a,g).filter(function(n){return vp(n%y)>op}).map(h))}var e,r,i,u,a,o,c,s,l,h,d,v,p=10,g=p,m=90,y=360,b=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[d(u).concat(v(c).slice(1),d(i).reverse().slice(1),v(s).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.extentMajor(t).extentMinor(t):n.extentMinor()},n.extentMajor=function(t){return arguments.length?(u=+t[0][0],i=+t[1][0],s=+t[0][1],c=+t[1][1],u>i&&(t=u,u=i,i=t),s>c&&(t=s,s=c,c=t),n.precision(b)):[[u,s],[i,c]]},n.extentMinor=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],o=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),o>a&&(t=o,o=a,a=t),n.precision(b)):[[r,o],[e,a]]},n.step=function(t){return arguments.length?n.stepMajor(t).stepMinor(t):n.stepMinor()},n.stepMajor=function(t){return arguments.length?(m=+t[0],y=+t[1],n):[m,y]},n.stepMinor=function(t){return arguments.length?(p=+t[0],g=+t[1],n):[p,g]},n.precision=function(t){return arguments.length?(b=+t,l=wo(o,a,90),h=ko(r,e,b),d=wo(s,c,90),v=ko(u,i,b),n):b},n.extentMajor([[-180,-90+op],[180,90-op]]).extentMinor([[-180,-80-op],[180,80+op]])}function Ao(n){return n}function Eo(){jp.point=Do}function Do(n,t){jp.point=Co,Dp=Sp=n,Cp=Up=t}function Co(n,t){Pp.add(Up*n-Sp*t),Sp=n,Up=t}function So(){Co(Dp,Cp)}function Uo(n,t){Ip>n&&(Ip=n),n>Hp&&(Hp=n),Yp>t&&(Yp=t),t>Bp&&(Bp=t)}function To(n,t){Wp+=n,Zp+=t,++Xp}function Ro(){tg.point=Fo}function Fo(n,t){tg.point=qo,To(Fp=n,qp=t)}function qo(n,t){var e=n-Fp,r=t-qp,i=kp(e*e+r*r);Jp+=i*(Fp+n)/2,Gp+=i*(qp+t)/2,Vp+=i,To(Fp=n,qp=t)}function Lo(){tg.point=To}function zo(){tg.point=Po}function Oo(){jo(Tp,Rp)}function Po(n,t){tg.point=jo,To(Tp=Fp=n,Rp=qp=t)}function jo(n,t){var e=n-Fp,r=t-qp,i=kp(e*e+r*r);Jp+=i*(Fp+n)/2,Gp+=i*(qp+t)/2,Vp+=i,i=qp*n-Fp*t,Kp+=i*(Fp+n),Qp+=i*(qp+t),ng+=3*i,To(Fp=n,qp=t)}function Io(n){function t(t,e){n.moveTo(t+a,e),n.arc(t,e,a,0,lp)}function e(t,e){n.moveTo(t,e),o.point=r}function r(t,e){n.lineTo(t,e)}function i(){o.point=t}function u(){n.closePath()}var a=4.5,o={point:t,lineStart:function(){o.point=e},lineEnd:i,polygonStart:function(){o.lineEnd=u},polygonEnd:function(){o.lineEnd=i,o.point=t},pointRadius:function(n){return a=n,o},result:Za};return o}function Yo(){function n(n,t){o.push("M",n,",",t,a)}function t(n,t){o.push("M",n,",",t),f.point=e}function e(n,t){o.push("L",n,",",t)}function r(){f.point=t}function i(){f.point=n}function u(){o.push("Z")}var a=Ho(4.5),o=[],f={point:n,lineStart:r,lineEnd:i,polygonStart:function(){f.lineEnd=u},polygonEnd:function(){f.lineEnd=i,f.point=n},pointRadius:function(n){return a=Ho(n),f},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return f}function Ho(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Bo(){function n(n){return n&&("function"==typeof u&&i.pointRadius(+u.apply(this,arguments)),Va(n,e(i))),i.result()}var t,e,r,i,u=4.5;return n.area=function(n){return Va(n,e(jp)),jp.result()},n.bounds=function(n){return Va(n,e($p)),$p.result()},n.centroid=function(n){return Va(n,e(tg)),tg.result()},n.projection=function(r){return arguments.length?(e=null==(t=r)?Ao:r.stream,n):t},n.context=function(t){return arguments.length?(i=null==(r=t)?new Yo:new Io(t),"function"!=typeof u&&i.pointRadius(u),n):r},n.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(i.pointRadius(+t),+t),n):u},n.projection(null).context(null)}function $o(n,t){for(var e=t[0],r=t[1],i=[_p(e),-mp(e),0],u=0,a=0,o=0,f=n.length;f>o;++o)if(s=(c=n[o]).length)for(var c,s,l=c[s-1],h=l[0],d=l[1]/2+sp,v=_p(d),p=mp(d),g=0;s>g;++g,h=y,v=x,p=M,l=m){var m=c[g],y=m[0],b=m[1]/2+sp,x=_p(b),M=mp(b),_=y-h,w=_>=0?1:-1,k=w*_,N=k>fp,A=v*x;if(eg.add(gp(A*w*_p(k),p*M+A*mp(k))),u+=N?_+w*lp:_,N^h>=e^y>=e){var E=to(Qa(l),Qa(m));io(E);var D=to(i,E);io(D);var C=(N^_>=0?-1:1)*Wa(D[2]);(r>C||r===C&&(E[0]||E[1]))&&(a+=N^_>=0?1:-1)}}var S=(-op>u||op>u&&-op>eg)^1&a;return eg.reset(),S}function Wo(n,t,e,r){return function(i,u){function a(t,e){var r=i(t,e);n(t=r[0],e=r[1])&&u.point(t,e)}function o(n,t){var e=i(n,t);m.point(e[0],e[1])}function f(){_.point=o,m.lineStart()}function c(){_.point=a,m.lineEnd()}function s(n,t){g.push([n,t]);var e=i(n,t);x.point(e[0],e[1])}function l(){x.lineStart(),g=[]}function h(){s(g[0][0],g[0][1]),x.lineEnd();var n,t,e,r,i=x.clean(),a=b.result(),o=a.length;if(g.pop(),d.push(g),g=null,o)if(1&i){if(e=a[0],(t=e.length-1)>0){for(M||(u.polygonStart(),M=!0),u.lineStart(),n=0;t>n;++n)u.point((r=e[n])[0],r[1]);u.lineEnd()}}else o>1&&2&i&&a.push(a.pop().concat(a.shift())),v.push(a.filter(Zo))}var d,v,g,m=t(u),y=i.invert(r[0],r[1]),b=go(),x=t(b),M=!1,_={point:a,lineStart:f,lineEnd:c,polygonStart:function(){_.point=s,_.lineStart=l,_.lineEnd=h,v=[],d=[]},polygonEnd:function(){_.point=a,_.lineStart=f,_.lineEnd=c,v=p(v);var n=$o(d,y);v.length?(M||(u.polygonStart(),M=!0),xo(v,Xo,n,e,u)):n&&(M||(u.polygonStart(),M=!0),u.lineStart(),e(null,null,1,u),u.lineEnd()),M&&(u.polygonEnd(),M=!1),v=d=null},sphere:function(){u.polygonStart(),u.lineStart(),e(null,null,1,u),u.lineEnd(),u.polygonEnd()}};return _}}function Zo(n){return n.length>1}function Xo(n,t){return((n=n.x)[0]<0?n[1]-cp-op:cp-n[1])-((t=t.x)[0]<0?t[1]-cp-op:cp-t[1])}function Jo(n){var t,e=NaN,r=NaN,i=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(u,a){var o=u>0?fp:-fp,f=vp(u-e);vp(f-fp)<op?(n.point(e,r=(r+a)/2>0?cp:-cp),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(o,r),n.point(u,r),t=0):i!==o&&f>=fp&&(vp(e-i)<op&&(e-=i*op),vp(u-o)<op&&(u-=o*op),r=Go(e,r,u,a),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(o,r),t=0),n.point(e=u,r=a),i=o},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}}function Go(n,t,e,r){var i,u,a=_p(n-e);return vp(a)>op?pp((_p(t)*(u=mp(r))*_p(e)-_p(r)*(i=mp(t))*_p(n))/(i*u*a)):(t+r)/2}function Vo(n,t,e,r){var i;if(null==n)i=e*cp,r.point(-fp,i),r.point(0,i),r.point(fp,i),r.point(fp,0),r.point(fp,-i),r.point(0,-i),r.point(-fp,-i),r.point(-fp,0),r.point(-fp,i);else if(vp(n[0]-t[0])>op){var u=n[0]<t[0]?fp:-fp;i=e*u/2,r.point(-u,i),r.point(0,i),r.point(u,i)}else r.point(t[0],t[1])}function Ko(n,t){function e(e,r,i,u){vo(u,n,t,i,e,r)}function r(n,t){return mp(n)*mp(t)>o}function i(n){var t,e,i,o,s;return{lineStart:function(){o=i=!1,s=1},point:function(l,h){var d,v=[l,h],p=r(l,h),g=f?p?0:a(l,h):p?a(l+(0>l?fp:-fp),h):0;if(!t&&(o=i=p)&&n.lineStart(),p!==i&&(d=u(t,v),(yo(t,d)||yo(v,d))&&(v[0]+=op,v[1]+=op,p=r(v[0],v[1]))),p!==i)s=0,p?(n.lineStart(),d=u(v,t),n.point(d[0],d[1])):(d=u(t,v),n.point(d[0],d[1]),n.lineEnd()),t=d;else if(c&&t&&f^p){var m;g&e||!(m=u(v,t,!0))||(s=0,f?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!p||t&&yo(t,v)||n.point(v[0],v[1]),t=v,i=p,e=g},lineEnd:function(){i&&n.lineEnd(),t=null},clean:function(){return s|(o&&i)<<1}}}function u(n,t,e){var r=Qa(n),i=Qa(t),u=[1,0,0],a=to(r,i),f=no(a,a),c=a[0],s=f-c*c;if(!s)return!e&&n;var l=o*f/s,h=-o*c/s,d=to(u,a),v=ro(u,l),p=ro(a,h);eo(v,p);var g=d,m=no(v,g),y=no(g,g),b=m*m-y*(no(v,v)-1);if(!(0>b)){var x=kp(b),M=ro(g,(-m-x)/y);if(eo(M,v),M=Ka(M),!e)return M;var _,w=n[0],k=t[0],N=n[1],A=t[1];w>k&&(_=w,w=k,k=_);var E=k-w,D=vp(E-fp)<op,C=D||op>E;if(!D&&N>A&&(_=N,N=A,A=_),C?D?N+A>0^M[1]<(vp(M[0]-w)<op?N:A):N<=M[1]&&M[1]<=A:E>fp^(w<=M[0]&&M[0]<=k)){var S=ro(g,(-m+x)/y);return eo(S,v),[M,Ka(S)]}}}function a(t,e){var r=f?n:fp-n,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>e?i|=4:e>r&&(i|=8),i}var o=mp(n),f=o>0,c=vp(o)>op;return Wo(r,i,e,f?[0,-n]:[-fp,n-fp])}function Qo(n){function t(){}var e=t.prototype=Object.create(nf.prototype);for(var r in n)e[r]=n[r];return function(n){var e=new t;return e.stream=n,e}}function nf(){}function tf(n,t){return+t?rf(n,t):ef(n)}function ef(n){return Qo({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}})}function rf(n,t){function e(r,i,u,a,o,f,c,s,l,h,d,v,p,g){var m=c-r,y=s-i,b=m*m+y*y;if(b>4*t&&p--){var x=a+h,M=o+d,_=f+v,w=kp(x*x+M*M+_*_),k=Wa(_/=w),N=vp(vp(_)-1)<op||vp(u-l)<op?(u+l)/2:gp(M,x),A=n(N,k),E=A[0],D=A[1],C=E-r,S=D-i,U=y*C-m*S;(U*U/b>t||vp((m*C+y*S)/b-.5)>.3||ug>a*h+o*d+f*v)&&(e(r,i,u,a,o,f,E,D,N,x/=w,M/=w,_,p,g),g.point(E,D),e(E,D,N,x,M,_,c,s,l,h,d,v,p,g))}}return function(t){function r(e,r){e=n(e,r),t.point(e[0],e[1])}function i(){m=NaN,_.point=u,t.lineStart()}function u(r,i){var u=Qa([r,i]),a=n(r,i);e(m,y,g,b,x,M,m=a[0],y=a[1],g=r,b=u[0],x=u[1],M=u[2],ig,t),t.point(m,y)}function a(){_.point=r,t.lineEnd()}function o(){i(),_.point=f,_.lineEnd=c}function f(n,t){u(s=n,t),l=m,h=y,d=b,v=x,p=M,_.point=u}function c(){e(m,y,g,b,x,M,l,h,s,d,v,p,ig,t),_.lineEnd=a,a()}var s,l,h,d,v,p,g,m,y,b,x,M,_={point:r,lineStart:i,lineEnd:a,polygonStart:function(){t.polygonStart(),_.lineStart=o},polygonEnd:function(){t.polygonEnd(),_.lineStart=i}};return _}}function uf(n){return af(function(){return n})()}function af(n){function t(n){return n=s(n[0]*dp,n[1]*dp),[n[0]*g+o,f-n[1]*g]}function e(n){return n=s.invert((n[0]-o)/g,(f-n[1])/g),n&&[n[0]*hp,n[1]*hp]}function r(n,t){return n=a(n,t),[n[0]*g+o,f-n[1]*g]}function i(){s=oo(c=co(M,_,w),a);var n=a(b,x);return o=m-n[0]*g,f=y+n[1]*g,u()}function u(){return v=p=null,t}var a,o,f,c,s,l,h,d,v,p,g=150,m=480,y=250,b=0,x=0,M=0,_=0,w=0,k=null,N=rg,A=null,E=Ao,D=.5,C=tf(r,D);return t.stream=function(n){return v&&p===n?v:v=ag(N(c,C(E(p=n))))},t.clipAngle=function(n){return arguments.length?(N=+n?Ko(k=n*dp,6*dp):(k=null,rg),u()):k*hp},t.clipExtent=function(n){return arguments.length?(E=null==n?(A=l=h=d=null,Ao):_o(A=+n[0][0],l=+n[0][1],h=+n[1][0],d=+n[1][1]),u()):null==A?null:[[A,l],[h,d]]},t.scale=function(n){return arguments.length?(g=+n,i()):g},t.translate=function(n){return arguments.length?(m=+n[0],y=+n[1],i()):[m,y]},t.center=function(n){return arguments.length?(b=n[0]%360*dp,x=n[1]%360*dp,i()):[b*hp,x*hp]},t.rotate=function(n){return arguments.length?(M=n[0]%360*dp,_=n[1]%360*dp,w=n.length>2?n[2]%360*dp:0,i()):[M*hp,_*hp,w*hp]},t.precision=function(n){return arguments.length?(C=tf(r,D=n*n),u()):kp(D)},function(){return a=n.apply(this,arguments),t.invert=a.invert&&e,i()}}function of(n){var t=0,e=fp/3,r=af(n),i=r(t,e);return i.parallels=function(n){return arguments.length?r(t=n[0]*dp,e=n[1]*dp):[t*hp,e*hp]},i}function ff(n,t){function e(n,t){var e=kp(u-2*i*_p(t))/i;return[e*_p(n*=i),a-e*mp(n)]}var r=_p(n),i=(r+_p(t))/2,u=1+r*(2*i-r),a=kp(u)/i;return e.invert=function(n,t){var e=a-t;return[gp(n,e)/i,Wa((u-(n*n+e*e)*i*i)/(2*i))]},e}function cf(){return of(ff).scale(151).translate([480,347])}function sf(){return cf().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function lf(n){var t=n.length;return{point:function(e,r){for(var i=-1;++i<t;)n[i].point(e,r)},sphere:function(){for(var e=-1;++e<t;)n[e].sphere()},lineStart:function(){for(var e=-1;++e<t;)n[e].lineStart()},lineEnd:function(){for(var e=-1;++e<t;)n[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<t;)n[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<t;)n[e].polygonEnd()}}}function hf(){function n(n){var t=n[0],e=n[1];return a=null,r.point(t,e),a||(i.point(t,e),a)||(u.point(t,e),a)}var t,e,r,i,u,a,o=sf(),f=cf().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=cf().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(n,t){a=[n,t]}};return n.invert=function(n){var t=o.scale(),e=o.translate(),r=(n[0]-e[0])/t,i=(n[1]-e[1])/t;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?f:i>=.166&&.234>i&&r>=-.214&&-.115>r?c:o).invert(n)},n.stream=function(n){return t&&e===n?t:t=lf([o.stream(e=n),f.stream(n),c.stream(n)])},n.precision=function(t){return arguments.length?(o.precision(t),f.precision(t),c.precision(t),n):o.precision()},n.scale=function(t){return arguments.length?(o.scale(t),f.scale(.35*t),c.scale(t),n.translate(o.translate())):o.scale()},n.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),a=+t[0],l=+t[1];return r=o.translate(t).clipExtent([[a-.455*e,l-.238*e],[a+.455*e,l+.238*e]]).stream(s),i=f.translate([a-.307*e,l+.201*e]).clipExtent([[a-.425*e+op,l+.12*e+op],[a-.214*e-op,l+.234*e-op]]).stream(s),u=c.translate([a-.205*e,l+.212*e]).clipExtent([[a-.214*e+op,l+.166*e+op],[a-.115*e-op,l+.234*e-op]]).stream(s),n},n.scale(1070)}function df(n){return function(t,e){var r=mp(t),i=mp(e),u=n(r*i);return[u*i*_p(t),u*_p(e)]}}function vf(n){return function(t,e){var r=kp(t*t+e*e),i=n(r),u=_p(i),a=mp(i);return[gp(t*u,r*a),Wa(r&&e*u/r)]}}function pf(){return uf(og).scale(120).clipAngle(179.999)}function gf(){return uf(fg).scale(480/lp).clipAngle(179.999)}function mf(n,t){return[n,xp(Np((cp+t)/2))]}function yf(){return bf(mf)}function bf(n){var t,e=uf(n),r=e.scale,i=e.translate,u=e.clipExtent;return e.scale=function(n){return arguments.length?(r(n),t&&e.clipExtent(null),e):r()},e.translate=function(n){return arguments.length?(i(n),t&&e.clipExtent(null),e):i()},e.clipExtent=function(n){if(!arguments.length)return t?null:u();if(t=null==n){var a=fp*r(),o=i();n=[[o[0]-a,o[1]-a],[o[0]+a,o[1]+a]]}return u(n),e},e.clipExtent(null).scale(961/lp)}function xf(n){return Np((cp+n)/2)}function Mf(n,t){function e(n,t){u>0?-cp+op>t&&(t=-cp+op):t>cp-op&&(t=cp-op);var e=u/Mp(xf(t),i);return[e*_p(i*n),u-e*mp(i*n)]}var r=mp(n),i=n===t?_p(n):xp(r/mp(t))/xp(xf(t)/xf(n)),u=r*Mp(xf(n),i)/i;return i?(e.invert=function(n,t){var e=u-t,r=wp(i)*kp(n*n+e*e);return[gp(n,e)/i,2*pp(Mp(u/r,1/i))-cp]},e):mf}function _f(){return of(Mf)}function wf(n,t){return[n,t]}function kf(){return uf(wf).scale(480/fp)}function Nf(n,t){function e(n,t){var e=u-t,r=i*n;return[e*_p(r),u-e*mp(r)]}var r=mp(n),i=n===t?_p(n):(r-mp(t))/(t-n),u=r/i+n;return vp(i)<op?wf:(e.invert=function(n,t){var e=u-t;return[gp(n,e)/i,u-wp(i)*kp(n*n+e*e)]},e)}function Af(){return of(Nf).scale(128).translate([480,280])}function Ef(n,t){var e=mp(t),r=mp(n)*e;return[e*_p(n)/r,_p(t)/r]}function Df(){return uf(Ef).scale(139).clipAngle(60)}function Cf(n,t){return[mp(t)*_p(n),_p(t)]}function Sf(){return uf(Cf).scale(240).clipAngle(90+op)}function Uf(n,t){var e=mp(t),r=1+mp(n)*e;return[e*_p(n)/r,_p(t)/r]}function Tf(){return uf(Uf).scale(240).clipAngle(142)}function Rf(n,t){return[xp(Np((cp+t)/2)),-n]}function Ff(){var n=bf(Rf),t=n.center,e=n.rotate;return n.center=function(n){return arguments.length?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return arguments.length?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}function qf(n){_n.call(this,null,n)}function Lf(n){_n.call(this,null,n)}function zf(n){_n.call(this,[],n),this.generator=No()}function Of(n){_n.call(this,null,n),this.modified(!0)}function Pf(n){var t=(n||"mercator").toLowerCase(),e=hg[t];return t&&hg.hasOwnProperty(t)||P("Unrecognized projection type: "+n),e=e(),e.type=t,e}function jf(n,t){return n.parent===t.parent?1:2}function If(n){return n.reduce(Yf,0)/n.length}function Yf(n,t){return n+t.x}function Hf(n){return 1+n.reduce(Bf,0)}function Bf(n,t){return Math.max(n,t.y)}function $f(n){for(var t;t=n.children;)n=t[0];return n}function Wf(n){for(var t;t=n.children;)n=t[t.length-1];return n}function Zf(){function n(n){var u,a=0;n.eachAfter(function(n){var e=n.children;e?(n.x=If(e),n.y=Hf(e)):(n.x=u?a+=t(n,u):0,n.y=0,u=n)});var o=$f(n),f=Wf(n),c=o.x-t(o,f)/2,s=f.x+t(f,o)/2;return n.eachAfter(i?function(t){t.x=(t.x-n.x)*e,t.y=(n.y-t.y)*r}:function(t){t.x=(t.x-c)/(s-c)*e,t.y=(1-(n.y?t.y/n.y:1))*r})}var t=jf,e=1,r=1,i=!1;return n.separation=function(e){return arguments.length?(t=e,n):t},n.size=function(t){return arguments.length?(i=!1,e=+t[0],r=+t[1],n):i?null:[e,r]},n.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],r=+t[1],n):i?[e,r]:null},n}function Xf(n){var t,e,r,i,u=this,a=[u];do for(t=a.reverse(),a=[];u=t.pop();)if(n(u),e=u.children)for(r=0,i=e.length;i>r;++r)a.push(e[r]);while(a.length);return this}function Jf(n){for(var t,e,r=this,i=[r];r=i.pop();)if(n(r),t=r.children)for(e=t.length-1;e>=0;--e)i.push(t[e]);return this}function Gf(n){for(var t,e,r,i=this,u=[i],a=[];i=u.pop();)if(a.push(i),t=i.children)for(e=0,r=t.length;r>e;++e)u.push(t[e]);for(;i=a.pop();)n(i);return this}function Vf(n){return this.eachAfter(function(t){for(var e=+n(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)e+=r[i].value;t.value=e})}function Kf(n){return this.eachBefore(function(t){t.children&&t.children.sort(n)})}function Qf(n){for(var t=this,e=nc(t,n),r=[t];t!==e;)t=t.parent,r.push(t);for(var i=r.length;n!==e;)r.splice(i,0,n),n=n.parent;return r}function nc(n,t){if(n===t)return n;var e=n.ancestors(),r=t.ancestors(),i=null;for(n=e.pop(),t=r.pop();n===t;)i=n,n=e.pop(),t=r.pop();return i}function tc(){for(var n=this,t=[n];n=n.parent;)t.push(n);return t}function ec(){var n=[];return this.each(function(t){n.push(t)}),n}function rc(){var n=[];return this.eachBefore(function(t){t.children||n.push(t)}),n}function ic(){var n=this,t=[];return n.each(function(e){e!==n&&t.push({source:e.parent,target:e})}),t}function uc(n,t){var e,r,i,u,a,o=new sc(n),f=+n.value&&(o.value=n.value),c=[o];for(null==t&&(t=oc);e=c.pop();)if(f&&(e.value=+e.data.value),(i=t(e.data))&&(a=i.length))for(e.children=new Array(a),u=a-1;u>=0;--u)c.push(r=e.children[u]=new sc(i[u])),r.parent=e,r.depth=e.depth+1;return o.eachBefore(cc)}function ac(){return uc(this).eachBefore(fc)}function oc(n){return n.children}function fc(n){n.data=n.data.data}function cc(n){var t=0;do n.height=t;while((n=n.parent)&&n.height<++t)}function sc(n){this.data=n,this.depth=this.height=0,this.parent=null}function lc(n){this._=n,this.next=null}function hc(n){for(var t,e=(n=n.slice()).length,r=null,i=r;e;){var u=new lc(n[e-1]);i=i?i.next=u:r=u,n[t]=n[--e]}return{head:r,tail:i}}function dc(n){return pc(hc(n),[])}function vc(n,t){var e=t.x-n.x,r=t.y-n.y,i=n.r-t.r;return i*i+1e-6>e*e+r*r}function pc(n,t){var e,r,i,u=null,a=n.head;switch(t.length){case 1:e=gc(t[0]);break;case 2:e=mc(t[0],t[1]);break;case 3:e=yc(t[0],t[1],t[2])}for(;a;)i=a._,r=a.next,e&&vc(e,i)?u=a:(u?(n.tail=u,u.next=null):n.head=n.tail=null,t.push(i),e=pc(n,t),t.pop(),n.head?(a.next=n.head,n.head=a):(a.next=null,n.head=n.tail=a),u=n.tail,u.next=r),a=r;return n.tail=u,e}function gc(n){return{x:n.x,y:n.y,r:n.r}}function mc(n,t){var e=n.x,r=n.y,i=n.r,u=t.x,a=t.y,o=t.r,f=u-e,c=a-r,s=o-i,l=Math.sqrt(f*f+c*c);return{x:(e+u+f/l*s)/2,y:(r+a+c/l*s)/2,r:(l+i+o)/2}}function yc(n,t,e){var r=n.x,i=n.y,u=n.r,a=t.x,o=t.y,f=t.r,c=e.x,s=e.y,l=e.r,h=2*(r-a),d=2*(i-o),v=2*(f-u),p=r*r+i*i-u*u-a*a-o*o+f*f,g=2*(r-c),m=2*(i-s),y=2*(l-u),b=r*r+i*i-u*u-c*c-s*s+l*l,x=g*d-h*m,M=(d*b-m*p)/x-r,_=(m*v-d*y)/x,w=(g*p-h*b)/x-i,k=(h*y-g*v)/x,N=_*_+k*k-1,A=2*(M*_+w*k+u),E=M*M+w*w-u*u,D=(-A-Math.sqrt(A*A-4*N*E))/(2*N);return{x:M+_*D+r,y:w+k*D+i,r:D}}function bc(n,t,e){var r=n.x,i=n.y,u=t.r+e.r,a=n.r+e.r,o=t.x-r,f=t.y-i,c=o*o+f*f;if(c){var s=.5+((a*=a)-(u*=u))/(2*c),l=Math.sqrt(Math.max(0,2*u*(a+c)-(a-=c)*a-u*u))/(2*c);e.x=r+s*o+l*f,e.y=i+s*f-l*o}else e.x=r+a,e.y=i}function xc(n,t){var e=t.x-n.x,r=t.y-n.y,i=n.r+t.r;return i*i>e*e+r*r}function Mc(n,t,e){var r=n.x-t,i=n.y-e;return r*r+i*i}function _c(n){this._=n,this.next=null,this.previous=null}function wc(n){if(!(i=n.length))return 0;var t,e,r,i;if(t=n[0],t.x=0,t.y=0,!(i>1))return t.r;if(e=n[1],t.x=-e.r,e.x=t.r,e.y=0,!(i>2))return t.r+e.r;bc(e,t,r=n[2]);var u,a,o,f,c,s,l,h=t.r*t.r,d=e.r*e.r,v=r.r*r.r,p=h+d+v,g=h*t.x+d*e.x+v*r.x,m=h*t.y+d*e.y+v*r.y;t=new _c(t),e=new _c(e),r=new _c(r),t.next=r.previous=e,e.next=t.previous=r,r.next=e.previous=t;n:for(o=3;i>o;++o){if(bc(t._,e._,r=n[o]),r=new _c(r),(c=t.previous)===(f=e.next)){if(xc(f._,r._)){t=e,e=f,--o;continue n}}else{s=f._.r,l=c._.r;do if(l>=s){if(xc(f._,r._)){e=f,t.next=e,e.previous=t,--o;continue n}f=f.next,s+=f._.r}else{if(xc(c._,r._)){t=c,t.next=e,e.previous=t,--o;continue n}c=c.previous,l+=c._.r}while(f!==c.next)}for(r.previous=t,r.next=e,t.next=e.previous=e=r,p+=v=r._.r*r._.r,g+=v*r._.x,m+=v*r._.y,h=Mc(t._,u=g/p,a=m/p);(r=r.next)!==e;)(v=Mc(r._,u,a))<h&&(t=r,h=v);e=t.next}for(t=[e._],r=e;(r=r.next)!==e;)t.push(r._);for(r=dc(t),o=0;i>o;++o)t=n[o],t.x-=r.x,t.y-=r.y;return r.r}function kc(n){return null==n?null:Nc(n)}function Nc(n){if("function"!=typeof n)throw new Error;return n}function Ac(){return 0}function Ec(n){return function(){return n}}function Dc(n){return Math.sqrt(n.value)}function Cc(){function n(n){return n.x=e/2,n.y=r/2,t?n.eachBefore(Sc(t)).eachAfter(Uc(i,.5)).eachBefore(Tc(1)):n.eachBefore(Sc(Dc)).eachAfter(Uc(Ac,1)).eachAfter(Uc(i,n.r/Math.min(e,r))).eachBefore(Tc(Math.min(e,r)/(2*n.r))),n}var t=null,e=1,r=1,i=Ac;return n.radius=function(e){return arguments.length?(t=kc(e),n):t},n.size=function(t){return arguments.length?(e=+t[0],r=+t[1],n):[e,r]},n.padding=function(t){return arguments.length?(i="function"==typeof t?t:Ec(+t),n):i},n}function Sc(n){return function(t){t.children||(t.r=Math.max(0,+n(t)||0));
}}function Uc(n,t){return function(e){if(r=e.children){var r,i,u,a=r.length,o=n(e)*t||0;if(o)for(i=0;a>i;++i)r[i].r+=o;if(u=wc(r),o)for(i=0;a>i;++i)r[i].r-=o;e.r=u+o}}}function Tc(n){return function(t){var e=t.parent;t.r*=n,e&&(t.x=e.x+n*t.x,t.y=e.y+n*t.y)}}function Rc(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function Fc(n,t,e,r,i){for(var u,a=n.children,o=-1,f=a.length,c=n.value&&(r-t)/n.value;++o<f;)u=a[o],u.y0=e,u.y1=i,u.x0=t,u.x1=t+=u.value*c}function qc(){function n(n){var a=n.height+1;return n.x0=n.y0=i,n.x1=e,n.y1=r/a,n.eachBefore(t(r,a)),u&&n.eachBefore(Rc),n}function t(n,t){return function(e){e.children&&Fc(e,e.x0,n*(e.depth+1)/t,e.x1,n*(e.depth+2)/t);var r=e.x0,u=e.y0,a=e.x1-i,o=e.y1-i;r>a&&(r=a=(r+a)/2),u>o&&(u=o=(u+o)/2),e.x0=r,e.y0=u,e.x1=a,e.y1=o}}var e=1,r=1,i=0,u=!1;return n.round=function(t){return arguments.length?(u=!!t,n):u},n.size=function(t){return arguments.length?(e=+t[0],r=+t[1],n):[e,r]},n.padding=function(t){return arguments.length?(i=+t,n):i},n}function Lc(n){return n.id}function zc(n){return n.parentId}function Oc(){function n(n){var r,i,u,a,o,f,c,s=n.length,l=new Array(s),h={};for(i=0;s>i;++i)r=n[i],o=l[i]=new sc(r),null!=(f=t(r,i,n))&&(f+="")&&(c=vg+(o.id=f),h[c]=c in h?gg:o);for(i=0;s>i;++i)if(o=l[i],f=e(n[i],i,n),null!=f&&(f+="")){if(a=h[vg+f],!a)throw new Error("missing: "+f);if(a===gg)throw new Error("ambiguous: "+f);a.children?a.children.push(o):a.children=[o],o.parent=a}else{if(u)throw new Error("multiple roots");u=o}if(!u)throw new Error("no root");if(u.parent=pg,u.eachBefore(function(n){n.depth=n.parent.depth+1,--s}).eachBefore(cc),u.parent=null,s>0)throw new Error("cycle");return u}var t=Lc,e=zc;return n.id=function(e){return arguments.length?(t=Nc(e),n):t},n.parentId=function(t){return arguments.length?(e=Nc(t),n):e},n}function Pc(n,t){return n.parent===t.parent?1:2}function jc(n){var t=n.children;return t?t[0]:n.t}function Ic(n){var t=n.children;return t?t[t.length-1]:n.t}function Yc(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Hc(n){for(var t,e=0,r=0,i=n.children,u=i.length;--u>=0;)t=i[u],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function Bc(n,t,e){return n.a.parent===t.parent?n.a:e}function $c(n,t){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Wc(n){for(var t,e,r,i,u,a=new $c(n,0),o=[a];t=o.pop();)if(r=t._.children)for(t.children=new Array(u=r.length),i=u-1;i>=0;--i)o.push(e=t.children[i]=new $c(r[i],i)),e.parent=t;return(a.parent=new $c(null,0)).children=[a],a}function Zc(){function n(n){var r=Wc(n);if(r.eachAfter(t),r.parent.m=-r.z,r.eachBefore(e),f)n.eachBefore(i);else{var c=n,s=n,l=n;n.eachBefore(function(n){n.x<c.x&&(c=n),n.x>s.x&&(s=n),n.depth>l.depth&&(l=n)});var h=c===s?1:u(c,s)/2,d=h-c.x,v=a/(s.x+h+d),p=o/(l.depth||1);n.eachBefore(function(n){n.x=(n.x+d)*v,n.y=n.depth*p})}return n}function t(n){var t=n.children,e=n.parent.children,i=n.i?e[n.i-1]:null;if(t){Hc(n);var a=(t[0].z+t[t.length-1].z)/2;i?(n.z=i.z+u(n._,i._),n.m=n.z-a):n.z=a}else i&&(n.z=i.z+u(n._,i._));n.parent.A=r(n,i,n.parent.A||e[0])}function e(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function r(n,t,e){if(t){for(var r,i=n,a=n,o=t,f=i.parent.children[0],c=i.m,s=a.m,l=o.m,h=f.m;o=Ic(o),i=jc(i),o&&i;)f=jc(f),a=Ic(a),a.a=n,r=o.z+l-i.z-c+u(o._,i._),r>0&&(Yc(Bc(o,n,e),n,r),c+=r,s+=r),l+=o.m,c+=i.m,h+=f.m,s+=a.m;o&&!Ic(a)&&(a.t=o,a.m+=l-s),i&&!jc(f)&&(f.t=i,f.m+=c-h,e=n)}return e}function i(n){n.x*=a,n.y=n.depth*o}var u=Pc,a=1,o=1,f=null;return n.separation=function(t){return arguments.length?(u=t,n):u},n.size=function(t){return arguments.length?(f=!1,a=+t[0],o=+t[1],n):f?null:[a,o]},n.nodeSize=function(t){return arguments.length?(f=!0,a=+t[0],o=+t[1],n):f?[a,o]:null},n}function Xc(n,t,e,r,i){for(var u,a=n.children,o=-1,f=a.length,c=n.value&&(i-e)/n.value;++o<f;)u=a[o],u.x0=t,u.x1=r,u.y0=e,u.y1=e+=u.value*c}function Jc(n,t,e,r,i,u){for(var a,o,f,c,s,l,h,d,v,p,g,m,y=[],b=t.children,x=0,M=b.length,_=t.value;M>x;){for(c=i-e,s=u-r,h=d=l=b[x].value,g=Math.max(s/c,c/s)/(_*n),m=l*l*g,p=Math.max(d/m,m/h),f=x+1;M>f;++f){if(l+=o=b[f].value,h>o&&(h=o),o>d&&(d=o),m=l*l*g,v=Math.max(d/m,m/h),v>p){l-=o;break}p=v}y.push(a={value:l,dice:s>c,children:b.slice(x,f)}),a.dice?Fc(a,e,r,i,_?r+=s*l/_:u):Xc(a,e,r,_?e+=c*l/_:i,u),_-=l,x=f}return y}function Gc(){function n(n){return n.x0=n.y0=0,n.x1=i,n.y1=u,n.eachBefore(t),a=[0],r&&n.eachBefore(Rc),n}function t(n){var t=a[n.depth],r=n.x0+t,i=n.y0+t,u=n.x1-t,h=n.y1-t;r>u&&(r=u=(r+u)/2),i>h&&(i=h=(i+h)/2),n.x0=r,n.y0=i,n.x1=u,n.y1=h,n.children&&(t=a[n.depth+1]=o(n)/2,r+=l(n)-t,i+=f(n)-t,u-=c(n)-t,h-=s(n)-t,r>u&&(r=u=(r+u)/2),i>h&&(i=h=(i+h)/2),e(n,r,i,u,h))}var e=yg,r=!1,i=1,u=1,a=[0],o=Ac,f=Ac,c=Ac,s=Ac,l=Ac;return n.round=function(t){return arguments.length?(r=!!t,n):r},n.size=function(t){return arguments.length?(i=+t[0],u=+t[1],n):[i,u]},n.tile=function(t){return arguments.length?(e=Nc(t),n):e},n.padding=function(t){return arguments.length?n.paddingInner(t).paddingOuter(t):n.paddingInner()},n.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:Ec(+t),n):o},n.paddingOuter=function(t){return arguments.length?n.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):n.paddingTop()},n.paddingTop=function(t){return arguments.length?(f="function"==typeof t?t:Ec(+t),n):f},n.paddingRight=function(t){return arguments.length?(c="function"==typeof t?t:Ec(+t),n):c},n.paddingBottom=function(t){return arguments.length?(s="function"==typeof t?t:Ec(+t),n):s},n.paddingLeft=function(t){return arguments.length?(l="function"==typeof t?t:Ec(+t),n):l},n}function Vc(n,t,e,r,i){function u(n,t,e,r,i,a,o){if(n>=t-1){var c=f[n];return c.x0=r,c.y0=i,c.x1=a,c.y1=o,void 0}for(var l=s[n],h=e/2+l,d=n+1,v=t-1;v>d;){var p=d+v>>>1;s[p]<h?d=p+1:v=p}var g=s[d]-l,m=e-g;if(o-i>a-r){var y=(i*m+o*g)/e;u(n,d,g,r,i,a,y),u(d,t,m,r,y,a,o)}else{var b=(r*m+a*g)/e;u(n,d,g,r,i,b,o),u(d,t,m,b,i,a,o)}}var a,o,f=n.children,c=f.length,s=new Array(c+1);for(s[0]=o=a=0;c>a;++a)s[a+1]=o+=f[a].value;u(0,c,n.value,t,e,r,i)}function Kc(n,t,e,r,i){(1&n.depth?Xc:Fc)(n,t,e,r,i)}function Qc(n){_n.call(this,null,n)}function ns(n){return n.values}function ts(n){_n.call(this,null,n)}function es(n){_n.call(this,{},n)}function rs(n){var t;return n.parent&&(t=n.parent.data)&&"_id"in t&&t}function is(n){var t=n||"tidy";return kg.has(t)?kg.get(t)():void P("Unrecognized Tree layout method: "+t)}function us(){var n=Gc();return n.ratio=function(t){var e=n.tile();e.ratio&&n.tile(e.ratio(t))},n.method=function(t){wg.has(t)?n.tile(wg.get(t)):P("Unrecognized Treemap layout method: "+t)},n}function as(n){_n.call(this,null,n)}function os(n){for(var t,e="",r=0,i=n.length;i>r;++r)t='"'+n[r]+'"',e+="if("+t+" in _) layout["+t+"](_["+t+"]);";return Function("layout","_",e)}function fs(n){for(var t="var t=node.data;",e=0,r=n.length;r>e;++e)t+='t["'+n[e]+'"]=node["'+n[e]+'"];';return k(Function("node",t),n)}function cs(n){as.call(this,n)}function ss(n){as.call(this,n)}function ls(n){as.call(this,n)}function hs(n){as.call(this,n)}var ds="2.0.0",vs=u(i),ps=vs.right,gs=vs.left,ms=Math.sqrt(50),ys=Math.sqrt(10),bs=Math.sqrt(2),xs=Array.isArray,Ms=[],_s=T("id"),ws=k(function(n){return n},Ms,"identity"),ks=k(function(){return 0},Ms,"zero"),Ns=k(function(){return 1},Ms,"one"),As=k(function(){return!0},Ms,"true"),Es=k(function(){return!1},Ms,"false"),Ds=0,Cs=1,Ss=2,Us=3,Ts=1,Rs=Object.freeze({reset:X,id:J,ingest:V,replace:nn,derive:K,rederive:Q}),Fs={},qs=1,Ls=2,zs=4,Os=qs|Ls,Ps=qs|zs,js=qs|Ls|zs,Is=8,Ys=16,Hs=32,Bs=rn.prototype;Bs.StopPropagation=Fs,Bs.ADD=qs,Bs.REM=Ls,Bs.MOD=zs,Bs.ADD_REM=Os,Bs.ADD_MOD=Ps,Bs.ALL=js,Bs.REFLOW=Is,Bs.SOURCE=Ys,Bs.NO_SOURCE=Hs,Bs.fork=function(n){return new rn(this.dataflow).init(this,n)},Bs.init=function(n,t){var e=this;return e.stamp=n.stamp,e.source=t&Hs?null:n.source,e.encode=n.encode,n.fields&&(e.fields=n.fields),e.add=t&qs?(e.addF=n.addF,n.add):(e.addF=null,[]),e.rem=t&Ls?(e.remF=n.remF,n.rem):(e.remF=null,[]),e.mod=t&zs?(e.modF=n.modF,n.mod):(e.modF=null,[]),e},Bs.runAfter=function(n){this.dataflow.runAfter(this,n)},Bs.changed=function(n){var t=n||js;return t&qs&&this.add.length||t&Ls&&this.rem.length||t&zs&&this.mod.length},Bs.reflow=function(){var n=this.add.length,t=this.source&&this.source.length;return t&&t!==n&&(n+=this.mod.length,this.mod=this.source,t>n&&this.filter(zs,an(this,qs))),this},Bs.modifies=function(n){var t=q(n),e=this.fields||(this.fields={});return t.forEach(function(n){e[n]=!0}),this},Bs.modified=function(n){var t=this.fields;return this.mod.length&&t?xs(n)?n.some(function(n){return t[n]}):t[n]:!1},Bs.filter=function(n,t){var e=this;return n&qs&&(e.addF=un(e.addF,t)),n&Ls&&(e.remF=un(e.remF,t)),n&zs&&(e.modF=un(e.modF,t)),e},Bs.materialize=function(n){n=n||js;var t=this;return n&qs&&t.addF&&(t.add=t.add.filter(t.addF),t.addF=null),n&Ls&&t.remF&&(t.rem=t.rem.filter(t.remF),t.remF=null),n&zs&&t.modF&&(t.mod=t.mod.filter(t.modF),t.modF=null),t},Bs.visit=function(n,t){if(n&Ys)return this.source.forEach(t),this;var e,r,i=t;return n&qs&&W(this.add,this.addF,i),n&Ls&&W(this.rem,this.remF,i),n&zs&&W(this.mod,this.modF,i),n&Is&&(e=this.source)&&(r=this.add.length+this.mod.length,r===e||(r?W(e,an(this,Ps),i):e.forEach(t))),this};var $s=Y(on,rn);$s.fork=function(){return arguments.length&&0!==arguments[0]&&P("MultiPulse fork does not support tuple change sets."),new rn(this.dataflow).init(this,0)},$s.changed=function(n){return this.changes&n},$s.modified=function(n){var t=this,e=t.fields;return e&&t.changes&t.MOD?xs(n)?n.some(function(n){return e[n]}):e[n]:0},$s.filter=function(){P("MultiPulse does not support filtering.")},$s.materialize=function(){P("MultiPulse does not support materialization.")},$s.visit=function(n,t){var e,r,i=this.pulses;for(e=0,r=i.length;r>e;++e)i[e].stamp===this.stamp&&i[e].visit(n,t);return this};var Ws="_:mod:_",Zs=fn.prototype;Zs.set=function(n,t,e,r){var i=this,u=i[n],a=i[Ws];return null!=t&&t>=0?(u[t]!==e||r)&&(u[t]=e,a[cn(n,t)]=1,a[n]=1):(u!==e||r)&&(i[n]=e,a[n]=1,xs(e)&&e.forEach(function(t,e){a[cn(n,e)]=1})),i},Zs.modified=function(n,t){var e,r=this[Ws];if(!arguments.length){for(e in r)if(r[e])return!0;return!1}if(xs(n)){for(e=0;e<n.length;++e)if(r[n[e]])return!0;return!1}return!!r[cn(n,t)]},Zs.clear=function(){return this[Ws]={},this};var Xs=0,Js="pulse",Gs=new fn,Vs=1,Ks=2,Qs=sn.prototype;Qs.targets=function(){return this._targets||(this._targets=Z(_s))},Qs.set=function(n){return this.value!==n?(this.value=n,1):0},Qs.skip=ln(Vs),Qs.modified=ln(Ks),Qs.parameters=function(n,t){function e(n,e,r){r instanceof sn?(r!==o&&t&&r.targets().add(o),c.push({op:r,name:n,index:e})):f.set(n,e,r)}t=t!==!1;var r,i,u,a,o=this,f=o._argval=o._argval||new fn,c=o._argops=o._argops||[];for(r in n)if(i=n[r],r===Js)q(i).forEach(function(n){n instanceof sn?n!==o&&n.targets().add(o):P("Pulse parameters must be operator instances.")}),o.source=i;else if(xs(i))for(f.set(r,-1,Array(u=i.length)),a=0;u>a;++a)e(r,a,i[a]);else e(r,-1,i);return this.marshall().clear(),o},Qs.marshall=function(n){var t,e,r,i,u,a=this._argval||Gs,o=this._argops;if(o&&(r=o.length))for(e=0;r>e;++e)t=o[e],i=t.op,u=i.modified()&&i.stamp===n,a.set(t.name,t.index,i.value,u);return a},Qs.evaluate=function(n){if(this._update){var t=this.marshall(n.stamp),e=this._update(t,n);if(t.clear(),e!==this.value)this.value=e;else if(!this.modified())return n.StopPropagation}},Qs.run=function(n){if(n.stamp<=this.stamp)return n.StopPropagation;var t=this.skip()?(this.skip(!1),0):this.evaluate(n);return this.stamp=n.stamp,this.pulse=t||n};var nl=0,tl=hn.prototype;tl._filter=As,tl._apply=ws,tl.targets=function(){return this._targets||(this._targets=Z(_s))},tl.consume=function(n){return arguments.length?(this._consume=!!n,this):!!this._consume},tl.receive=function(n){if(this._filter(n)){for(var t=this.value=this._apply(n),e=this._targets,r=e?e.length:0,i=0;r>i;++i)e[i].receive(t);this._consume&&(n.preventDefault(),n.stopPropagation())}},tl.filter=function(n){var t=dn(n);return this.targets().add(t),t},tl.apply=function(n){var t=dn(null,n);return this.targets().add(t),t},tl.merge=function(){var n=dn();this.targets().add(n);for(var t=0,e=arguments.length;e>t;++t)arguments[t].targets().add(n);return n},tl.throttle=function(n){var t=-1;return this.filter(function(){var e=Date.now();return e-t>n?(t=e,1):0})},tl.debounce=function(n){function t(){var n=r.dataflow;e.receive(r),r=null,i=null,n&&n.run&&n.run()}var e=dn(),r=null,i=null;return this.targets().add(dn(null,null,function(e){r=e,i&&clearTimeout(i),i=setTimeout(t,n)})),e},tl.between=function(n,t){var e=!1;return n.targets().add(dn(null,null,function(){e=!0})),t.targets().add(dn(null,null,function(){e=!1})),this.filter(function(){return e})};var el=vn.prototype;el.size=function(){return this.nodes.length},el.clear=function(){return this.nodes=[],this},el.peek=function(){return this.nodes[0]},el.push=function(n){var t=this.nodes;return t.push(n),pn(t,0,t.length-1,this.cmp)},el.pop=function(){var n,t=this.nodes,e=t.pop();return t.length?(n=t[0],t[0]=e,gn(t,0,this.cmp)):n=e,n},el.replace=function(n){var t=this.nodes,e=t[0];return t[0]=n,gn(t,0,this.cmp),e},el.pushpop=function(n){var t=this.nodes,e=t[0];return t.length&&this.cmp(e,n)<0&&(t[0]=n,n=e,gn(t,0,this.cmp)),n};var rl=1,il={skip:!1,force:!1},ul={skip:!0},al=mn.prototype;al.stamp=function(){return this._clock},al.touch=function(n,t){var e=t||il;return this._touched.add(n),e.skip&&n.skip(!0),this},al.add=function(n,t,e,r){var i=n instanceof sn?n:z(n)?n.prototype instanceof sn?new n(t,e):new sn(null,n,t,e):new sn(n,t,e,r);return i.rank=++rl,this.touch(i),i},al.update=function(n,t,e){var r=e||il;return(n.set(t)||r.force)&&this.touch(n,r),this},al.pulse=function(n,t,e){var r=new rn(this,this._clock+1);return r.target=n,this._pulses[n.id]=t.pulse(r,n.value),this.touch(n,e||il)},al.events=function(n,t,e,r){var i,u=this,a=dn(e,r),o=function(n){n.dataflow=u,a.receive(n),u.run()};i="string"==typeof n&&"undefined"!=typeof document?document.querySelectorAll(n):q(n);for(var f=0,c=i.length;c>f;++f)i[f].addEventListener(t,o);return a},al.on=function(n,t,e,r,i){var u=n instanceof sn?bn:yn;return u(this,n,t,e,r,i),this},al.run=function(){if(!this._touched.length)return 0;var n,t,e,r=this,i=new vn(function(n,t){return n.rank-t.rank}),u=r._pulses,a=new rn(r,++r._clock),o=r.logLevel(),f=0;r._running=!0,o>=Ss&&(e=Date.now(),r.debug("-- START PROPAGATION ("+a.stamp+") -----")),r._touched.forEach(function(n){u[n.id]||(u[n.id]=a),i.push(n)}),r._touched=Z(_s),r._pulses={};try{for(;i.size()>0;)n=i.pop(),t=n.run(xn(r,r._clock,n,u)),o>=Us&&r.debug("Op: "+n.id+", rank:"+n.rank+" "+n.constructor.name,t===Fs?"STOP":{pulse:t},{value:n.value}),t!==Fs&&(a=t,n._targets&&n._targets.forEach(function(n){u[n.id]||(i.push(n),u[n.id]=a)})),++f}catch(c){r.error(c)}return r._running=!1,r._postrun.length&&(r._postrun.forEach(function(n){try{n()}catch(t){r.error(t)}}),r._postrun=[]),o>=Ss&&(e=Date.now()-e,r.info("> Pulse "+a.stamp+": "+f+" operators; "+e+"ms")),f},al.runAfter=function(n,t){if(n.stamp!==this._clock&&this.error("Can only schedule runAfter on the current timestamp."),this._running)this._postrun.push(t);else try{t()}catch(e){this.error(e)}},al.error=function(n){throw n},al.warn=Mn("warn"),al.info=Mn("info"),al.debug=Mn("debug"),al.logLevel=Mn("level");var ol=Y(_n,sn);ol.evaluate=function(n){var t=this.marshall(n.stamp),e=this.transform(t,n);return t.clear(),e},ol.transform=function(){};var fl=Y(wn,_n);fl.transform=function(n,t){function e(t){t[u]=i(t,n)}var r,i=n.apply,u=n.as;return n.modified()?t.materialize().reflow().visit(t.SOURCE,e):(r=t.modified(i.fields),t.visit(r?t.ADD_MOD:t.ADD,e)),t.modifies(u)},Y(kn,sn);var cl=Y(An,_n);cl.transform=function(n,t){var e,r,i=t.fork(t.ALL),u=t.changed(t.ADD),a=t.changed(),o=n.sort,f=this.value,c=function(n){f.push(n)},s=0;return i.rem.length&&(e={},i.visit(i.REM,function(n){e[n._id]=1,++s}),f=f.filter(function(n){return!e[n._id]})),o?n.modified("sort")||t.modified(o.fields)?(i.visit(i.ADD,c),f.sort(o),a=!0):u&&(r=[],i.visit(i.ADD,function(n){r.push(n)}),f=B(o,f,r.sort(o))):u&&i.visit(i.ADD,c),this.modified(a),this.value=i.source=f,i},Y(En,sn);var sl="$";Cn.prototype=Sn.prototype={constructor:Cn,has:function(n){return sl+n in this},get:function(n){return this[sl+n]},set:function(n,t){return this[sl+n]=t,this},remove:function(n){var t=sl+n;return t in this&&delete this[t]},clear:function(){for(var n in this)n[0]===sl&&delete this[n]},keys:function(){var n=[];for(var t in this)t[0]===sl&&n.push(t.slice(1));return n},values:function(){var n=[];for(var t in this)t[0]===sl&&n.push(this[t]);return n},entries:function(){var n=[];for(var t in this)t[0]===sl&&n.push({key:t.slice(1),value:this[t]});return n},size:function(){var n=0;for(var t in this)t[0]===sl&&++n;return n},empty:function(){for(var n in this)if(n[0]===sl)return!1;return!0},each:function(n){for(var t in this)t[0]===sl&&n(this[t],t.slice(1),this)}};var ll=(Sn.prototype,Y(zn,_n));ll.transform=function(n,t){function e(n){var t=i(n);u.set(t,1+(+u.get(t)||0))}function r(n){var t=i(n),e=u.get(t)-1;e>0?u.set(t,e):u.remove(t)}var i=n.field,u=this.value,a=!0;return n.modified("field")||t.modified(i.fields)?(this.value=u=Sn(),t.visit(t.SOURCE,e)):t.changed(t.ADD_REM)?(t.visit(t.ADD,e),t.visit(t.REM,r)):a=!1,this.modified(a),t};var hl=Y(On,_n);hl.transform=function(n,t){function e(t){return function(e){for(var r,i=Pn(o(e),n["case"],u)||[],f=0,c=i.length;c>f;++f)a.test(r=i[f])||t(r)}}var r=this._parameterCheck(n,t),i=this._counts,u=this._match,a=this._stop,o=n.field,f=e(function(n){i[n]=1+(i[n]||0)}),c=e(function(n){i[n]-=1});return r?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,c)),this._finish(t)},hl._parameterCheck=function(n,t){var e=!1;return!n.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(n.stopwords||"")+"$","i"),e=!0),!n.modified("pattern")&&this._match||(this._match=new RegExp(n.pattern||"[\\w']+","g"),e=!0),(n.modified("field")||t.modified(n.field.fields))&&(e=!0),e&&(this._counts={}),e},hl._finish=function(n){var t,e,r,i=this._counts,u=this._tuples||(this._tuples={}),a=n.fork();for(t in i)e=u[t],r=i[t]||0,!e&&r?(u[t]=e=V({text:t,count:r}),a.add.push(e)):0===r?(e&&a.rem.push(e),i[t]=null,u[t]=null):e.count!==r&&(e.count=r,a.mod.push(e));return a.modifies(["text","count"])};var dl=Y(jn,_n);dl.transform=function(n,t){var e,r=this.value,i=n.field,u=r[0],a=r[1],o=t.ADD;e=t.changed()||t.modified(i.fields)||n.modified("field"),e&&(o=t.SOURCE,u=+(1/0),a=-(1/0)),t.visit(o,function(n){var t=i(n);u>t&&(u=t),t>a&&(a=t)}),this.value=[u,a]};var vl=Y(In,sn);vl.connect=function(n){return this.targets().add(n),n.source=this},vl.add=function(n){this.value.add.push(n)},vl.rem=function(n){this.value.rem.push(n)},vl.mod=function(n){this.value.mod.push(n)},vl.init=function(n){this.value.init(n)},vl.evaluate=function(){return this.value};var pl=Y(Yn,_n);pl.activate=function(n){this._targets[this._targets.active++]=n},pl.transform=function(n,t){function e(e){var u,a=i.get(e);return a?a.value.stamp<t.stamp&&(a.init(t),r.activate(a)):(u=t.dataflow,a=u.add(new In(t.fork(),r)).connect(n.subflow(u,e)),i.set(e,a),r.activate(a)),a}var r=this,i=this.value,u=n.key,a=this._keys,o=n.modified("key");return this._targets.active=0,t.visit(t.ADD,function(n){e(a[n._id]=u(n)).add(n)}),t.visit(t.REM,function(n){var t=a[n._id];delete a[n._id],e(t).rem(n)}),o||t.modified(u.fields)?t.visit(t.MOD,function(n){var t=a[n._id],r=u(n);t===r?e(r).mod(n):(a[n._id]=r,e(t).rem(n),e(r).add(n))}):t.changed(t.MOD)&&t.visit(t.MOD,function(n){e(a[n._id]).mod(n)}),o&&t.visit(t.REFLOW,function(n){var t=a[n._id],r=u(n);t!==r&&(a[n._id]=r,e(t).rem(n),e(r).add(n))}),t},Y(Hn,sn);var gl=Y($n,_n);gl.transform=function(n,t){function e(t){var e=r(t,n),u=i[t._id];e&&u?(i[t._id]=0,a.push(t)):e||u?c&&e&&!u&&f.push(t):(i[t._id]=1,o.push(t))}var r=n.test,i=this.value,u=t.fork(),a=u.add,o=u.rem,f=u.mod,c=!0;return t.visit(t.REM,function(n){i[n._id]?i[n._id]=0:o.push(n)}),t.visit(t.ADD,function(t){r(t,n)?a.push(t):i[t._id]=1}),t.visit(t.MOD,e),n.modified()&&(c=!1,t.visit(t.REFLOW,e)),u};var ml=Y(Wn,_n);ml.transform=function(n,t){function e(n){for(var t,e=u[n._id]=Array(c),r=0;c>r;++r)t=e[r]=K(n),t.key=f[r],t.value=o[r](n),l.add.push(t)}function r(n){for(var t,e=u[n._id],r=0;c>r;++r)d&1<<r&&(t=Q(n,e[r],s),t.key=f[r],t.value=o[r](n),l.mod.push(t))}var i,u=this.value,a=n.modified("fields"),o=n.fields,f=o.map(Zn),c=o.length,s=t.stamp,l=t.fork(),h=0,d=0;if(a){for(i in u)l.rem.push.apply(l.rem,u[i]);u=this.value={},t.visit(t.SOURCE,e)}else{for(t.visit(t.ADD,e);c>h;++h)t.modified(o[h].fields)&&(d|=1<<h);d&&t.visit(t.MOD,r),t.visit(t.REM,function(n){l.rem.push.apply(l.rem,u[n._id]),u[n._id]=null})}return l.modifies(["key","value"])};var yl=Y(Xn,_n);yl.transform=function(n,t){var e,r,i,u=this.value,a=t.fork(t.ALL),o=n.size-u.length,f=n.generator;if(o>0){for(e=[];--o>=0;)e.push(i=V(f(n))),u.push(i);a.add=a.add.length?a.materialize(a.ADD).add.concat(e):e}else r=u.slice(0,-o),a.rem=a.rem.length?a.materialize(a.REM).rem.concat(r):r,u=u.slice(-o);return a.source=this.value=u,a};var bl={value:"value",median:v,mean:d,min:g,max:h},xl=[],Ml=Y(Jn,_n);Ml.transform=function(n,t){var e,r,i,u,a,o,f,c,s,l,h=t.fork(t.ALL),d=Gn(n),v=Vn(n),p=N(n.field),g=n.groupby.map(N),m=n.orderby.map(N),y=Kn(t.source,n.groupby,n.orderby),b=[],x=this.value,M=y.domain.length;for(a=0,c=y.length;c>a;++a)for(e=y[a],i=e.values,r=NaN,f=0;M>f;++f)if(null==e[f]){for(u=y.domain[f],l={_impute:!0},o=0,s=i.length;s>o;++o)l[g[o]]=i[o];for(o=0,s=u.length;s>o;++o)l[m[o]]=u[o];l[p]=isNaN(r)?r=d(e,v):r,b.push(V(l))}return b.length&&(h.add=h.materialize(h.ADD).add.concat(b)),x.length&&(h.rem=h.materialize(h.REM).rem.concat(x)),this.value=b,h};var _l=Y(Qn,_n);_l.transform=function(n,t){var e,r,i,u,a=t,o=n.as,f=n.fields,c=n.index,s=null==n["default"]?null:n["default"],l=n.modified(),h=t.ADD;return 1===f.length?(r=f[0],i=o[0],e=function(n){var t=c.get(r(n));n[i]=null==t?s:t}):e=function(n){for(var t,e=0,r=f.length;r>e;++e)t=c.get(f[e](n)),n[o[e]]=null==t?s:t},l?(h=t.SOURCE,a=t.fork(t.ALL).reflow()):(u=f.some(function(n){return t.modified(n.fields)}),h|=u?t.MOD:0),t.visit(h,e),a.modifies(o)},Y(nt,sn);var wl=Y(et,_n);wl.transform=function(n,t){return t},Y(rt,_n),rt.prototype.transform=function(n,t){return this.modified(n.modified()),this.value=n,t.fork()};var kl=Y(it,_n);kl.transform=function(n,t){if(n.modified()){var e=t.materialize().fork(t.MOD);return e.rem=t.rem.concat(this.value),e.source=this.value=f(n.start,n.stop,n.step).map(V),e.add=t.add.concat(this.value),e}};var Nl=Y(ut,_n);Nl.transform=function(n,t){t.source||P("Rank transform requires an upstream data source.");var e,r=n.normalize,i=n.field,u={},a=-1;return i?(t.visit(t.SOURCE,function(n){var t=i(n);null==u[t]&&(u[t]=++a)}),t.visit(t.SOURCE,r&&--a?function(n){n.rank=u[i(n)]/a}:function(n){n.rank=u[i(n)]})):(a+=t.source.length,e=-1,t.visit(t.SOURCE,r&&a?function(n){n.rank=++e/a}:function(n){n.rank=++e})),t.reflow().modifies("rank")},Y(at,_n),at.prototype.transform=function(n,t){return n.modified()?t.reflow():t};var Al=Y(ot,_n);Al.transform=function(n,t){var e=t.stamp,r=t.fork(),i=this.value;return t.visit(t.ADD,function(n){var t=K(n);i[n._id]=t,r.add.push(t)}),t.visit(t.MOD,function(n){r.mod.push(Q(n,i[n._id],e))}),t.visit(t.REM,function(n){r.rem.push(i[n._id]),delete i[n._id]}),r};var El=Y(ft,_n);El.transform=function(n,t){function e(n){var t,e;a.length<u?a.push(n):(e=~~(o*Math.random()),e<a.length&&e>=f&&(t=a[e],c[t._id]&&r.rem.push(t),a[e]=n)),++o}var r=t.fork(),i=n.modified("size"),u=n.size,a=this.value,o=this.count,f=0,c=a.reduce(function(n,t){return n[t._id]=1,n},{});if(t.rem.length&&(t.visit(t.REM,function(n){c[n._id]&&(c[n._id]=-1,r.rem.push(n)),--o}),a=a.filter(function(n){return-1!==c[n._id]})),(t.rem.length||i)&&a.length<u&&t.source&&(f=o=a.length,t.visit(t.SOURCE,function(n){c[n._id]||e(n)}),f=-1),i&&a.length>u){for(var s=0,l=a.length-u;l>s;++s)c[a[s]._id]=-1,r.rem.push(a[s]);a=a.slice(l)}return t.mod.length&&t.visit(t.MOD,function(n){c[n._id]&&r.mod.push(n)}),t.add.length&&t.visit(t.ADD,e),(t.add.length||0>f)&&(r.add=a.filter(function(n){return!c[n._id]})),this.count=o,this.value=r.source=a,r};var Dl=Y(ct,_n);Dl.transform=function(n,t){return this.value=t.source,t.changed()?t.fork():t.StopPropagation};var Cl=Y(st,_n);Cl.transform=function(n,t){function e(n){i.set(r(n),n)}var r=n.field,i=this.value,u=!0;return n.modified("field")||t.modified(r.fields)?(this.value=i=Sn(),t.visit(t.SOURCE,e)):t.changed()?(t.visit(t.ADD,e),t.visit(t.REM,function(n){i.remove(r(n))})):u=!1,this.modified(u),t};var Sl=Y(lt,_n);Sl.transform=function(n,t){var e=!this.value||n.modified("field")||n.modified("sort")||t.changed()||n.sort&&t.modified(n.sort.fields);e&&(this.value=(n.sort?t.source.slice().sort(n.sort):t.source).map(n.field))};var Ul=ht.prototype;Ul.add=function(n){this._add.push(n)},Ul.rem=function(n){this._rem.push(n)},Ul.values=function(){if(this._get=null,0===this._rem.length)return this._add;var n,t,e,r=this._add,i=this._rem,u=this._key,a=r.length,o=i.length,f=Array(a-o),c={};for(n=0;o>n;++n)c[i[n][u]]=1;for(n=0,t=0;a>n;++n)c[(e=r[n])[u]]?c[e[u]]=0:f[t++]=e;return this._rem=[],this._add=f},Ul.extent=function(n){if(this._get!==n||!this._ext){var t=this.values(),e=I(t,n);this._ext=[t[e[0]],t[e[1]]],this._get=n}return this._ext},Ul.argmin=function(n){return this.extent(n)[0]},Ul.argmax=function(n){return this.extent(n)[1]},Ul.min=function(n){var t=this.extent(n)[0];return null!=t?n(t):+(1/0)},Ul.max=function(n){var t=this.extent(n)[1];return null!=t?n(t):-(1/0)},Ul.quartile=function(n){return this._get===n&&this._q||(this._q=w(this.values(),n),this._get=n),this._q},Ul.q1=function(n){return this.quartile(n)[0]},Ul.q2=function(n){return this.quartile(n)[1]},Ul.q3=function(n){return this.quartile(n)[2]},Ul.ci=function(n){return this._get===n&&this._ci||(this._ci=b(this.values(),1e3,.05,n),this._get=n),this._ci},Ul.ci0=function(n){return this.ci(n)[0]},Ul.ci1=function(n){return this.ci(n)[1]};var Tl={values:vt({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:vt({name:"count",set:"cell.num"}),missing:vt({name:"missing",set:"this.missing"}),valid:vt({name:"valid",set:"this.valid"}),distinct:vt({name:"distinct",init:"this.dmap = {}; this.distinct = 0;",add:"this.dmap[v] = 1 + (this.dmap[v] || (++this.distinct, 0));",rem:"if (!(--this.dmap[v])) --this.distinct;",set:"this.distinct"}),sum:vt({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:vt({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:vt({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:vt({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:vt({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:vt({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:vt({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:vt({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),ci0:vt({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:vt({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:vt({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:vt({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:vt({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:vt({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:vt({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:vt({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:vt({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},Rl=Y(yt,_n);Rl.transform=function(n,t){var e,r=this,i=t.fork();return this.stamp=i.stamp,this.value&&((e=n.modified())||t.modified(this._inputs))?(this._prev=this.value,this.value=e?this.init(n):{},t.visit(t.SOURCE,function(n){r.add(n)})):(this.value=this.value||this.init(n),t.visit(t.REM,function(n){r.rem(n)}),t.visit(t.ADD,function(n){r.add(n)})),i.modifies(this._outputs),r.changes(i,n.drop!==!1)},Rl.init=function(n){function t(n){for(var t,r=n.fields,u=0,a=r.length;a>u;++u)i[t=r[u]]||(i[t]=1,e.push(t))}var e=this._inputs=[],r=this._outputs=[],i={};this._dims=q(n.groupby),this._dnames=this._dims.map(function(n){var e=N(n);return t(n),r.push(e),e}),this.cellkey=n.key?n.key:0===this._dims.length?function(){return""}:1===this._dims.length?this._dims[0]:xt,this._count=!0,this._measures=[];var u,a,o,f,c,s,l=n.fields||[null],h=n.ops||["count"],d=n.as||[],v=l.length,p={};for(v!==h.length&&P("Unmatched number of fields and aggregate ops."),s=0;v>s;++s)u=l[s],a=h[s],f=N(u),c=bt(a,f,d[s]),r.push(c),u&&(o=p[f],o||(t(u),o=p[f]=[],o.field=u,this._measures.push(o)),"count"!==a&&(this._count=!1),o.push(dt(a,c)));return this._measures=this._measures.map(function(n){return mt(n,n.field)}),{}},Rl.cellkey=xt,Rl.cell=function(n,t){var e=this.value[n];return e?e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e):(e=this.value[n]=this.newcell(n,t),this._adds[this._alen++]=e),e},Rl.newcell=function(n,t){var e={key:n,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[n]),stamp:this.stamp,store:!1};if(!this._count){var r,i=this._measures,u=i.length;for(e.agg=Array(u),r=0;u>r;++r)e.agg[r]=new i[r](e,e.tuple)}return e.store&&(e.data=new ht),e},Rl.newtuple=function(n,t){var e,r,i=this._dnames,u=this._dims,a={};for(e=0,r=u.length;r>e;++e)a[i[e]]=u[e](n);return t?nn(t.tuple,a):V(a)},Rl.add=function(n){var t,e,r,i=this.cellkey(n),u=this.cell(i,n);if(u.num+=1,!this._count)for(u.store&&u.data.add(n),t=u.agg,e=0,r=t.length;r>e;++e)t[e].add(t[e].get(n))},Rl.rem=function(n){var t,e,r,i=this.cellkey(n),u=this.cell(i,n);if(u.num-=1,!this._count)for(u.store&&u.data.rem(n),t=u.agg,e=0,r=t.length;r>e;++e)t[e].rem(t[e].get(n))},Rl.celltuple=function(n){var t,e,r,i=n.tuple;if(n.store&&n.data.values(),this._count)i.count=n.num;else for(t=n.agg,e=0,r=t.length;r>e;++e)t[e].set();return i},Rl.changes=function(n,t){var e,r,i,u,a=this._adds,o=this._mods,f=this._prev,c=n.add,s=n.rem,l=n.mod;if(f)for(r in f)s.push(f[r].tuple);for(i=0,u=this._alen;u>i;++i)c.push(this.celltuple(a[i])),a[i]=null;for(i=0,u=this._mlen;u>i;++i)e=o[i],(0===e.num&&t?s:l).push(this.celltuple(e)),o[i]=null;return this._alen=this._mlen=0,this._prev=null,n};var Fl=Y(St,_n);Fl.transform=function(n,t){if(this.index){var e=n.modified("fields")||n.fields.some(function(n){return t.modified(n.fields)});return e?this.reinit(n,t):this.eval(n,t)}return this.init(n,t)},Fl.init=function(n,t){var e,r=n.fields,i=n.query,u=i.length,a=this.index=Array(u);for(e=0;u>e;++e)a[e]=Ut(e,r[e],i[e]);return this.eval(n,t)},Fl.reinit=function(n,t){var e,r,i,u,a,o,f,c=t.materialize().fork(),s=n.fields,l=n.query,h=l.length,d=this.index,v=this.value,p=v.curr(),g=v.prev(),m=v.all(),y=c.rem=c.add,b=c.mod;if(g.set(p),t.rem.length&&(r=this.remove(n,t,c)),t.add.length&&v.add(t.add),t.mod.length)for(i={},e=t.mod,u=0,a=e.length;a>u;++u)i[e[u]._index]=1;
for(f=0;h>f;++f)o=s[f],(!d[f]||n.modified("fields",f)||t.modified(o.fields))&&(d[f]=Ut(f,s[f],l[f]),d[f].add(t.source,p,0));for(u=0,a=v.data().length;a>u;++u)r[u]||(g[u]!==p[u]?y.push(u):i[u]&&p[u]!==m&&b.push(u));return v.mask=(1<<h)-1,c},Fl.eval=function(n,t){var e=t.materialize().fork(),r=this.index.length,i=0;return t.rem.length&&(this.remove(n,t,e),i|=(1<<r)-1),n.modified("query")&&!n.modified("fields")&&(i|=this.update(n,t,e)),t.add.length&&(this.insert(n,t,e),i|=(1<<r)-1),t.mod.length&&(this.modify(t,e),i|=(1<<r)-1),this.value.mask=i,e},Fl.insert=function(n,t,e){var r,i=t.add,u=this.value,a=this.index,o=e.add,f=u.size(),c=f+i.length,s=a.length;u.resize(c,s),u.add(i);var l=u.curr(),h=u.prev(),d=u.all();for(r=0;s>r;++r)a[r].add(i,l,f);for(;c>f;++f)h[f]=d,l[f]!==d&&o.push(f)},Fl.modify=function(n,t){var e,r,i,u=t.mod,a=this.value,o=a.curr(),f=a.all(),c=n.mod;for(e=0,r=c.length;r>e;++e)i=c[e]._index,o[i]!==f&&u.push(i)},Fl.remove=function(n,t,e){var r,i,u,a,o,f,c=this.index,s=this.value,l=s.curr(),h=s.prev(),d=s.all(),v={},p=e.rem,g=t.rem;for(r=0,u=g.length;u>r;++r)o=g[r]._index,v[o]=1,h[o]=f=l[o],l[o]=d,f!==d&&p.push(o);for(i=0,a=c.length;a>i;++i)c[i].remove(u,v);return this.reindex(t,u,v),v},Fl.reindex=function(n,t,e){var r=this.value,i=this.index;n.runAfter(function(){var n=r.remove(t,e);i.forEach(function(t){t.reindex(n)})})},Fl.update=function(n,t,e){var r,i,u=this.index,a=n.query,o=t.stamp,f=u.length,c=0;for(e.filters=0,i=0;f>i;++i)n.modified("query",i)&&(r=i,++c);if(1===c)c=u[r].one,this.incrementOne(u[r],a[r],e.add,e.rem);else for(i=0,c=0;f>i;++i)n.modified("query",i)&&(c|=u[i].one,this.incrementAll(u[i],a[i],o,e.add),e.rem=e.add);return c},Fl.incrementAll=function(n,t,e,r){var i,u,a,o=this.value,f=o.seen(),c=o.curr(),s=o.prev(),l=n.index(),h=n.bisect(n.range),d=n.bisect(t),v=d[0],p=d[1],g=h[0],m=h[1],y=n.one;if(g>v)for(i=v,u=Math.min(g,p);u>i;++i)a=l[i],f[a]!==e&&(s[a]=c[a],f[a]=e,r.push(a)),c[a]^=y;else if(v>g)for(i=g,u=Math.min(v,m);u>i;++i)a=l[i],f[a]!==e&&(s[a]=c[a],f[a]=e,r.push(a)),c[a]^=y;if(p>m)for(i=Math.max(v,m),u=p;u>i;++i)a=l[i],f[a]!==e&&(s[a]=c[a],f[a]=e,r.push(a)),c[a]^=y;else if(m>p)for(i=Math.max(g,p),u=m;u>i;++i)a=l[i],f[a]!==e&&(s[a]=c[a],f[a]=e,r.push(a)),c[a]^=y;n.range=t.slice()},Fl.incrementOne=function(n,t,e,r){var i,u,a,o=this.value,f=o.curr(),c=n.index(),s=n.bisect(n.range),l=n.bisect(t),h=l[0],d=l[1],v=s[0],p=s[1],g=n.one;if(v>h)for(i=h,u=Math.min(v,d);u>i;++i)a=c[i],f[a]^=g,e.push(a);else if(h>v)for(i=v,u=Math.min(h,p);u>i;++i)a=c[i],f[a]^=g,r.push(a);if(d>p)for(i=Math.max(h,p),u=d;u>i;++i)a=c[i],f[a]^=g,e.push(a);else if(p>d)for(i=Math.max(v,d),u=p;u>i;++i)a=c[i],f[a]^=g,r.push(a);n.range=t.slice()};var ql=Y(Tt,_n);ql.transform=function(n,t){var e=~(n.ignore||0),r=n.filter,i=r.mask;if(0===(i&e))return t.StopPropagation;var u=t.fork(t.ALL),a=r.data(),o=r.curr(),f=r.prev(),c=function(n){return o[n]&e?null:a[n]};return u.filter(u.MOD,c),i&i-1?(u.filter(u.ADD,function(n){var t=o[n]&e,r=!t&&t^f[n]&e;return r?a[n]:null}),u.filter(u.REM,function(n){var t=o[n]&e,r=t&&!(t^(t^f[n]&e));return r?a[n]:null})):(u.filter(u.ADD,c),u.filter(u.REM,function(n){return(o[n]&e)===i?a[n]:null})),u};var Ll,zl={"":Lt,"%":function(n,t){return(100*n).toFixed(t)},b:function(n){return Math.round(n).toString(2)},c:function(n){return n+""},d:function(n){return Math.round(n).toString(10)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},g:function(n,t){return n.toPrecision(t)},o:function(n){return Math.round(n).toString(8)},p:function(n,t){return Ot(100*n,t)},r:Ot,s:zt,X:function(n){return Math.round(n).toString(16).toUpperCase()},x:function(n){return Math.round(n).toString(16)}},Ol=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;jt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Pl,jl,Il,Yl=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];Ht({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var Hl=Y(Qt,_n);Hl.transform=function(n,t){if(null!=this.value&&!n.modified())return t.StopPropagation;var e=t.fork(),r=this.value,i=n.scale,u=null==n.count?10:n.count,a=n.format||Xt(i,u,n.formatSpecifier),o=n.values||Zt(i,u);return r&&(e.rem=r),r=o.map(function(n){return V({value:n,label:a(n)})}),e.source=e.add=this.value=r,e};var Bl=Y(ne,_n);Bl.transform=function(n,t){var e=t.fork(t.NO_SOURCE),r=n.item||te,i=n.key||J,u=this.value;return(n.modified("key")||t.modified(i))&&P("DataJoin does not support modified key function or fields."),t.visit(t.REM,function(n){var t=i(n),r=u.get(t);r&&(u.remove(t),e.rem.push(r))}),t.visit(t.ADD,function(n){var t=i(n),a=u.get(t);a?e.mod.push(a):(u.set(t,a=r(n)),e.add.push(a)),a.datum=n}),t.visit(t.MOD,function(n){var t=i(n),r=u.get(t);r&&e.mod.push(r)}),e};var $l=Y(ee,_n);$l.transform=function(n,t){var e=t.fork(t.ADD_REM),r=n.encoders.update||Es,i=n.encoders.enter||Es,u=n.encoders.exit||Es,a=(t.encode?n.encoders[t.encode]:r)||Es;if(i===Es&&r===Es||t.visit(t.ADD,function(t){i(t,n),r(t,n),a!==Es&&a!==r&&a(t,n)}),u!==Es&&t.visit(t.REM,function(t){u(t,n)}),a!==Es){var o=t.MOD|(n.modified()?t.REFLOW:0);t.visit(o,function(t){a(t,n)&&e.mod.push(t)})}return e};var Wl=Array.prototype,Zl=Wl.map,Xl=Wl.slice,Jl={name:"implicit"},Gl=.7,Vl=1/Gl,Kl=/^#([0-9a-f]{3})$/,Ql=/^#([0-9a-f]{6})$/,nh=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,th=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,eh=/^rgba\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,rh=/^rgba\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,ih=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,uh=/^hsla\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)\s*\)$/,ah={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oe(ce,se,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),oe(pe,ve,fe(ce,{brighter:function(n){return n=null==n?Vl:Math.pow(Vl,n),new pe(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=null==n?Gl:Math.pow(Gl,n),new pe(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var n=this.opacity;return n=isNaN(n)?1:Math.max(0,Math.min(1,n)),(1===n?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===n?")":", "+n+")")}})),oe(be,ye,fe(ce,{brighter:function(n){return n=null==n?Vl:Math.pow(Vl,n),new be(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?Gl:Math.pow(Gl,n),new be(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+360*(this.h<0),t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,r=e+(.5>e?e:1-e)*t,i=2*e-r;return new pe(xe(n>=240?n-240:n+120,i,r),xe(n,i,r),xe(120>n?n+240:n-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var oh=Math.PI/180,fh=180/Math.PI,ch=18,sh=.95047,lh=1,hh=1.08883,dh=4/29,vh=6/29,ph=3*vh*vh,gh=vh*vh*vh;oe(we,_e,fe(ce,{brighter:function(n){return new we(this.l+ch*(null==n?1:n),this.a,this.b,this.opacity)},darker:function(n){return new we(this.l-ch*(null==n?1:n),this.a,this.b,this.opacity)},rgb:function(){var n=(this.l+16)/116,t=isNaN(this.a)?n:n+this.a/500,e=isNaN(this.b)?n:n-this.b/200;return n=lh*Ne(n),t=sh*Ne(t),e=hh*Ne(e),new pe(Ae(3.2404542*t-1.5371385*n-.4985314*e),Ae(-.969266*t+1.8760108*n+.041556*e),Ae(.0556434*t-.2040259*n+1.0572252*e),this.opacity)}})),oe(Se,Ce,fe(ce,{brighter:function(n){return new Se(this.h,this.c,this.l+ch*(null==n?1:n),this.opacity)},darker:function(n){return new Se(this.h,this.c,this.l-ch*(null==n?1:n),this.opacity)},rgb:function(){return Me(this).rgb()}}));var mh=-.14861,yh=1.78277,bh=-.29227,xh=-.90649,Mh=1.97294,_h=Mh*xh,wh=Mh*yh,kh=yh*bh-xh*mh;oe(Re,Te,fe(ce,{brighter:function(n){return n=null==n?Vl:Math.pow(Vl,n),new Re(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?Gl:Math.pow(Gl,n),new Re(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=isNaN(this.h)?0:(this.h+120)*oh,t=+this.l,e=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(n),i=Math.sin(n);return new pe(255*(t+e*(mh*r+yh*i)),255*(t+e*(bh*r+xh*i)),255*(t+e*(Mh*r)),this.opacity)}}));var Nh=function Ag(n){function t(n,t){var r=e((n=ve(n)).r,(t=ve(t)).r),i=e(n.g,t.g),u=e(n.b,t.b),a=e(n.opacity,t.opacity);return function(t){return n.r=r(t),n.g=i(t),n.b=u(t),n.opacity=a(t),n+""}}var e=je(n);return t.gamma=Ag,t}(1),Ah=Ye(qe),Eh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Dh=new RegExp(Eh.source,"g");Ke(Pe);var Ch=Ke(Ie),Sh=[0,1],Uh=new Date,Th=new Date,Rh=Ar(function(){},function(n,t){n.setTime(+n+t)},function(n,t){return t-n});Rh.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?Ar(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):Rh:null};var Fh=1e3,qh=6e4,Lh=36e5,zh=864e5,Oh=6048e5,Ph=Ar(function(n){n.setTime(Math.floor(n/Fh)*Fh)},function(n,t){n.setTime(+n+t*Fh)},function(n,t){return(t-n)/Fh},function(n){return n.getUTCSeconds()}),jh=Ar(function(n){n.setTime(Math.floor(n/qh)*qh)},function(n,t){n.setTime(+n+t*qh)},function(n,t){return(t-n)/qh},function(n){return n.getMinutes()}),Ih=Ar(function(n){var t=n.getTimezoneOffset()*qh%Lh;0>t&&(t+=Lh),n.setTime(Math.floor((+n-t)/Lh)*Lh+t)},function(n,t){n.setTime(+n+t*Lh)},function(n,t){return(t-n)/Lh},function(n){return n.getHours()}),Yh=Ar(function(n){n.setHours(0,0,0,0)},function(n,t){n.setDate(n.getDate()+t)},function(n,t){return(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*qh)/zh},function(n){return n.getDate()-1}),Hh=Er(0),Bh=Er(1),$h=Ar(function(n){n.setDate(1),n.setHours(0,0,0,0)},function(n,t){n.setMonth(n.getMonth()+t)},function(n,t){return t.getMonth()-n.getMonth()+12*(t.getFullYear()-n.getFullYear())},function(n){return n.getMonth()}),Wh=Ar(function(n){n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n,t){return t.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});Wh.every=function(n){return isFinite(n=Math.floor(n))&&n>0?Ar(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};var Zh=Ar(function(n){n.setUTCSeconds(0,0)},function(n,t){n.setTime(+n+t*qh)},function(n,t){return(t-n)/qh},function(n){return n.getUTCMinutes()}),Xh=Ar(function(n){n.setUTCMinutes(0,0,0)},function(n,t){n.setTime(+n+t*Lh)},function(n,t){return(t-n)/Lh},function(n){return n.getUTCHours()}),Jh=Ar(function(n){n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCDate(n.getUTCDate()+t)},function(n,t){return(t-n)/zh},function(n){return n.getUTCDate()-1}),Gh=Dr(0),Vh=Dr(1),Kh=Ar(function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCMonth(n.getUTCMonth()+t)},function(n,t){return t.getUTCMonth()-n.getUTCMonth()+12*(t.getUTCFullYear()-n.getUTCFullYear())},function(n){return n.getUTCMonth()}),Qh=Ar(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCFullYear(n.getUTCFullYear()+t)},function(n,t){return t.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});Qh.every=function(n){return isFinite(n=Math.floor(n))&&n>0?Ar(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var nd,td,ed,rd,id,ud={"-":"",_:" ",0:"0"},ad=/^\s*\d+/,od=/^%/,fd=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;Ai({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var cd="%Y-%m-%dT%H:%M:%S.%LZ",sd=(Date.prototype.toISOString?Ei:rd(cd),+new Date("2000-01-01T00:00:00.000Z")?Di:id(cd),1e3),ld=60*sd,hd=60*ld,dd=24*hd,vd=7*dd,pd=30*dd,gd=365*dd,md=Fi("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),yd=Fi("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),bd=Fi("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),xd=Fi("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Md=Ch(Te(300,.5,0),Te(-240,.5,1)),_d=Ch(Te(-100,.75,.35),Te(80,1.5,.8)),wd=Ch(Te(260,.75,.35),Te(80,1.5,.8)),kd=Te(),Nd=Li(Fi("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Ad=Li(Fi("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Ed=Li(Fi("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Dd=Li(Fi("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Cd=Oi("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Sd=Oi("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ud=Oi("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Td=Oi("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Rd=Oi("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Fd=Oi("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),qd=Oi("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Ld=Oi("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),zd=Pi("5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30"),Od=Pi("40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b"),Pd=Pi("8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419"),jd=Pi("7f3b08b35806e08214fdb863fee0b6f7f7f7d8daebb2abd28073ac5427882d004b"),Id=Pi("67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061"),Yd=Pi("67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a"),Hd=Pi("a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695"),Bd=Pi("a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837"),$d=Pi("9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2"),Wd=Pi("f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b"),Zd=Pi("f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b"),Xd=Pi("f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081"),Jd=Pi("fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000"),Gd=Pi("fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636"),Vd=Pi("fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858"),Kd=Pi("f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f"),Qd=Pi("fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a"),nv=Pi("ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58"),tv=Pi("ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529"),ev=Pi("ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506"),rv=Pi("ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026"),iv=Pi("f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b"),uv=Pi("f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b"),av=Pi("fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000"),ov=Pi("fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d"),fv=Pi("fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d"),cv=Pi("fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704"),sv={band:ie,point:ae,identity:lr,linear:sr,log:br,ordinal:re,pow:Mr,sqrt:_r,quantile:wr,quantize:kr,threshold:Nr,time:Ti,utc:Ri,sequential:zi},lv={category10:md,category20:xd,category20b:yd,category20c:bd,accent:Cd,dark2:Sd,paired:Ud,pastel1:Td,pastel2:Rd,set1:Fd,set2:qd,set3:Ld,cubehelix:Md,rainbow:qi,warm:_d,cool:wd,viridis:Nd,magma:Ad,inferno:Ed,plasma:Dd,brbg:zd,prgn:Od,piyg:Pd,puor:jd,rdbu:Id,rdgy:Yd,rdylbu:Hd,rdylgn:Bd,spectral:$d,bugn:Wd,bupu:Zd,gnbu:Xd,orrd:Jd,pubugn:Gd,pubu:Vd,purd:Kd,rdpu:Qd,ylgnbu:nv,ylgn:tv,ylorbr:ev,ylorrd:rv,blues:iv,greens:uv,greys:av,purples:ov,reds:fv,oranges:cv},hv={type:1,nice:1,zero:1,domain:1,domainMin:1,domainMax:1,scheme:1},dv=Y(ji,_n);dv.transform=function(n,t){var e,r=this.value;(!r||n.modified("type")||n.modified("scheme"))&&(this.value=r=Ii(n.type,n.scheme,t));for(e in n)!hv[e]&&z(r[e])&&r[e](n[e]);Yi(r,n)};var vv=su.prototype=lu.prototype;vv.copy=function(){var n,t,e=new lu(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=hu(r),e;for(n=[{source:r,target:e._root=new Array(4)}];r=n.pop();)for(var i=0;4>i;++i)(t=r.source[i])&&(t.length?n.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=hu(t));return e},vv.add=Wi,vv.addAll=Xi,vv.cover=Ji,vv.data=Gi,vv.extent=Vi,vv.find=Qi,vv.remove=nu,vv.removeAll=tu,vv.root=eu,vv.size=ru,vv.visit=iu,vv.visitAfter=uu,vv.x=ou,vv.y=cu;var pv={value:function(){}};bu.prototype=yu.prototype={constructor:bu,on:function(n,t){var e,r=this._,i=xu(n+"",r),u=-1,a=i.length;{if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++u<a;)if(e=(n=i[u]).type)r[e]=_u(r[e],n.name,t);else if(null==t)for(e in r)r[e]=_u(r[e],n.name,null);return this}for(;++u<a;)if((e=(n=i[u]).type)&&(e=Mu(r[e],n.name)))return e}},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new bu(n)},call:function(n,t){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),u=0;e>u;++u)i[u]=arguments[u+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(r=this._[n],u=0,e=r.length;e>u;++u)r[u].value.apply(t,i)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,u=r.length;u>i;++i)r[i].value.apply(t,e)}};var gv,mv,yv=0,bv=0,xv=0,Mv=1e3,_v=0,wv=0,kv=0,Nv="object"==typeof performance&&performance.now?performance:Date,Av="function"==typeof requestAnimationFrame?Nv===Date?function(n){requestAnimationFrame(function(){n(Nv.now())})}:requestAnimationFrame:function(n){setTimeout(n,17)};Nu.prototype=Au.prototype={constructor:Nu,restart:function(n,t,e){if("function"!=typeof n)throw new TypeError("callback is not a function");e=(null==e?wu():+e)+(null==t?0:+t),this._next||mv===this||(mv?mv._next=this:gv=this,mv=this),this._call=n,this._time=e,Uu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Uu())}};var Ev=10,Dv=Math.PI*(3-Math.sqrt(5)),Cv=Sn().set("center",Hi).set("collide",pu).set("nbody",qu).set("link",mu).set("x",Lu).set("y",zu),Sv="forces",Uv=["alpha","alphaMin","alphaTarget","velocityDecay","drag","forces"],Tv=["static","iterations"],Rv=["x","y","vx","vy","fx","fy"],Fv=Y(Ou,_n);Fv.transform=function(n,t){var e=this.value,r=t.changed(t.ADD_REM),i=n.modified(Uv),u=n.iterations||300;if(e?(r&&(t.modifies("index"),e.nodes(t.source)),i&&Iu(e,n)):(this.value=e=ju(t.source,n),e.on("tick",Pu(t.dataflow,this)),n["static"]||(r=!0,e.tick()),t.modifies("index")),n.modified("fixed")&&(e.nodes().forEach(function(n){n.fx=null,n.fy=null}),q(n.fixed).forEach(function(n){n.fx=n.x,n.fy=n.y})),i||r||t.changed()||n.modified(Tv))if(e.alpha(Math.max(e.alpha(),n.alpha||1)).alphaDecay(1-Math.pow(e.alphaMin(),1/u)),n["static"])for(e.stop();--u>=0;)e.tick();else if(e.stopped()&&e.restart(),!r)return t.StopPropagation;return t.reflow().modifies(Rv)};var qv=Sn().set("line",Xu).set("line-radial",Ju).set("curve",Gu).set("curve-radial",Vu).set("orthogonal-horizontal",Ku).set("orthogonal-vertical",Qu).set("orthogonal-radial",na).set("diagonal-horizontal",ta).set("diagonal-vertical",ea).set("diagonal-radial",ra),Lv=Y(Zu,_n);Lv.transform=function(n,t){function e(n){n.path=c(r(n),i(n),u(n),a(n))}var r=n.sourceX||Hu,i=n.sourceY||Bu,u=n.targetX||$u,a=n.targetY||Wu,o=n.orient||"vertical",f=n.shape||"line",c=qv.get(f+"-"+o)||qv.get(f);return c||P("LinkPath unsupported type: "+n.shape+"-"+n.orient),n.modified()?t.visit(t.SOURCE,e).reflow():t.visit(t.ALL,e),t.modifies("path")};var zv=Y(ia,_n);zv.transform=function(n,t){var e,r,i,u=n.field||Ns,a=n.startAngle||0,o=null!=n.endAngle?n.endAngle:2*Math.PI,c=t.source,s=c.map(u),l=s.length,h=a,d=(o-a)/y(s),v=f(l);for(n.sort&&v.sort(function(n,t){return s[n]-s[t]}),e=0;l>e;++e)i=s[v[e]],r=c[v[e]],r.startAngle=h,r.endAngle=h+=i*d;return this.value=s,t.reflow().modifies(["startAngle","endAngle"])};var Ov="center",Pv="normalize",jv=Y(ua,_n);jv.transform=function(n,t){var e,r,i,u,a,o,f,c,s,l,h,d,v,p=n.field,g=n.offset;for(e=aa(t.source,n.groupby,n.sort,p),i=0,a=e.length,f=e.max;a>i;++i)for(r=e[i],c=g===Ov?(f-r.sum)/2:0,s=g===Pv?1/r.sum:1,d=c,v=0,u=0,o=r.length;o>u;++u)l=r[u],h=d,v+=p(l),d=s*v+c,l.y0=h,l.y1=d;return t.reflow().modifies(["y0","y1"])},sa.prototype={constructor:sa,insert:function(n,t){var e,r,i;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=va(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.R&&(ha(this,e),n=e,e=n.U),e.C=!1,r.C=!0,da(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.L&&(da(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ha(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,i=n.U,u=n.L,a=n.R;if(e=u?a?va(a):u:a,i?i.L===n?i.L=e:i.R=e:this._=e,u&&a?(r=e.C,e.C=n.C,e.L=u,u.U=e,e!==a?(i=e.U,e.U=n.U,n=e.R,i.L=n,e.R=a,a.U=e):(e.U=i,i=e,n=e.R)):(r=n.C,n=e),n&&(n.U=i),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,ha(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,da(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ha(this,i),n=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,da(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ha(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,da(this,i),n=this._;break}t.C=!0,n=i,i=i.U}while(!n.C);n&&(n.C=!1)}}};var Iv,Yv,Hv,Bv,$v,Wv=[],Zv=[],Xv=1e-6,Jv=1e-12;Pa.prototype={constructor:Pa,polygons:function(){var n=this.edges;return this.cells.map(function(t){var e=t.halfedges.map(function(e){return wa(t,n[e])});return e.data=t.site.data,e})},triangles:function(){var n=[],t=this.edges;return this.cells.forEach(function(e,r){for(var i,u=e.site,a=e.halfedges,o=-1,f=a.length,c=t[a[f-1]],s=c.left===u?c.right:c.left;++o<f;)i=s,c=t[a[o]],s=c.left===u?c.right:c.left,r<i.index&&r<s.index&&za(u,i,s)<0&&n.push([u.data,i.data,s.data])}),n},links:function(){return this.edges.filter(function(n){return n.right}).map(function(n){return{source:n.left.data,target:n.right.data}})}};var Gv=Y(Ia,_n),Vv=["x","y","size","extent"];Gv.transform=function(n,t){var e,r,i,u,a,o=t.source;for(e=ja(),u=0,a=Vv.length;a>u;++u)i=Vv[u],i in n&&e[i](n[i]);for(this.value=e=e(o),r=e.polygons(),u=0,a=o.length;a>u;++u)o[u].path=r[u]?"M"+r[u].join("L")+"Z":null;return t.reflow().modifies("path")},Ha.prototype={constructor:Ha,reset:function(){this.s=this.t=0},add:function(n){Ba(ap,n,this.t),Ba(this,ap.s,this.s),this.s?this.t+=ap.t:this.s=ap.t},valueOf:function(){
return this.s}};var Kv,Qv,np,tp,ep,rp,ip,up,ap=new Ha,op=1e-6,fp=Math.PI,cp=fp/2,sp=fp/4,lp=2*fp,hp=180/fp,dp=fp/180,vp=Math.abs,pp=Math.atan,gp=Math.atan2,mp=Math.cos,yp=Math.ceil,bp=Math.exp,xp=Math.log,Mp=Math.pow,_p=Math.sin,wp=Math.sign||function(n){return n>0?1:0>n?-1:0},kp=Math.sqrt,Np=Math.tan,Ap={Feature:function(n,t){Xa(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)Xa(e[r].geometry,t)}},Ep={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){Ja(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)Ja(e[r],t,0)},Polygon:function(n,t){Ga(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)Ga(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)Xa(e[r],t)}};fo.invert=fo;var Dp,Cp,Sp,Up,Tp,Rp,Fp,qp,Lp=1e9,zp=-Lp,Op=Ya(),Pp=Ya(),jp={point:Za,lineStart:Za,lineEnd:Za,polygonStart:function(){jp.lineStart=Eo,jp.lineEnd=So},polygonEnd:function(){jp.lineStart=jp.lineEnd=jp.point=Za,Op.add(vp(Pp)),Pp.reset()},result:function(){var n=Op/2;return Op.reset(),n}},Ip=1/0,Yp=Ip,Hp=-Ip,Bp=Hp,$p={point:Uo,lineStart:Za,lineEnd:Za,polygonStart:Za,polygonEnd:Za,result:function(){var n=[[Ip,Yp],[Hp,Bp]];return Hp=Bp=-(Yp=Ip=1/0),n}},Wp=0,Zp=0,Xp=0,Jp=0,Gp=0,Vp=0,Kp=0,Qp=0,ng=0,tg={point:To,lineStart:Ro,lineEnd:Lo,polygonStart:function(){tg.lineStart=zo,tg.lineEnd=Oo},polygonEnd:function(){tg.point=To,tg.lineStart=Ro,tg.lineEnd=Lo},result:function(){var n=ng?[Kp/ng,Qp/ng]:Vp?[Jp/Vp,Gp/Vp]:Xp?[Wp/Xp,Zp/Xp]:[NaN,NaN];return Wp=Zp=Xp=Jp=Gp=Vp=Kp=Qp=ng=0,n}},eg=Ya(),rg=Wo(function(){return!0},Jo,Vo,[-fp,-cp]);nf.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ig=16,ug=mp(30*dp),ag=Qo({point:function(n,t){this.stream.point(n*dp,t*dp)}}),og=df(function(n){return kp(2/(1+n))});og.invert=vf(function(n){return 2*Wa(n/2)});var fg=df(function(n){return(n=$a(n))&&n/_p(n)});fg.invert=vf(function(n){return n}),mf.invert=function(n,t){return[n,2*pp(bp(t))-cp]},wf.invert=wf,Ef.invert=vf(pp),Cf.invert=vf(Wa),Uf.invert=vf(function(n){return 2+pp(n)}),Rf.invert=function(n,t){return[-t,2*pp(bp(n))-cp]};var cg=Y(qf,_n);cg.transform=function(n,t){function e(n){n[a]=i(u(n))}var r,i=this.value,u=n.field||ws,a=n.as||"path";return!i||n.modified()?(this.value=i=Bo().pointRadius(n.pointRadius).projection(n.projection),t.materialize().reflow().visit(t.SOURCE,e)):(r=u===ws||t.modified(u.fields),t.visit(r?t.ADD_MOD:t.ADD,e)),t.modifies(a)};var sg=Y(Lf,_n);sg.transform=function(n,t){function e(n){var t=i([u(n),a(n)]);n[f]=t[0],n[c]=t[1]}var r,i=n.projection,u=n.fields[0],a=n.fields[1],o=n.as||["x","y"],f=o[0],c=o[1];return n.modified()?t.materialize().reflow().visit(t.SOURCE,e):(r=t.modified(u.fields)||t.modified(a.fields),t.visit(r?t.ADD_MOD:t.ADD,e)),t.modifies(o)};var lg=Y(zf,_n);lg.transform=function(n,t){var e,r=t.fork(),i=this.value,u=this.generator;if(!i.length||n.modified())for(var a in n)z(u[a])&&u[a](n[a]);return e=u(),i.length?(e._id=i[0]._id,r.mod.push(e)):r.add.push(V(e)),i[0]=e,r.source=i,r};var hg={albers:sf,albersusa:hf,azimuthalequalarea:pf,azimuthalequidistant:gf,conicconformal:_f,conicequalarea:cf,conicequidistant:Af,equirectangular:kf,gnomonic:Df,mercator:yf,orthographic:Sf,stereographic:Tf,transversemercator:Ff},dg=Y(Of,_n);dg.transform=function(n){var t,e=this.value;e&&!n.modified("type")||(this.value=e=Pf(n.type));for(t in n)z(e[t])&&e[t](n[t])},sc.prototype=uc.prototype={constructor:sc,each:Xf,eachAfter:Gf,eachBefore:Jf,sum:Vf,sort:Kf,path:Qf,ancestors:tc,descendants:ec,leaves:rc,links:ic,copy:ac};var vg="$",pg={depth:-1},gg={};$c.prototype=Object.create(sc.prototype);var mg=(1+Math.sqrt(5))/2,yg=function Eg(n){function t(t,e,r,i,u){Jc(n,t,e,r,i,u)}return t.ratio=function(n){return Eg((n=+n)>1?n:1)},t}(mg),bg=function Dg(n){function t(t,e,r,i,u){if((a=t._squarify)&&a.ratio===n)for(var a,o,f,c,s,l=-1,h=a.length,d=t.value;++l<h;){for(o=a[l],f=o.children,c=o.value=0,s=f.length;s>c;++c)o.value+=f[c].value;o.dice?Fc(o,e,r,i,r+=(u-r)*o.value/d):Xc(o,e,r,e+=(i-e)*o.value/d,u),d-=o.value}else t._squarify=a=Jc(n,t,e,r,i,u),a.ratio=n}return t.ratio=function(n){return Dg((n=+n)>1?n:1)},t}(mg),xg=Y(Qc,_n);xg.transform=function(n,t){if(t.source||P("Nest transform requires an upstream data source."),!this.value||n.modified()||t.changed()){var e=q(n.keys).reduce(function(n,t){return n.key(t),n},Un()).entries(t.source),r=uc({values:e},ns),i=r.lookup={};r.each(function(n){"_id"in n.data&&(i[n.data._id]=n)}),this.value=r}t.source.root=this.value};var Mg=Y(ts,_n);Mg.transform=function(n,t){t.source||P("Stratify transform requires an upstream data source.");var e=!this.value||n.modified()||t.changed(t.ADD_REM)||t.modified(n.key.fields)||t.modified(n.parentKey.fields);if(e){var r=Oc().id(n.key).parentId(n.parentKey)(t.source),i=r.lookup={};r.each(function(n){i[n.data._id]=n}),this.value=r}t.source.root=this.value};var _g=Y(es,_n);_g.transform=function(n,t){function e(n){var t=u[n];t&&(a[n]=1,o.mod.push(t))}t.source&&t.source.root||P("TreeLinks transform requires a backing tree data source.");var r=t.source.root,i=r.lookup,u=this.value,a={},o=t.fork();return t.visit(t.REM,function(n){var t=u[n._id];t&&(delete u[n._id],o.rem.push(t))}),t.visit(t.ADD,function(n){var t,e=n._id;(t=rs(i[e]))&&(o.add.push(u[e]=V({source:t,target:n})),a[e]=1)}),t.visit(t.MOD,function(n){var t=n._id,r=i[t],u=r.children;if(e(t),u)for(var o=0,f=u.length;f>o;++o)a[t=u[o].data._id]||e(t)}),o};var wg=Sn().set("binary",Vc).set("dice",Fc).set("slice",Xc).set("slicedice",Kc).set("squarify",yg).set("resquarify",bg),kg=Sn().set("tidy",Zc).set("cluster",Zf),Ng=Y(as,_n);Ng.transform=function(n,t){t.source&&t.source.root||P(this.constructor.name+" transform requires a backing tree data source.");var e=this.layout(n.method),r=t.source.root;n.field&&r.sum(n.field),n.sort&&r.sort(n.sort),this.setParams(e,n);try{this.value=e(r)}catch(i){P(i)}return r.each(this.setFields),t.reflow().modifies(this.setParams.fields)},Y(cs,as),cs.prototype.layout=is,cs.prototype.setParams=os(["size","nodeSize","separation"]),cs.prototype.setFields=fs(["x","y"]),Y(ss,as),ss.prototype.layout=us,ss.prototype.setParams=os(["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"]),ss.prototype.setFields=fs(["x0","y0","x1","y1"]),Y(ls,as),ls.prototype.layout=qc,ls.prototype.setParams=os(["size","round","padding"]),ls.prototype.setFields=ss.prototype.setFields,Y(hs,as),hs.prototype.layout=Cc,hs.prototype.setParams=os(["size","padding"]),hs.prototype.setFields=fs(["x","y","r"]),n.Tuple=Rs,n.version=ds,n.UniqueList=Z,n.changeset=en,n.Dataflow=mn,n.EventStream=hn,n.Parameters=fn,n.Pulse=rn,n.MultiPulse=on,n.Operator=sn,n.Transform=_n,n.Apply=wn,n.Bin=kn,n.Collect=An,n.Compare=En,n.CountIndex=zn,n.CountPattern=On,n.Extent=jn,n.Facet=Yn,n.Field=Hn,n.Filter=$n,n.Fold=Wn,n.Generate=Xn,n.Impute=Jn,n.Lookup=Qn,n.MultiExtent=nt,n.NoOp=et,n.Params=rt,n.Range=it,n.Rank=ut,n.Reflow=at,n.Relay=ot,n.Sample=ft,n.Sieve=ct,n.Subflow=In,n.TupleIndex=st,n.Values=lt,n.Aggregate=yt,n.CrossFilter=St,n.ResolveFilter=Tt,n.AxisTicks=Qt,n.DataJoin=ne,n.Encode=ee,n.Scale=ji,n.scales=sv,n.schemes=lv,n.Force=Ou,n.LinkPath=Zu,n.Pie=ia,n.Stack=ua,n.Voronoi=Ia,n.GeoPath=qf,n.GeoPoint=Lf,n.Graticule=zf,n.Projection=Of,n.projections=hg,n.Nest=Qc,n.Stratify=ts,n.TreeLinks=es,n.Pack=hs,n.Partition=ls,n.Tree=cs,n.Treemap=ss,n.bin=t,n.bootstrapCI=b,n.randomInteger=x,n.randomNormal=M,n.randomUniform=_,n.quartiles=w,n.accessor=k,n.accessorName=N,n.accessorFields=A,n.id=_s,n.identity=ws,n.zero=ks,n.one=Ns,n.truthy=As,n.falsy=Es,n.logger=F,n.None=Ds,n.Warn=Cs,n.Info=Ss,n.Debug=Us,n.array=q,n.compare=L,n.constant=O,n.error=P,n.extend=j,n.extentIndex=I,n.field=T,n.inherits=Y,n.isArray=xs,n.isFunction=z,n.isNumber=H,n.isObject=C,n.isString=S,n.merge=B,n.splitAccessPath=E,n.stringValue=U,n.toSet=$,n.visitArray=W,Object.defineProperty(n,"__esModule",{value:!0})});